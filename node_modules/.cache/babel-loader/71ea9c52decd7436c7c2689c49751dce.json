{"ast":null,"code":"!function (t, e) {\n  \"object\" == typeof exports && \"undefined\" != typeof module ? e(require(\"@firebase/app\")) : \"function\" == typeof define && define.amd ? define([\"@firebase/app\"], e) : e((t = \"undefined\" != typeof globalThis ? globalThis : t || self).firebase);\n}(this, function (cm) {\n  \"use strict\";\n\n  try {\n    !function () {\n      function t(t) {\n        return t && \"object\" == typeof t && \"default\" in t ? t : {\n          default: t\n        };\n      }\n\n      var e = t(cm),\n          _r2 = function r(t, e) {\n        return (_r2 = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function n(t, e) {\n        if (\"function\" != typeof e && null !== e) throw new TypeError(\"Class extends value \" + String(e) + \" is not a constructor or null\");\n\n        function n() {\n          this.constructor = t;\n        }\n\n        _r2(t, e), t.prototype = null === e ? Object.create(e) : (n.prototype = e.prototype, new n());\n      }\n\n      var _o2 = function o() {\n        return (_o2 = Object.assign || function (t) {\n          for (var e, n = 1, r = arguments.length; n < r; n++) {\n            for (var i in e = arguments[n]) {\n              Object.prototype.hasOwnProperty.call(e, i) && (t[i] = e[i]);\n            }\n          }\n\n          return t;\n        }).apply(this, arguments);\n      };\n\n      function y(t, s, a, u) {\n        return new (a = a || Promise)(function (n, e) {\n          function r(t) {\n            try {\n              o(u.next(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function i(t) {\n            try {\n              o(u.throw(t));\n            } catch (t) {\n              e(t);\n            }\n          }\n\n          function o(t) {\n            var e;\n            t.done ? n(t.value) : ((e = t.value) instanceof a ? e : new a(function (t) {\n              t(e);\n            })).then(r, i);\n          }\n\n          o((u = u.apply(t, s || [])).next());\n        });\n      }\n\n      function g(n, r) {\n        var i,\n            o,\n            s,\n            a = {\n          label: 0,\n          sent: function sent() {\n            if (1 & s[0]) throw s[1];\n            return s[1];\n          },\n          trys: [],\n          ops: []\n        },\n            t = {\n          next: e(0),\n          throw: e(1),\n          return: e(2)\n        };\n        return \"function\" == typeof Symbol && (t[Symbol.iterator] = function () {\n          return this;\n        }), t;\n\n        function e(e) {\n          return function (t) {\n            return function (e) {\n              if (i) throw new TypeError(\"Generator is already executing.\");\n\n              for (; a;) {\n                try {\n                  if (i = 1, o && (s = 2 & e[0] ? o.return : e[0] ? o.throw || ((s = o.return) && s.call(o), 0) : o.next) && !(s = s.call(o, e[1])).done) return s;\n\n                  switch (o = 0, (e = s ? [2 & e[0], s.value] : e)[0]) {\n                    case 0:\n                    case 1:\n                      s = e;\n                      break;\n\n                    case 4:\n                      return a.label++, {\n                        value: e[1],\n                        done: !1\n                      };\n\n                    case 5:\n                      a.label++, o = e[1], e = [0];\n                      continue;\n\n                    case 7:\n                      e = a.ops.pop(), a.trys.pop();\n                      continue;\n\n                    default:\n                      if (!(s = 0 < (s = a.trys).length && s[s.length - 1]) && (6 === e[0] || 2 === e[0])) {\n                        a = 0;\n                        continue;\n                      }\n\n                      if (3 === e[0] && (!s || e[1] > s[0] && e[1] < s[3])) {\n                        a.label = e[1];\n                        break;\n                      }\n\n                      if (6 === e[0] && a.label < s[1]) {\n                        a.label = s[1], s = e;\n                        break;\n                      }\n\n                      if (s && a.label < s[2]) {\n                        a.label = s[2], a.ops.push(e);\n                        break;\n                      }\n\n                      s[2] && a.ops.pop(), a.trys.pop();\n                      continue;\n                  }\n\n                  e = r.call(n, a);\n                } catch (t) {\n                  e = [6, t], o = 0;\n                } finally {\n                  i = s = 0;\n                }\n              }\n\n              if (5 & e[0]) throw e[1];\n              return {\n                value: e[0] ? e[1] : void 0,\n                done: !0\n              };\n            }([e, t]);\n          };\n        }\n      }\n\n      function s(t, e) {\n        for (var n = 0, r = e.length, i = t.length; n < r; n++, i++) {\n          t[i] = e[n];\n        }\n\n        return t;\n      }\n\n      var a = {\n        byteToCharMap_: null,\n        charToByteMap_: null,\n        byteToCharMapWebSafe_: null,\n        charToByteMapWebSafe_: null,\n        ENCODED_VALS_BASE: \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",\n\n        get ENCODED_VALS() {\n          return this.ENCODED_VALS_BASE + \"+/=\";\n        },\n\n        get ENCODED_VALS_WEBSAFE() {\n          return this.ENCODED_VALS_BASE + \"-_.\";\n        },\n\n        HAS_NATIVE_SUPPORT: \"function\" == typeof atob,\n        encodeByteArray: function encodeByteArray(t, e) {\n          if (!Array.isArray(t)) throw Error(\"encodeByteArray takes an array as a parameter\");\n          this.init_();\n\n          for (var n = e ? this.byteToCharMapWebSafe_ : this.byteToCharMap_, r = [], i = 0; i < t.length; i += 3) {\n            var o = t[i],\n                s = i + 1 < t.length,\n                a = s ? t[i + 1] : 0,\n                u = i + 2 < t.length,\n                c = u ? t[i + 2] : 0,\n                h = o >> 2,\n                o = (3 & o) << 4 | a >> 4,\n                a = (15 & a) << 2 | c >> 6,\n                c = 63 & c;\n            u || (c = 64, s || (a = 64)), r.push(n[h], n[o], n[a], n[c]);\n          }\n\n          return r.join(\"\");\n        },\n        encodeString: function encodeString(t, e) {\n          return this.HAS_NATIVE_SUPPORT && !e ? btoa(t) : this.encodeByteArray(function (t) {\n            for (var e = [], n = 0, r = 0; r < t.length; r++) {\n              var i = t.charCodeAt(r);\n              i < 128 ? e[n++] = i : (i < 2048 ? e[n++] = i >> 6 | 192 : (55296 == (64512 & i) && r + 1 < t.length && 56320 == (64512 & t.charCodeAt(r + 1)) ? (i = 65536 + ((1023 & i) << 10) + (1023 & t.charCodeAt(++r)), e[n++] = i >> 18 | 240, e[n++] = i >> 12 & 63 | 128) : e[n++] = i >> 12 | 224, e[n++] = i >> 6 & 63 | 128), e[n++] = 63 & i | 128);\n            }\n\n            return e;\n          }(t), e);\n        },\n        decodeString: function decodeString(t, e) {\n          return this.HAS_NATIVE_SUPPORT && !e ? atob(t) : function (t) {\n            for (var e = [], n = 0, r = 0; n < t.length;) {\n              var i,\n                  o,\n                  s,\n                  a = t[n++];\n              a < 128 ? e[r++] = String.fromCharCode(a) : 191 < a && a < 224 ? (o = t[n++], e[r++] = String.fromCharCode((31 & a) << 6 | 63 & o)) : 239 < a && a < 365 ? (i = ((7 & a) << 18 | (63 & (o = t[n++])) << 12 | (63 & (s = t[n++])) << 6 | 63 & t[n++]) - 65536, e[r++] = String.fromCharCode(55296 + (i >> 10)), e[r++] = String.fromCharCode(56320 + (1023 & i))) : (o = t[n++], s = t[n++], e[r++] = String.fromCharCode((15 & a) << 12 | (63 & o) << 6 | 63 & s));\n            }\n\n            return e.join(\"\");\n          }(this.decodeStringToByteArray(t, e));\n        },\n        decodeStringToByteArray: function decodeStringToByteArray(t, e) {\n          this.init_();\n\n          for (var n = e ? this.charToByteMapWebSafe_ : this.charToByteMap_, r = [], i = 0; i < t.length;) {\n            var o = n[t.charAt(i++)],\n                s = i < t.length ? n[t.charAt(i)] : 0,\n                a = ++i < t.length ? n[t.charAt(i)] : 64,\n                u = ++i < t.length ? n[t.charAt(i)] : 64;\n            if (++i, null == o || null == s || null == a || null == u) throw Error();\n            o = o << 2 | s >> 4;\n            r.push(o), 64 !== a && (s = s << 4 & 240 | a >> 2, r.push(s), 64 !== u && (u = a << 6 & 192 | u, r.push(u)));\n          }\n\n          return r;\n        },\n        init_: function init_() {\n          if (!this.byteToCharMap_) {\n            this.byteToCharMap_ = {}, this.charToByteMap_ = {}, this.byteToCharMapWebSafe_ = {}, this.charToByteMapWebSafe_ = {};\n\n            for (var t = 0; t < this.ENCODED_VALS.length; t++) {\n              this.byteToCharMap_[t] = this.ENCODED_VALS.charAt(t), this.charToByteMap_[this.byteToCharMap_[t]] = t, this.byteToCharMapWebSafe_[t] = this.ENCODED_VALS_WEBSAFE.charAt(t), (this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]] = t) >= this.ENCODED_VALS_BASE.length && (this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)] = t, this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)] = t);\n            }\n          }\n        }\n      };\n\n      function h() {\n        return \"undefined\" != typeof navigator && \"string\" == typeof navigator.userAgent ? navigator.userAgent : \"\";\n      }\n\n      var i,\n          u = \"FirebaseError\",\n          c = (n(l, i = Error), l);\n\n      function l(t, e, n) {\n        e = i.call(this, e) || this;\n        return e.code = t, e.customData = n, e.name = u, Object.setPrototypeOf(e, l.prototype), Error.captureStackTrace && Error.captureStackTrace(e, f.prototype.create), e;\n      }\n\n      var f = (d.prototype.create = function (t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        var r,\n            i = e[0] || {},\n            o = this.service + \"/\" + t,\n            t = this.errors[t],\n            t = t ? (r = i, t.replace(m, function (t, e) {\n          var n = r[e];\n          return null != n ? String(n) : \"<\" + e + \"?>\";\n        })) : \"Error\",\n            t = this.serviceName + \": \" + t + \" (\" + o + \").\";\n        return new c(o, t, i);\n      }, d);\n\n      function d(t, e, n) {\n        this.service = t, this.serviceName = e, this.errors = n;\n      }\n\n      var p,\n          m = /\\{\\$([^}]+)}/g;\n\n      function v(t) {\n        return t && t._delegate ? t._delegate : t;\n      }\n\n      (_e = p = p || {})[_e.DEBUG = 0] = \"DEBUG\", _e[_e.VERBOSE = 1] = \"VERBOSE\", _e[_e.INFO = 2] = \"INFO\", _e[_e.WARN = 3] = \"WARN\", _e[_e.ERROR = 4] = \"ERROR\", _e[_e.SILENT = 5] = \"SILENT\";\n\n      function b(t, e) {\n        for (var n = [], r = 2; r < arguments.length; r++) {\n          n[r - 2] = arguments[r];\n        }\n\n        if (!(e < t.logLevel)) {\n          var i = new Date().toISOString(),\n              o = T[e];\n          if (!o) throw new Error(\"Attempted to log a message with an invalid logType (value: \" + e + \")\");\n          console[o].apply(console, s([\"[\" + i + \"]  \" + t.name + \":\"], n));\n        }\n      }\n\n      var w = {\n        debug: p.DEBUG,\n        verbose: p.VERBOSE,\n        info: p.INFO,\n        warn: p.WARN,\n        error: p.ERROR,\n        silent: p.SILENT\n      },\n          E = p.INFO,\n          T = ((Se = {})[p.DEBUG] = \"log\", Se[p.VERBOSE] = \"log\", Se[p.INFO] = \"info\", Se[p.WARN] = \"warn\", Se[p.ERROR] = \"error\", Se),\n          I = (Object.defineProperty(_.prototype, \"logLevel\", {\n        get: function get() {\n          return this._logLevel;\n        },\n        set: function set(t) {\n          if (!(t in p)) throw new TypeError('Invalid value \"' + t + '\" assigned to `logLevel`');\n          this._logLevel = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _.prototype.setLogLevel = function (t) {\n        this._logLevel = \"string\" == typeof t ? w[t] : t;\n      }, Object.defineProperty(_.prototype, \"logHandler\", {\n        get: function get() {\n          return this._logHandler;\n        },\n        set: function set(t) {\n          if (\"function\" != typeof t) throw new TypeError(\"Value assigned to `logHandler` must be a function\");\n          this._logHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(_.prototype, \"userLogHandler\", {\n        get: function get() {\n          return this._userLogHandler;\n        },\n        set: function set(t) {\n          this._userLogHandler = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _.prototype.debug = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.DEBUG], t)), this._logHandler.apply(this, s([this, p.DEBUG], t));\n      }, _.prototype.log = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.VERBOSE], t)), this._logHandler.apply(this, s([this, p.VERBOSE], t));\n      }, _.prototype.info = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.INFO], t)), this._logHandler.apply(this, s([this, p.INFO], t));\n      }, _.prototype.warn = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.WARN], t)), this._logHandler.apply(this, s([this, p.WARN], t));\n      }, _.prototype.error = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._userLogHandler && this._userLogHandler.apply(this, s([this, p.ERROR], t)), this._logHandler.apply(this, s([this, p.ERROR], t));\n      }, _);\n\n      function _(t) {\n        this.name = t, this._logLevel = E, this._logHandler = b, this._userLogHandler = null;\n      }\n\n      var _S = function S(t, e) {\n        return (_S = Object.setPrototypeOf || {\n          __proto__: []\n        } instanceof Array && function (t, e) {\n          t.__proto__ = e;\n        } || function (t, e) {\n          for (var n in e) {\n            Object.prototype.hasOwnProperty.call(e, n) && (t[n] = e[n]);\n          }\n        })(t, e);\n      };\n\n      function A(t) {\n        var e = \"function\" == typeof Symbol && Symbol.iterator,\n            n = e && t[e],\n            r = 0;\n        if (n) return n.call(t);\n        if (t && \"number\" == typeof t.length) return {\n          next: function next() {\n            return {\n              value: (t = t && r >= t.length ? void 0 : t) && t[r++],\n              done: !t\n            };\n          }\n        };\n        throw new TypeError(e ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n      }\n\n      var N,\n          D = \"undefined\" != typeof globalThis ? globalThis : \"undefined\" != typeof window ? window : \"undefined\" != typeof global ? global : \"undefined\" != typeof self ? self : {},\n          C = {},\n          k = D || self;\n\n      function R() {}\n\n      function x(t) {\n        var e = typeof t;\n        return \"array\" == (e = \"object\" != e ? e : t ? Array.isArray(t) ? \"array\" : e : \"null\") || \"object\" == e && \"number\" == typeof t.length;\n      }\n\n      function O(t) {\n        var e = typeof t;\n        return \"object\" == e && null != t || \"function\" == e;\n      }\n\n      var L = \"closure_uid_\" + (1e9 * Math.random() >>> 0),\n          P = 0;\n\n      function M(t, e, n) {\n        return t.call.apply(t.bind, arguments);\n      }\n\n      function F(e, n, t) {\n        if (!e) throw Error();\n\n        if (2 < arguments.length) {\n          var r = Array.prototype.slice.call(arguments, 2);\n          return function () {\n            var t = Array.prototype.slice.call(arguments);\n            return Array.prototype.unshift.apply(t, r), e.apply(n, t);\n          };\n        }\n\n        return function () {\n          return e.apply(n, arguments);\n        };\n      }\n\n      function V(t, e, n) {\n        return (V = Function.prototype.bind && -1 != Function.prototype.bind.toString().indexOf(\"native code\") ? M : F).apply(null, arguments);\n      }\n\n      function U(e) {\n        var n = Array.prototype.slice.call(arguments, 1);\n        return function () {\n          var t = n.slice();\n          return t.push.apply(t, arguments), e.apply(this, t);\n        };\n      }\n\n      function q() {\n        return Date.now();\n      }\n\n      function B(t, o) {\n        function e() {}\n\n        e.prototype = o.prototype, t.X = o.prototype, t.prototype = new e(), (t.prototype.constructor = t).Kb = function (t, e, n) {\n          for (var r = Array(arguments.length - 2), i = 2; i < arguments.length; i++) {\n            r[i - 2] = arguments[i];\n          }\n\n          return o.prototype[e].apply(t, r);\n        };\n      }\n\n      function j() {\n        this.j = this.j, this.i = this.i;\n      }\n\n      j.prototype.j = !1, j.prototype.ja = function () {\n        var t;\n        !this.j && (this.j = !0, this.G(), 0) && (t = this, Object.prototype.hasOwnProperty.call(t, L) && t[L] || (t[L] = ++P));\n      }, j.prototype.G = function () {\n        if (this.i) for (; this.i.length;) {\n          this.i.shift()();\n        }\n      };\n      var K = Array.prototype.indexOf ? function (t, e) {\n        return Array.prototype.indexOf.call(t, e, void 0);\n      } : function (t, e) {\n        if (\"string\" == typeof t) return \"string\" != typeof e || 1 != e.length ? -1 : t.indexOf(e, 0);\n\n        for (var n = 0; n < t.length; n++) {\n          if (n in t && t[n] === e) return n;\n        }\n\n        return -1;\n      },\n          G = Array.prototype.forEach ? function (t, e, n) {\n        Array.prototype.forEach.call(t, e, n);\n      } : function (t, e, n) {\n        for (var r = t.length, i = \"string\" == typeof t ? t.split(\"\") : t, o = 0; o < r; o++) {\n          o in i && e.call(n, i[o], o, t);\n        }\n      };\n\n      function Q() {\n        return Array.prototype.concat.apply([], arguments);\n      }\n\n      function z(t) {\n        var e = t.length;\n\n        if (0 < e) {\n          for (var n = Array(e), r = 0; r < e; r++) {\n            n[r] = t[r];\n          }\n\n          return n;\n        }\n\n        return [];\n      }\n\n      function H(t) {\n        return /^[\\s\\xa0]*$/.test(t);\n      }\n\n      var W,\n          Y = String.prototype.trim ? function (t) {\n        return t.trim();\n      } : function (t) {\n        return /^[\\s\\xa0]*([\\s\\S]*?)[\\s\\xa0]*$/.exec(t)[1];\n      };\n\n      function X(t, e) {\n        return -1 != t.indexOf(e);\n      }\n\n      function J(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      t: {\n        var $ = k.navigator;\n\n        if ($) {\n          $ = $.userAgent;\n\n          if ($) {\n            W = $;\n            break t;\n          }\n        }\n\n        W = \"\";\n      }\n\n      function Z(t, e, n) {\n        for (var r in t) {\n          e.call(n, t[r], r, t);\n        }\n      }\n\n      function tt(t) {\n        var e,\n            n = {};\n\n        for (e in t) {\n          n[e] = t[e];\n        }\n\n        return n;\n      }\n\n      var et = \"constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf\".split(\" \");\n\n      function nt(t) {\n        for (var e, n, r = 1; r < arguments.length; r++) {\n          for (e in n = arguments[r]) {\n            t[e] = n[e];\n          }\n\n          for (var i = 0; i < et.length; i++) {\n            e = et[i], Object.prototype.hasOwnProperty.call(n, e) && (t[e] = n[e]);\n          }\n        }\n      }\n\n      function rt(t) {\n        return rt[\" \"](t), t;\n      }\n\n      rt[\" \"] = R;\n      var it,\n          ot = X(W, \"Opera\"),\n          st = X(W, \"Trident\") || X(W, \"MSIE\"),\n          at = X(W, \"Edge\"),\n          ut = at || st,\n          ct = X(W, \"Gecko\") && !(X(W.toLowerCase(), \"webkit\") && !X(W, \"Edge\")) && !(X(W, \"Trident\") || X(W, \"MSIE\")) && !X(W, \"Edge\"),\n          ht = X(W.toLowerCase(), \"webkit\") && !X(W, \"Edge\");\n\n      function lt() {\n        var t = k.document;\n        return t ? t.documentMode : void 0;\n      }\n\n      t: {\n        var ft = \"\",\n            dt = (dt = W, ct ? /rv:([^\\);]+)(\\)|;)/.exec(dt) : at ? /Edge\\/([\\d\\.]+)/.exec(dt) : st ? /\\b(?:MSIE|rv)[: ]([^\\);]+)(\\)|;)/.exec(dt) : ht ? /WebKit\\/(\\S+)/.exec(dt) : ot ? /(?:Version)[ \\/]?(\\S+)/.exec(dt) : void 0);\n\n        if (dt && (ft = dt ? dt[1] : \"\"), st) {\n          dt = lt();\n\n          if (null != dt && dt > parseFloat(ft)) {\n            it = String(dt);\n            break t;\n          }\n        }\n\n        it = ft;\n      }\n\n      var pt = {};\n\n      function yt(a) {\n        return t = a, e = function e() {\n          for (var t = 0, e = Y(String(it)).split(\".\"), n = Y(String(a)).split(\".\"), r = Math.max(e.length, n.length), i = 0; 0 == t && i < r; i++) {\n            for (var o = e[i] || \"\", s = n[i] || \"\"; o = /(\\d*)(\\D*)(.*)/.exec(o) || [\"\", \"\", \"\", \"\"], s = /(\\d*)(\\D*)(.*)/.exec(s) || [\"\", \"\", \"\", \"\"], (0 != o[0].length || 0 != s[0].length) && (t = J(0 == o[1].length ? 0 : parseInt(o[1], 10), 0 == s[1].length ? 0 : parseInt(s[1], 10)) || J(0 == o[2].length, 0 == s[2].length) || J(o[2], s[2]), o = o[3], s = s[3], 0 == t);) {\n              ;\n            }\n          }\n\n          return 0 <= t;\n        }, n = pt, Object.prototype.hasOwnProperty.call(n, t) ? n[t] : n[t] = e(t);\n        var t, e, n;\n      }\n\n      var gt = k.document && st && (lt() || parseInt(it, 10)) || void 0,\n          mt = !st || 9 <= Number(gt),\n          vt = st && !yt(\"9\"),\n          bt = function () {\n        if (!k.addEventListener || !Object.defineProperty) return !1;\n        var t = !1,\n            e = Object.defineProperty({}, \"passive\", {\n          get: function get() {\n            t = !0;\n          }\n        });\n\n        try {\n          k.addEventListener(\"test\", R, e), k.removeEventListener(\"test\", R, e);\n        } catch (t) {}\n\n        return t;\n      }();\n\n      function wt(t, e) {\n        this.type = t, this.a = this.target = e, this.defaultPrevented = !1;\n      }\n\n      function Et(t, e) {\n        if (wt.call(this, t ? t.type : \"\"), this.relatedTarget = this.a = this.target = null, this.button = this.screenY = this.screenX = this.clientY = this.clientX = 0, this.key = \"\", this.metaKey = this.shiftKey = this.altKey = this.ctrlKey = !1, this.pointerId = 0, this.pointerType = \"\", this.c = null, t) {\n          var n = this.type = t.type,\n              r = t.changedTouches && t.changedTouches.length ? t.changedTouches[0] : null;\n\n          if (this.target = t.target || t.srcElement, this.a = e, e = t.relatedTarget) {\n            if (ct) {\n              t: {\n                try {\n                  rt(e.nodeName);\n                  var i = !0;\n                  break t;\n                } catch (t) {}\n\n                i = !1;\n              }\n\n              i || (e = null);\n            }\n          } else \"mouseover\" == n ? e = t.fromElement : \"mouseout\" == n && (e = t.toElement);\n\n          this.relatedTarget = e, r ? (this.clientX = void 0 !== r.clientX ? r.clientX : r.pageX, this.clientY = void 0 !== r.clientY ? r.clientY : r.pageY, this.screenX = r.screenX || 0, this.screenY = r.screenY || 0) : (this.clientX = void 0 !== t.clientX ? t.clientX : t.pageX, this.clientY = void 0 !== t.clientY ? t.clientY : t.pageY, this.screenX = t.screenX || 0, this.screenY = t.screenY || 0), this.button = t.button, this.key = t.key || \"\", this.ctrlKey = t.ctrlKey, this.altKey = t.altKey, this.shiftKey = t.shiftKey, this.metaKey = t.metaKey, this.pointerId = t.pointerId || 0, this.pointerType = \"string\" == typeof t.pointerType ? t.pointerType : Tt[t.pointerType] || \"\", (this.c = t).defaultPrevented && this.b();\n        }\n      }\n\n      wt.prototype.b = function () {\n        this.defaultPrevented = !0;\n      }, B(Et, wt);\n      var Tt = {\n        2: \"touch\",\n        3: \"pen\",\n        4: \"mouse\"\n      };\n\n      Et.prototype.b = function () {\n        Et.X.b.call(this);\n        var t = this.c;\n        if (t.preventDefault) t.preventDefault();else if (t.returnValue = !1, vt) try {\n          (t.ctrlKey || 112 <= t.keyCode && t.keyCode <= 123) && (t.keyCode = -1);\n        } catch (t) {}\n      };\n\n      var It = \"closure_listenable_\" + (1e6 * Math.random() | 0),\n          _t = 0;\n\n      function St(t, e, n, r, i) {\n        this.listener = t, this.proxy = null, this.src = e, this.type = n, this.capture = !!r, this.ca = i, this.key = ++_t, this.Y = this.Z = !1;\n      }\n\n      function At(t) {\n        t.Y = !0, t.listener = null, t.proxy = null, t.src = null, t.ca = null;\n      }\n\n      function Nt(t) {\n        this.src = t, this.a = {}, this.b = 0;\n      }\n\n      function Dt(t, e) {\n        var n,\n            r,\n            i,\n            o = e.type;\n        o in t.a && (n = t.a[o], (i = 0 <= (r = K(n, e))) && Array.prototype.splice.call(n, r, 1), i && (At(e), 0 == t.a[o].length && (delete t.a[o], t.b--)));\n      }\n\n      function Ct(t, e, n, r) {\n        for (var i = 0; i < t.length; ++i) {\n          var o = t[i];\n          if (!o.Y && o.listener == e && o.capture == !!n && o.ca == r) return i;\n        }\n\n        return -1;\n      }\n\n      Nt.prototype.add = function (t, e, n, r, i) {\n        var o = t.toString();\n        (t = this.a[o]) || (t = this.a[o] = [], this.b++);\n        var s = Ct(t, e, r, i);\n        return -1 < s ? (e = t[s], n || (e.Z = !1)) : ((e = new St(e, this.src, o, !!r, i)).Z = n, t.push(e)), e;\n      };\n\n      var kt = \"closure_lm_\" + (1e6 * Math.random() | 0),\n          Rt = {};\n\n      function xt(t, e, n, r, i) {\n        if (r && r.once) return function t(e, n, r, i, o) {\n          if (Array.isArray(n)) {\n            for (var s = 0; s < n.length; s++) {\n              t(e, n[s], r, i, o);\n            }\n\n            return null;\n          }\n\n          r = qt(r);\n          return e && e[It] ? e.wa(n, r, O(i) ? !!i.capture : !!i, o) : Ot(e, n, r, !0, i, o);\n        }(t, e, n, r, i);\n\n        if (Array.isArray(e)) {\n          for (var o = 0; o < e.length; o++) {\n            xt(t, e[o], n, r, i);\n          }\n\n          return null;\n        }\n\n        return n = qt(n), t && t[It] ? t.va(e, n, O(r) ? !!r.capture : !!r, i) : Ot(t, e, n, !1, r, i);\n      }\n\n      function Ot(t, e, n, r, i, o) {\n        if (!e) throw Error(\"Invalid event type\");\n        var s = O(i) ? !!i.capture : !!i;\n        if (s && !mt) return null;\n        var a,\n            u,\n            c = Vt(t);\n        if (c || (t[kt] = c = new Nt(t)), (n = c.add(e, n, r, s, o)).proxy) return n;\n        if (a = Ft, r = u = mt ? function (t) {\n          return a.call(u.src, u.listener, t);\n        } : function (t) {\n          if (!(t = a.call(u.src, u.listener, t))) return t;\n        }, (n.proxy = r).src = t, r.listener = n, t.addEventListener) void 0 === (i = !bt ? s : i) && (i = !1), t.addEventListener(e.toString(), r, i);else if (t.attachEvent) t.attachEvent(Pt(e.toString()), r);else {\n          if (!t.addListener || !t.removeListener) throw Error(\"addEventListener and attachEvent are unavailable.\");\n          t.addListener(r);\n        }\n        return n;\n      }\n\n      function Lt(t) {\n        var e, n, r;\n        \"number\" != typeof t && t && !t.Y && ((e = t.src) && e[It] ? Dt(e.c, t) : (n = t.type, r = t.proxy, e.removeEventListener ? e.removeEventListener(n, r, t.capture) : e.detachEvent ? e.detachEvent(Pt(n), r) : e.addListener && e.removeListener && e.removeListener(r), (n = Vt(e)) ? (Dt(n, t), 0 == n.b && (n.src = null, e[kt] = null)) : At(t)));\n      }\n\n      function Pt(t) {\n        return t in Rt ? Rt[t] : Rt[t] = \"on\" + t;\n      }\n\n      function Mt(t, e) {\n        var n = t.listener,\n            r = t.ca || t.src;\n        return t.Z && Lt(t), n.call(r, e);\n      }\n\n      function Ft(t, e) {\n        if (t.Y) return !0;\n        if (mt) return Mt(t, new Et(e, this));\n        if (!e) t: {\n          e = [\"window\", \"event\"];\n\n          for (var n = k, r = 0; r < e.length; r++) {\n            if (null == (n = n[e[r]])) {\n              e = null;\n              break t;\n            }\n          }\n\n          e = n;\n        }\n        return Mt(t, e = new Et(e, this));\n      }\n\n      function Vt(t) {\n        return (t = t[kt]) instanceof Nt ? t : null;\n      }\n\n      var Ut = \"__closure_events_fn_\" + (1e9 * Math.random() >>> 0);\n\n      function qt(e) {\n        return \"function\" == typeof e ? e : (e[Ut] || (e[Ut] = function (t) {\n          return e.handleEvent(t);\n        }), e[Ut]);\n      }\n\n      function Bt() {\n        j.call(this), this.c = new Nt(this), (this.J = this).C = null;\n      }\n\n      function jt(t, e) {\n        var n,\n            r = t.C;\n        if (r) for (n = []; r; r = r.C) {\n          n.push(r);\n        }\n        if (t = t.J, r = e.type || e, \"string\" == typeof e ? e = new wt(e, t) : e instanceof wt ? e.target = e.target || t : (s = e, nt(e = new wt(r, t), s)), s = !0, n) for (var i = n.length - 1; 0 <= i; i--) {\n          var o = e.a = n[i],\n              s = Kt(o, r, !0, e) && s;\n        }\n        if (s = Kt(o = e.a = t, r, !0, e) && s, s = Kt(o, r, !1, e) && s, n) for (i = 0; i < n.length; i++) {\n          s = Kt(o = e.a = n[i], r, !1, e) && s;\n        }\n      }\n\n      function Kt(t, e, n, r) {\n        if (!(e = t.c.a[String(e)])) return !0;\n        e = e.concat();\n\n        for (var i = !0, o = 0; o < e.length; ++o) {\n          var s,\n              a,\n              u = e[o];\n          u && !u.Y && u.capture == n && (s = u.listener, a = u.ca || u.src, u.Z && Dt(t.c, u), i = !1 !== s.call(a, r) && i);\n        }\n\n        return i && !r.defaultPrevented;\n      }\n\n      B(Bt, j), Bt.prototype[It] = !0, (N = Bt.prototype).addEventListener = function (t, e, n, r) {\n        xt(this, t, e, n, r);\n      }, N.removeEventListener = function (t, e, n, r) {\n        !function t(e, n, r, i, o) {\n          if (Array.isArray(n)) for (var s = 0; s < n.length; s++) {\n            t(e, n[s], r, i, o);\n          } else i = O(i) ? !!i.capture : !!i, r = qt(r), e && e[It] ? (e = e.c, (n = String(n).toString()) in e.a && -1 < (r = Ct(s = e.a[n], r, i, o)) && (At(s[r]), Array.prototype.splice.call(s, r, 1), 0 == s.length && (delete e.a[n], e.b--))) : (e = e && Vt(e)) && (n = e.a[n.toString()], (r = (e = -1) < (e = n ? Ct(n, r, i, o) : e) ? n[e] : null) && Lt(r));\n        }(this, t, e, n, r);\n      }, N.G = function () {\n        if (Bt.X.G.call(this), this.c) {\n          var t,\n              e = this.c;\n\n          for (t in e.a) {\n            for (var n = e.a[t], r = 0; r < n.length; r++) {\n              At(n[r]);\n            }\n\n            delete e.a[t], e.b--;\n          }\n        }\n\n        this.C = null;\n      }, N.va = function (t, e, n, r) {\n        return this.c.add(String(t), e, !1, n, r);\n      }, N.wa = function (t, e, n, r) {\n        return this.c.add(String(t), e, !0, n, r);\n      };\n      var Gt = k.JSON.stringify;\n\n      function Qt() {\n        this.b = this.a = null;\n      }\n\n      var zt,\n          Ht = (Wt.prototype.get = function () {\n        var t;\n        return 0 < this.b ? (this.b--, t = this.a, this.a = t.next, t.next = null) : t = this.c(), t;\n      }, new Wt(function () {\n        return new Yt();\n      }, function (t) {\n        t.reset();\n      }));\n\n      function Wt(t, e) {\n        this.c = t, this.f = e, this.b = 0, this.a = null;\n      }\n\n      function Yt() {\n        this.next = this.b = this.a = null;\n      }\n\n      function Xt(t, e) {\n        var n;\n        zt || (n = k.Promise.resolve(void 0), zt = function zt() {\n          n.then(Zt);\n        }), Jt || (zt(), Jt = !0), $t.add(t, e);\n      }\n\n      Qt.prototype.add = function (t, e) {\n        var n = Ht.get();\n        n.set(t, e), this.b ? this.b.next = n : this.a = n, this.b = n;\n      }, Yt.prototype.set = function (t, e) {\n        this.a = t, this.b = e, this.next = null;\n      };\n      var Jt = !(Yt.prototype.reset = function () {\n        this.next = this.b = this.a = null;\n      }),\n          $t = new Qt();\n\n      function Zt() {\n        for (var t, e; n = e = void 0, n = null, (e = $t).a && (n = e.a, e.a = e.a.next, e.a || (e.b = null), n.next = null), t = n;) {\n          try {\n            t.a.call(t.b);\n          } catch (t) {\n            !function (t) {\n              k.setTimeout(function () {\n                throw t;\n              }, 0);\n            }(t);\n          }\n\n          var n = Ht;\n          n.f(t), n.b < 100 && (n.b++, t.next = n.a, n.a = t);\n        }\n\n        Jt = !1;\n      }\n\n      function te(t, e) {\n        Bt.call(this), this.b = t || 1, this.a = e || k, this.f = V(this.Za, this), this.g = q();\n      }\n\n      function ee(t) {\n        t.aa = !1, t.M && (t.a.clearTimeout(t.M), t.M = null);\n      }\n\n      function ne(t, e, n) {\n        if (\"function\" == typeof t) n && (t = V(t, n));else {\n          if (!t || \"function\" != typeof t.handleEvent) throw Error(\"Invalid listener argument\");\n          t = V(t.handleEvent, t);\n        }\n        return 2147483647 < Number(e) ? -1 : k.setTimeout(t, e || 0);\n      }\n\n      B(te, Bt), (N = te.prototype).aa = !1, N.M = null, N.Za = function () {\n        var t;\n        this.aa && (0 < (t = q() - this.g) && t < .8 * this.b ? this.M = this.a.setTimeout(this.f, this.b - t) : (this.M && (this.a.clearTimeout(this.M), this.M = null), jt(this, \"tick\"), this.aa && (ee(this), this.start())));\n      }, N.start = function () {\n        this.aa = !0, this.M || (this.M = this.a.setTimeout(this.f, this.b), this.g = q());\n      }, N.G = function () {\n        te.X.G.call(this), ee(this), delete this.a;\n      };\n      var re,\n          ie,\n          oe,\n          se = (_S(ie = ue, oe = re = j), ie.prototype = null === oe ? Object.create(oe) : (ae.prototype = oe.prototype, new ae()), ue.prototype.f = function (t) {\n        this.b = arguments, this.a ? this.c = !0 : function t(e) {\n          e.a = ne(function () {\n            e.a = null, e.c && (e.c = !1, t(e));\n          }, e.h);\n          var n = e.b;\n          e.b = null, e.g.apply(null, n);\n        }(this);\n      }, ue.prototype.G = function () {\n        re.prototype.G.call(this), this.a && (k.clearTimeout(this.a), this.a = null, this.c = !1, this.b = null);\n      }, ue);\n\n      function ae() {\n        this.constructor = ie;\n      }\n\n      function ue(t, e) {\n        var n = re.call(this) || this;\n        return n.g = t, n.h = e, n.b = null, n.c = !1, n.a = null, n;\n      }\n\n      function ce(t) {\n        j.call(this), this.b = t, this.a = {};\n      }\n\n      B(ce, j);\n      var he = [];\n\n      function le(t, e, n, r) {\n        Array.isArray(n) || (n && (he[0] = n.toString()), n = he);\n\n        for (var i = 0; i < n.length; i++) {\n          var o = xt(e, n[i], r || t.handleEvent, !1, t.b || t);\n          if (!o) break;\n          t.a[o.key] = o;\n        }\n      }\n\n      function fe(t) {\n        Z(t.a, function (t, e) {\n          this.a.hasOwnProperty(e) && Lt(t);\n        }, t), t.a = {};\n      }\n\n      function de() {\n        this.a = !0;\n      }\n\n      function pe(t, e, n, r) {\n        t.info(function () {\n          return \"XMLHTTP TEXT (\" + e + \"): \" + function (t, e) {\n            if (!t.a) return e;\n            if (!e) return null;\n\n            try {\n              var n = JSON.parse(e);\n              if (n) for (t = 0; t < n.length; t++) {\n                if (Array.isArray(n[t])) {\n                  var r = n[t];\n\n                  if (!(r.length < 2)) {\n                    var i = r[1];\n\n                    if (Array.isArray(i) && !(i.length < 1)) {\n                      r = i[0];\n                      if (\"noop\" != r && \"stop\" != r && \"close\" != r) for (var o = 1; o < i.length; o++) {\n                        i[o] = \"\";\n                      }\n                    }\n                  }\n                }\n              }\n              return Gt(n);\n            } catch (t) {\n              return e;\n            }\n          }(t, n) + (r ? \" \" + r : \"\");\n        });\n      }\n\n      ce.prototype.G = function () {\n        ce.X.G.call(this), fe(this);\n      }, ce.prototype.handleEvent = function () {\n        throw Error(\"EventHandler.handleEvent not implemented\");\n      }, de.prototype.info = function () {};\n      var ye = {},\n          ge = null;\n\n      function me() {\n        return ge = ge || new Bt();\n      }\n\n      function ve(t) {\n        wt.call(this, ye.Fa, t);\n      }\n\n      function be(t) {\n        var e = me();\n        jt(e, new ve(e));\n      }\n\n      function we(t, e) {\n        wt.call(this, ye.STAT_EVENT, t), this.stat = e;\n      }\n\n      function Ee(t) {\n        var e = me();\n        jt(e, new we(e, t));\n      }\n\n      function Te(t) {\n        wt.call(this, ye.Ga, t);\n      }\n\n      function Ie(t, e) {\n        if (\"function\" != typeof t) throw Error(\"Fn must not be null and must be a function\");\n        return k.setTimeout(function () {\n          t();\n        }, e);\n      }\n\n      ye.Fa = \"serverreachability\", B(ve, wt), ye.STAT_EVENT = \"statevent\", B(we, wt), ye.Ga = \"timingevent\", B(Te, wt);\n      var _e = {\n        NO_ERROR: 0,\n        $a: 1,\n        nb: 2,\n        mb: 3,\n        hb: 4,\n        lb: 5,\n        ob: 6,\n        Da: 7,\n        TIMEOUT: 8,\n        rb: 9\n      },\n          Se = {\n        fb: \"complete\",\n        Bb: \"success\",\n        Ea: \"error\",\n        Da: \"abort\",\n        tb: \"ready\",\n        ub: \"readystatechange\",\n        TIMEOUT: \"timeout\",\n        pb: \"incrementaldata\",\n        sb: \"progress\",\n        ib: \"downloadprogress\",\n        Jb: \"uploadprogress\"\n      };\n\n      function Ae() {}\n\n      function Ne(t) {\n        var e;\n        return e = !(e = t.a) ? t.a = {} : e;\n      }\n\n      function De() {}\n\n      Ae.prototype.a = null;\n      D = {\n        OPEN: \"a\",\n        eb: \"b\",\n        Ea: \"c\",\n        qb: \"d\"\n      };\n\n      function Ce() {\n        wt.call(this, \"d\");\n      }\n\n      function ke() {\n        wt.call(this, \"c\");\n      }\n\n      function Re() {}\n\n      function xe(t, e, n, r) {\n        this.g = t, this.c = e, this.f = n, this.S = r || 1, this.J = new ce(this), this.P = Le, t = ut ? 125 : void 0, this.R = new te(t), this.B = null, this.b = !1, this.j = this.l = this.i = this.H = this.u = this.T = this.o = null, this.s = [], this.a = null, this.D = 0, this.h = this.m = null, this.N = -1, this.A = !1, this.O = 0, this.F = null, this.V = this.C = this.U = this.I = !1;\n      }\n\n      B(Ce, wt), B(ke, wt), B(Re, Ae);\n      var Oe = new Re(),\n          Le = 45e3,\n          Pe = {},\n          Me = {};\n\n      function Fe(t, e, n) {\n        t.H = 1, t.i = on($e(e)), t.j = n, t.I = !0, Ve(t, null);\n      }\n\n      function Ve(t, e) {\n        t.u = q(), qe(t), t.l = $e(t.i);\n        var s,\n            a,\n            u,\n            c,\n            h,\n            l,\n            n = t.l,\n            r = t.S;\n        Array.isArray(r) || (r = [String(r)]), vn(n.b, \"t\", r), t.D = 0, t.a = lr(t.g, t.g.C ? e : null), 0 < t.O && (t.F = new se(V(t.Ca, t, t.a), t.O)), le(t.J, t.a, \"readystatechange\", t.Xa), e = t.B ? tt(t.B) : {}, t.j ? (t.m || (t.m = \"POST\"), e[\"Content-Type\"] = \"application/x-www-form-urlencoded\", t.a.ba(t.l, t.m, t.j, e)) : (t.m = \"GET\", t.a.ba(t.l, t.m, null, e)), be(1), s = t.c, a = t.m, u = t.l, c = t.f, h = t.S, l = t.j, s.info(function () {\n          if (s.a) {\n            if (l) for (var t = \"\", e = l.split(\"&\"), n = 0; n < e.length; n++) {\n              var r,\n                  i,\n                  o = e[n].split(\"=\");\n              1 < o.length && (r = o[0], o = o[1], t = 2 <= (i = r.split(\"_\")).length && \"type\" == i[1] ? t + (r + \"=\") + o + \"&\" : t + (r + \"=redacted&\"));\n            } else t = null;\n          } else t = l;\n          return \"XMLHTTP REQ (\" + c + \") [attempt \" + h + \"]: \" + a + \"\\n\" + u + \"\\n\" + t;\n        });\n      }\n\n      function Ue(t, e, n) {\n        for (var r, i, o, s = !0; !t.A && t.D < n.length;) {\n          var a = (a = n, o = i = void 0, i = (r = t).D, -1 == (o = a.indexOf(\"\\n\", i)) ? Me : (i = Number(a.substring(i, o)), isNaN(i) ? Pe : (o += 1) + i > a.length ? Me : (a = a.substr(o, i), r.D = o + i, a)));\n\n          if (a == Me) {\n            4 == e && (t.h = 4, Ee(14), s = !1), pe(t.c, t.f, null, \"[Incomplete Response]\");\n            break;\n          }\n\n          if (a == Pe) {\n            t.h = 4, Ee(15), pe(t.c, t.f, n, \"[Invalid Chunk]\"), s = !1;\n            break;\n          }\n\n          pe(t.c, t.f, a, null), Qe(t, a);\n        }\n\n        4 == e && 0 == n.length && (t.h = 1, Ee(16), s = !1), t.b = t.b && s, s ? 0 < n.length && !t.V && (t.V = !0, (e = t.g).a == t && e.U && !e.F && (e.c.info(\"Great, no buffering proxy detected. Bytes received: \" + n.length), rr(e), e.F = !0, Ee(11))) : (pe(t.c, t.f, n, \"[Invalid Chunked Response]\"), Ge(t), Ke(t));\n      }\n\n      function qe(t) {\n        t.T = q() + t.P, Be(t, t.P);\n      }\n\n      function Be(t, e) {\n        if (null != t.o) throw Error(\"WatchDog timer not null\");\n        t.o = Ie(V(t.Va, t), e);\n      }\n\n      function je(t) {\n        t.o && (k.clearTimeout(t.o), t.o = null);\n      }\n\n      function Ke(t) {\n        0 == t.g.v || t.A || sr(t.g, t);\n      }\n\n      function Ge(t) {\n        je(t);\n        var e = t.F;\n        e && \"function\" == typeof e.ja && e.ja(), t.F = null, ee(t.R), fe(t.J), t.a && (e = t.a, t.a = null, e.abort(), e.ja());\n      }\n\n      function Qe(t, e) {\n        try {\n          var n,\n              r,\n              i,\n              o,\n              s,\n              a = t.g;\n          if (0 != a.v && (a.a == t || Sn(a.b, t))) if (a.I = t.N, !t.C && Sn(a.b, t) && 3 == a.v) {\n            try {\n              var u = a.ka.a.parse(e);\n            } catch (t) {\n              u = null;\n            }\n\n            if (Array.isArray(u) && 3 == u.length) {\n              var c = u;\n\n              if (0 == c[0]) {\n                t: if (!a.j) {\n                  if (a.a) {\n                    if (!(a.a.u + 3e3 < t.u)) break t;\n                    or(a), Wn(a);\n                  }\n\n                  nr(a), Ee(18);\n                }\n              } else a.oa = c[1], 0 < a.oa - a.P && c[2] < 37500 && a.H && 0 == a.o && !a.m && (a.m = Ie(V(a.Sa, a), 6e3));\n\n              if (_n(a.b) <= 1 && a.ea) {\n                try {\n                  a.ea();\n                } catch (t) {}\n\n                a.ea = void 0;\n              }\n            } else ur(a, 11);\n          } else if (!t.C && a.a != t || or(a), !H(e)) for (e = u = a.ka.a.parse(e), u = 0; u < e.length; u++) {\n            c = e[u], a.P = c[0], c = c[1], 2 == a.v ? \"c\" == c[0] ? (a.J = c[1], a.ga = c[2], null != (r = c[3]) && (a.ha = r, a.c.info(\"VER=\" + a.ha)), null != (o = c[4]) && (a.pa = o, a.c.info(\"SVER=\" + a.pa)), null != (r = c[5]) && \"number\" == typeof r && 0 < r && (n = 1.5 * r, a.D = n, a.c.info(\"backChannelRequestTimeoutMs_=\" + n)), n = a, (o = t.a) && (!(r = o.a ? o.a.getResponseHeader(\"X-Client-Wire-Protocol\") : null) || !(i = n.b).a && (X(r, \"spdy\") || X(r, \"quic\") || X(r, \"h2\")) && (i.f = i.g, i.a = new Set(), i.b && (An(i, i.b), i.b = null)), !n.A || (s = o.a ? o.a.getResponseHeader(\"X-HTTP-Session-Id\") : null) && (n.na = s, rn(n.B, n.A, s))), a.v = 3, a.f && a.f.ta(), a.U && (a.N = q() - t.u, a.c.info(\"Handshake RTT: \" + a.N + \"ms\")), i = t, (n = a).la = hr(n, n.C ? n.ga : null, n.fa), i.C ? (Nn(n.b, i), o = i, (s = n.D) && o.setTimeout(s), o.o && (je(o), qe(o)), n.a = i) : er(n), 0 < a.g.length && Jn(a)) : \"stop\" != c[0] && \"close\" != c[0] || ur(a, 7) : 3 == a.v && (\"stop\" == c[0] || \"close\" == c[0] ? \"stop\" == c[0] ? ur(a, 7) : Hn(a) : \"noop\" != c[0] && a.f && a.f.sa(c), a.o = 0);\n          }\n          be(4);\n        } catch (t) {}\n      }\n\n      function ze(t, e) {\n        if (t.forEach && \"function\" == typeof t.forEach) t.forEach(e, void 0);else if (x(t) || \"string\" == typeof t) G(t, e, void 0);else {\n          if (t.L && \"function\" == typeof t.L) var n = t.L();else if (t.K && \"function\" == typeof t.K) n = void 0;else if (x(t) || \"string\" == typeof t) for (var n = [], r = t.length, i = 0; i < r; i++) {\n            n.push(i);\n          } else for (i in n = [], r = 0, t) {\n            n[r++] = i;\n          }\n\n          for (var i = (r = function (t) {\n            if (t.K && \"function\" == typeof t.K) return t.K();\n            if (\"string\" == typeof t) return t.split(\"\");\n\n            if (x(t)) {\n              for (var e = [], n = t.length, r = 0; r < n; r++) {\n                e.push(t[r]);\n              }\n\n              return e;\n            }\n\n            for (r in e = [], n = 0, t) {\n              e[n++] = t[r];\n            }\n\n            return e;\n          }(t)).length, o = 0; o < i; o++) {\n            e.call(void 0, r[o], n && n[o], t);\n          }\n        }\n      }\n\n      function He(t, e) {\n        this.b = {}, this.a = [], this.c = 0;\n        var n = arguments.length;\n\n        if (1 < n) {\n          if (n % 2) throw Error(\"Uneven number of arguments\");\n\n          for (var r = 0; r < n; r += 2) {\n            this.set(arguments[r], arguments[r + 1]);\n          }\n        } else if (t) if (t instanceof He) for (n = t.L(), r = 0; r < n.length; r++) {\n          this.set(n[r], t.get(n[r]));\n        } else for (r in t) {\n          this.set(r, t[r]);\n        }\n      }\n\n      function We(t) {\n        if (t.c != t.a.length) {\n          for (var e = 0, n = 0; e < t.a.length;) {\n            var r = t.a[e];\n            Ye(t.b, r) && (t.a[n++] = r), e++;\n          }\n\n          t.a.length = n;\n        }\n\n        if (t.c != t.a.length) {\n          for (var i = {}, n = e = 0; e < t.a.length;) {\n            Ye(i, r = t.a[e]) || (i[t.a[n++] = r] = 1), e++;\n          }\n\n          t.a.length = n;\n        }\n      }\n\n      function Ye(t, e) {\n        return Object.prototype.hasOwnProperty.call(t, e);\n      }\n\n      (N = xe.prototype).setTimeout = function (t) {\n        this.P = t;\n      }, N.Xa = function (t) {\n        t = t.target;\n        var e = this.F;\n        e && 3 == Kn(t) ? e.f() : this.Ca(t);\n      }, N.Ca = function (t) {\n        try {\n          if (t == this.a) t: {\n            var e = Kn(this.a),\n                n = this.a.ua(),\n                r = this.a.W();\n\n            if (!(e < 3 || 3 == e && !ut && !this.a.$())) {\n              this.A || 4 != e || 7 == n || be(8 == n || r <= 0 ? 3 : 2), je(this);\n              var i = this.a.W();\n              this.N = i;\n              var o = this.a.$();\n\n              if (this.b = 200 == i, r = this.c, u = this.m, c = this.l, h = this.f, l = this.S, f = e, d = i, r.info(function () {\n                return \"XMLHTTP RESP (\" + h + \") [ attempt \" + l + \"]: \" + u + \"\\n\" + c + \"\\n\" + f + \" \" + d;\n              }), this.b) {\n                if (this.U && !this.C) {\n                  e: {\n                    if (this.a) {\n                      var s = this.a;\n\n                      if ((s = s.a ? s.a.getResponseHeader(\"X-HTTP-Initial-Response\") : null) && !H(s)) {\n                        var a = s;\n                        break e;\n                      }\n                    }\n\n                    a = null;\n                  }\n\n                  if (!a) {\n                    this.b = !1, this.h = 3, Ee(12), Ge(this), Ke(this);\n                    break t;\n                  }\n\n                  pe(this.c, this.f, a, \"Initial handshake response via X-HTTP-Initial-Response\"), this.C = !0, Qe(this, a);\n                }\n\n                this.I ? (Ue(this, e, o), ut && this.b && 3 == e && (le(this.J, this.R, \"tick\", this.Wa), this.R.start())) : (pe(this.c, this.f, o, null), Qe(this, o)), 4 == e && Ge(this), this.b && !this.A && (4 == e ? sr(this.g, this) : (this.b = !1, qe(this)));\n              } else 400 == i && 0 < o.indexOf(\"Unknown SID\") ? (this.h = 3, Ee(12)) : (this.h = 0, Ee(13)), Ge(this), Ke(this);\n            }\n          }\n        } catch (t) {}\n\n        var u, c, h, l, f, d;\n      }, N.Wa = function () {\n        var t, e;\n        this.a && (t = Kn(this.a), e = this.a.$(), this.D < e.length && (je(this), Ue(this, t, e), this.b && 4 != t && qe(this)));\n      }, N.cancel = function () {\n        this.A = !0, Ge(this);\n      }, N.Va = function () {\n        this.o = null;\n        var t,\n            e,\n            n = q();\n        0 <= n - this.T ? (t = this.c, e = this.l, t.info(function () {\n          return \"TIMEOUT: \" + e;\n        }), 2 != this.H && (be(3), Ee(17)), Ge(this), this.h = 2, Ke(this)) : Be(this, this.T - n);\n      }, (N = He.prototype).K = function () {\n        We(this);\n\n        for (var t = [], e = 0; e < this.a.length; e++) {\n          t.push(this.b[this.a[e]]);\n        }\n\n        return t;\n      }, N.L = function () {\n        return We(this), this.a.concat();\n      }, N.get = function (t, e) {\n        return Ye(this.b, t) ? this.b[t] : e;\n      }, N.set = function (t, e) {\n        Ye(this.b, t) || (this.c++, this.a.push(t)), this.b[t] = e;\n      }, N.forEach = function (t, e) {\n        for (var n = this.L(), r = 0; r < n.length; r++) {\n          var i = n[r],\n              o = this.get(i);\n          t.call(e, o, i, this);\n        }\n      };\n      var Xe = /^(?:([^:/?#.]+):)?(?:\\/\\/(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$/;\n\n      function Je(t, e) {\n        var n;\n        this.c = this.j = this.f = \"\", this.h = null, this.i = this.g = \"\", this.a = !1, t instanceof Je ? (this.a = void 0 !== e ? e : t.a, Ze(this, t.f), this.j = t.j, tn(this, t.c), en(this, t.h), this.g = t.g, e = t.b, (n = new pn()).c = e.c, e.a && (n.a = new He(e.a), n.b = e.b), nn(this, n), this.i = t.i) : t && (n = String(t).match(Xe)) ? (this.a = !!e, Ze(this, n[1] || \"\", !0), this.j = sn(n[2] || \"\"), tn(this, n[3] || \"\", !0), en(this, n[4]), this.g = sn(n[5] || \"\", !0), nn(this, n[6] || \"\", !0), this.i = sn(n[7] || \"\")) : (this.a = !!e, this.b = new pn(null, this.a));\n      }\n\n      function $e(t) {\n        return new Je(t);\n      }\n\n      function Ze(t, e, n) {\n        t.f = n ? sn(e, !0) : e, t.f && (t.f = t.f.replace(/:$/, \"\"));\n      }\n\n      function tn(t, e, n) {\n        t.c = n ? sn(e, !0) : e;\n      }\n\n      function en(t, e) {\n        if (e) {\n          if (e = Number(e), isNaN(e) || e < 0) throw Error(\"Bad port number \" + e);\n          t.h = e;\n        } else t.h = null;\n      }\n\n      function nn(t, e, n) {\n        var r, i;\n        e instanceof pn ? (t.b = e, r = t.b, (i = t.a) && !r.f && (yn(r), r.c = null, r.a.forEach(function (t, e) {\n          var n = e.toLowerCase();\n          e != n && (gn(this, e), vn(this, n, t));\n        }, r)), r.f = i) : (n || (e = an(e, fn)), t.b = new pn(e, t.a));\n      }\n\n      function rn(t, e, n) {\n        t.b.set(e, n);\n      }\n\n      function on(t) {\n        return rn(t, \"zx\", Math.floor(2147483648 * Math.random()).toString(36) + Math.abs(Math.floor(2147483648 * Math.random()) ^ q()).toString(36)), t;\n      }\n\n      function sn(t, e) {\n        return t ? e ? decodeURI(t.replace(/%25/g, \"%2525\")) : decodeURIComponent(t) : \"\";\n      }\n\n      function an(t, e, n) {\n        return \"string\" == typeof t ? (t = encodeURI(t).replace(e, un), t = n ? t.replace(/%25([0-9a-fA-F]{2})/g, \"%$1\") : t) : null;\n      }\n\n      function un(t) {\n        return \"%\" + ((t = t.charCodeAt(0)) >> 4 & 15).toString(16) + (15 & t).toString(16);\n      }\n\n      Je.prototype.toString = function () {\n        var t = [],\n            e = this.f;\n        e && t.push(an(e, cn, !0), \":\");\n        var n = this.c;\n        return !n && \"file\" != e || (t.push(\"//\"), (e = this.j) && t.push(an(e, cn, !0), \"@\"), t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g, \"%$1\")), null != (n = this.h) && t.push(\":\", String(n))), (n = this.g) && (this.c && \"/\" != n.charAt(0) && t.push(\"/\"), t.push(an(n, \"/\" == n.charAt(0) ? ln : hn, !0))), (n = this.b.toString()) && t.push(\"?\", n), (n = this.i) && t.push(\"#\", an(n, dn)), t.join(\"\");\n      };\n\n      var cn = /[#\\/\\?@]/g,\n          hn = /[#\\?:]/g,\n          ln = /[#\\?]/g,\n          fn = /[#\\?@]/g,\n          dn = /#/g;\n\n      function pn(t, e) {\n        this.b = this.a = null, this.c = t || null, this.f = !!e;\n      }\n\n      function yn(n) {\n        n.a || (n.a = new He(), n.b = 0, n.c && function (t, e) {\n          if (t) {\n            t = t.split(\"&\");\n\n            for (var n = 0; n < t.length; n++) {\n              var r,\n                  i = t[n].indexOf(\"=\"),\n                  o = null;\n              0 <= i ? (r = t[n].substring(0, i), o = t[n].substring(i + 1)) : r = t[n], e(r, o ? decodeURIComponent(o.replace(/\\+/g, \" \")) : \"\");\n            }\n          }\n        }(n.c, function (t, e) {\n          n.add(decodeURIComponent(t.replace(/\\+/g, \" \")), e);\n        }));\n      }\n\n      function gn(t, e) {\n        yn(t), e = bn(t, e), Ye(t.a.b, e) && (t.c = null, t.b -= t.a.get(e).length, Ye((t = t.a).b, e) && (delete t.b[e], t.c--, t.a.length > 2 * t.c && We(t)));\n      }\n\n      function mn(t, e) {\n        return yn(t), e = bn(t, e), Ye(t.a.b, e);\n      }\n\n      function vn(t, e, n) {\n        gn(t, e), 0 < n.length && (t.c = null, t.a.set(bn(t, e), z(n)), t.b += n.length);\n      }\n\n      function bn(t, e) {\n        return e = String(e), e = t.f ? e.toLowerCase() : e;\n      }\n\n      (N = pn.prototype).add = function (t, e) {\n        yn(this), this.c = null, t = bn(this, t);\n        var n = this.a.get(t);\n        return n || this.a.set(t, n = []), n.push(e), this.b += 1, this;\n      }, N.forEach = function (n, r) {\n        yn(this), this.a.forEach(function (t, e) {\n          G(t, function (t) {\n            n.call(r, t, e, this);\n          }, this);\n        }, this);\n      }, N.L = function () {\n        yn(this);\n\n        for (var t = this.a.K(), e = this.a.L(), n = [], r = 0; r < e.length; r++) {\n          for (var i = t[r], o = 0; o < i.length; o++) {\n            n.push(e[r]);\n          }\n        }\n\n        return n;\n      }, N.K = function (t) {\n        yn(this);\n        var e = [];\n        if (\"string\" == typeof t) mn(this, t) && (e = Q(e, this.a.get(bn(this, t))));else {\n          t = this.a.K();\n\n          for (var n = 0; n < t.length; n++) {\n            e = Q(e, t[n]);\n          }\n        }\n        return e;\n      }, N.set = function (t, e) {\n        return yn(this), this.c = null, mn(this, t = bn(this, t)) && (this.b -= this.a.get(t).length), this.a.set(t, [e]), this.b += 1, this;\n      }, N.get = function (t, e) {\n        return t && 0 < (t = this.K(t)).length ? String(t[0]) : e;\n      }, N.toString = function () {\n        if (this.c) return this.c;\n        if (!this.a) return \"\";\n\n        for (var t = [], e = this.a.L(), n = 0; n < e.length; n++) {\n          for (var r = e[n], i = encodeURIComponent(String(r)), r = this.K(r), o = 0; o < r.length; o++) {\n            var s = i;\n            \"\" !== r[o] && (s += \"=\" + encodeURIComponent(String(r[o]))), t.push(s);\n          }\n        }\n\n        return this.c = t.join(\"&\");\n      };\n\n      var wn = function wn(t, e) {\n        this.b = t, this.a = e;\n      };\n\n      function En(t) {\n        this.g = t || Tn, t = k.PerformanceNavigationTiming ? 0 < (t = k.performance.getEntriesByType(\"navigation\")).length && (\"hq\" == t[0].nextHopProtocol || \"h2\" == t[0].nextHopProtocol) : !!(k.ia && k.ia.ya && k.ia.ya() && k.ia.ya().Lb), this.f = t ? this.g : 1, this.a = null, 1 < this.f && (this.a = new Set()), this.b = null, this.c = [];\n      }\n\n      var Tn = 10;\n\n      function In(t) {\n        return t.b || t.a && t.a.size >= t.f;\n      }\n\n      function _n(t) {\n        return t.b ? 1 : t.a ? t.a.size : 0;\n      }\n\n      function Sn(t, e) {\n        return t.b ? t.b == e : t.a && t.a.has(e);\n      }\n\n      function An(t, e) {\n        t.a ? t.a.add(e) : t.b = e;\n      }\n\n      function Nn(t, e) {\n        t.b && t.b == e ? t.b = null : t.a && t.a.has(e) && t.a.delete(e);\n      }\n\n      function Dn(t) {\n        var e, n;\n        if (null != t.b) return t.c.concat(t.b.s);\n        if (null == t.a || 0 === t.a.size) return z(t.c);\n        var r = t.c;\n\n        try {\n          for (var i = A(t.a.values()), o = i.next(); !o.done; o = i.next()) {\n            var s = o.value,\n                r = r.concat(s.s);\n          }\n        } catch (t) {\n          e = {\n            error: t\n          };\n        } finally {\n          try {\n            o && !o.done && (n = i.return) && n.call(i);\n          } finally {\n            if (e) throw e.error;\n          }\n        }\n\n        return r;\n      }\n\n      function Cn() {}\n\n      function kn() {\n        this.a = new Cn();\n      }\n\n      function Rn(t, e, n, r, i) {\n        try {\n          e.onload = null, e.onerror = null, e.onabort = null, e.ontimeout = null, i(r);\n        } catch (t) {}\n      }\n\n      En.prototype.cancel = function () {\n        var e, t;\n        if (this.c = Dn(this), this.b) this.b.cancel(), this.b = null;else if (this.a && 0 !== this.a.size) {\n          try {\n            for (var n = A(this.a.values()), r = n.next(); !r.done; r = n.next()) {\n              r.value.cancel();\n            }\n          } catch (t) {\n            e = {\n              error: t\n            };\n          } finally {\n            try {\n              r && !r.done && (t = n.return) && t.call(n);\n            } finally {\n              if (e) throw e.error;\n            }\n          }\n\n          this.a.clear();\n        }\n      }, Cn.prototype.stringify = function (t) {\n        return k.JSON.stringify(t, void 0);\n      }, Cn.prototype.parse = function (t) {\n        return k.JSON.parse(t, void 0);\n      };\n      var xn = k.JSON.parse;\n\n      function On(t) {\n        Bt.call(this), this.headers = new He(), this.H = t || null, this.b = !1, this.s = this.a = null, this.B = \"\", this.h = 0, this.f = \"\", this.g = this.A = this.l = this.u = !1, this.o = 0, this.m = null, this.I = Ln, this.D = this.F = !1;\n      }\n\n      B(On, Bt);\n      var Ln = \"\",\n          Pn = /^https?$/i,\n          Mn = [\"POST\", \"PUT\"];\n\n      function Fn(t) {\n        return \"content-type\" == t.toLowerCase();\n      }\n\n      function Vn(t, e) {\n        t.b = !1, t.a && (t.g = !0, t.a.abort(), t.g = !1), t.f = e, t.h = 5, Un(t), Bn(t);\n      }\n\n      function Un(t) {\n        t.u || (t.u = !0, jt(t, \"complete\"), jt(t, \"error\"));\n      }\n\n      function qn(t) {\n        if (t.b && void 0 !== C && (!t.s[1] || 4 != Kn(t) || 2 != t.W())) if (t.l && 4 == Kn(t)) ne(t.za, 0, t);else if (jt(t, \"readystatechange\"), 4 == Kn(t)) {\n          t.b = !1;\n\n          try {\n            var e,\n                n,\n                r,\n                i,\n                o = t.W();\n\n            t: switch (o) {\n              case 200:\n              case 201:\n              case 202:\n              case 204:\n              case 206:\n              case 304:\n              case 1223:\n                var s = !0;\n                break t;\n\n              default:\n                s = !1;\n            }\n\n            (e = s) || ((n = 0 === o) && (!(i = String(t.B).match(Xe)[1] || null) && k.self && k.self.location && (i = (r = k.self.location.protocol).substr(0, r.length - 1)), n = !Pn.test(i ? i.toLowerCase() : \"\")), e = n);\n            if (e) jt(t, \"complete\"), jt(t, \"success\");else {\n              t.h = 6;\n\n              try {\n                var a = 2 < Kn(t) ? t.a.statusText : \"\";\n              } catch (o) {\n                a = \"\";\n              }\n\n              t.f = a + \" [\" + t.W() + \"]\", Un(t);\n            }\n          } finally {\n            Bn(t);\n          }\n        }\n      }\n\n      function Bn(t, e) {\n        if (t.a) {\n          jn(t);\n          var n = t.a,\n              r = t.s[0] ? R : null;\n          t.a = null, t.s = null, e || jt(t, \"ready\");\n\n          try {\n            n.onreadystatechange = r;\n          } catch (t) {}\n        }\n      }\n\n      function jn(t) {\n        t.a && t.D && (t.a.ontimeout = null), t.m && (k.clearTimeout(t.m), t.m = null);\n      }\n\n      function Kn(t) {\n        return t.a ? t.a.readyState : 0;\n      }\n\n      function Gn(t, e, n) {\n        t: {\n          for (r in n) {\n            var r = !1;\n            break t;\n          }\n\n          r = !0;\n        }\n\n        var i;\n        r || (i = \"\", Z(n, function (t, e) {\n          i += e, i += \":\", i += t, i += \"\\r\\n\";\n        }), n = i, \"string\" == typeof t ? null != n && encodeURIComponent(String(n)) : rn(t, e, n));\n      }\n\n      function Qn(t, e, n) {\n        return n && n.internalChannelParams && n.internalChannelParams[t] || e;\n      }\n\n      function zn(t) {\n        this.pa = 0, this.g = [], this.c = new de(), this.ga = this.la = this.B = this.fa = this.a = this.na = this.A = this.V = this.i = this.O = this.l = null, this.Oa = this.R = 0, this.La = Qn(\"failFast\", !1, t), this.H = this.m = this.j = this.h = this.f = null, this.S = !0, this.I = this.oa = this.P = -1, this.T = this.o = this.u = 0, this.Ha = Qn(\"baseRetryDelayMs\", 5e3, t), this.Ra = Qn(\"retryDelaySeedMs\", 1e4, t), this.Ma = Qn(\"forwardChannelMaxRetries\", 2, t), this.ma = Qn(\"forwardChannelRequestTimeoutMs\", 2e4, t), this.Na = t && t.g || void 0, this.D = void 0, this.C = t && t.supportsCrossDomainXhr || !1, this.J = \"\", this.b = new En(t && t.concurrentRequestLimit), this.ka = new kn(), this.da = t && t.fastHandshake || !1, this.Ia = t && t.b || !1, t && t.f && (this.c.a = !1), t && t.forceLongPolling && (this.S = !1), this.U = !this.da && this.S && t && t.detectBufferingProxy || !1, this.ea = void 0, this.N = 0, this.F = !1, this.s = null, (this.Ka = t && t.c || !1) && this.c.info(\"Opt-in to enable Chrome Origin Trials.\");\n      }\n\n      function Hn(t) {\n        var e, n;\n        Yn(t), 3 == t.v && (e = t.R++, rn(n = $e(t.B), \"SID\", t.J), rn(n, \"RID\", e), rn(n, \"TYPE\", \"terminate\"), Zn(t, n), (e = new xe(t, t.c, e, void 0)).H = 2, e.i = on($e(n)), n = !1, !(n = k.navigator && k.navigator.sendBeacon ? k.navigator.sendBeacon(e.i.toString(), \"\") : n) && k.Image && (new Image().src = e.i, n = !0), n || (e.a = lr(e.g, null), e.a.ba(e.i)), e.u = q(), qe(e)), cr(t);\n      }\n\n      function Wn(t) {\n        t.a && (rr(t), t.a.cancel(), t.a = null);\n      }\n\n      function Yn(t) {\n        Wn(t), t.j && (k.clearTimeout(t.j), t.j = null), or(t), t.b.cancel(), t.h && (\"number\" == typeof t.h && k.clearTimeout(t.h), t.h = null);\n      }\n\n      function Xn(t, e) {\n        t.g.push(new wn(t.Oa++, e)), 3 == t.v && Jn(t);\n      }\n\n      function Jn(t) {\n        In(t.b) || t.h || (t.h = !0, Xt(t.Ba, t), t.u = 0);\n      }\n\n      function $n(t, e) {\n        var n = e ? e.f : t.R++,\n            r = $e(t.B);\n        rn(r, \"SID\", t.J), rn(r, \"RID\", n), rn(r, \"AID\", t.P), Zn(t, r), t.i && t.l && Gn(r, t.i, t.l), n = new xe(t, t.c, n, t.u + 1), null === t.i && (n.B = t.l), e && (t.g = e.s.concat(t.g)), e = tr(t, n, 1e3), n.setTimeout(Math.round(.5 * t.ma) + Math.round(.5 * t.ma * Math.random())), An(t.b, n), Fe(n, r, e);\n      }\n\n      function Zn(t, n) {\n        t.f && ze({}, function (t, e) {\n          rn(n, e, t);\n        });\n      }\n\n      function tr(t, e, n) {\n        n = Math.min(t.g.length, n);\n        var r = t.f ? V(t.f.Ja, t.f, t) : null;\n\n        t: for (var i = t.g, o = -1;;) {\n          var s = [\"count=\" + n];\n          -1 == o ? 0 < n ? (o = i[0].b, s.push(\"ofs=\" + o)) : o = 0 : s.push(\"ofs=\" + o);\n\n          for (var a = !0, u = 0; u < n; u++) {\n            var c = i[u].b,\n                h = i[u].a;\n            if ((c -= o) < 0) o = Math.max(0, i[u].b - 100), a = !1;else try {\n              !function (t, r, e) {\n                var i = e || \"\";\n\n                try {\n                  ze(t, function (t, e) {\n                    var n = t;\n                    O(t) && (n = Gt(t)), r.push(i + e + \"=\" + encodeURIComponent(n));\n                  });\n                } catch (t) {\n                  throw r.push(i + \"type=\" + encodeURIComponent(\"_badmap\")), t;\n                }\n              }(h, s, \"req\" + c + \"_\");\n            } catch (t) {\n              r && r(h);\n            }\n          }\n\n          if (a) {\n            r = s.join(\"&\");\n            break t;\n          }\n        }\n\n        return t = t.g.splice(0, n), e.s = t, r;\n      }\n\n      function er(t) {\n        t.a || t.j || (t.T = 1, Xt(t.Aa, t), t.o = 0);\n      }\n\n      function nr(t) {\n        return !(t.a || t.j || 3 <= t.o) && (t.T++, t.j = Ie(V(t.Aa, t), ar(t, t.o)), t.o++, 1);\n      }\n\n      function rr(t) {\n        null != t.s && (k.clearTimeout(t.s), t.s = null);\n      }\n\n      function ir(t) {\n        t.a = new xe(t, t.c, \"rpc\", t.T), null === t.i && (t.a.B = t.l), t.a.O = 0;\n        var e = $e(t.la);\n        rn(e, \"RID\", \"rpc\"), rn(e, \"SID\", t.J), rn(e, \"CI\", t.H ? \"0\" : \"1\"), rn(e, \"AID\", t.P), Zn(t, e), rn(e, \"TYPE\", \"xmlhttp\"), t.i && t.l && Gn(e, t.i, t.l), t.D && t.a.setTimeout(t.D);\n        var n = t.a;\n        t = t.ga, n.H = 1, n.i = on($e(e)), n.j = null, n.I = !0, Ve(n, t);\n      }\n\n      function or(t) {\n        null != t.m && (k.clearTimeout(t.m), t.m = null);\n      }\n\n      function sr(t, e) {\n        var n,\n            r,\n            i,\n            o = null;\n\n        if (t.a == e) {\n          or(t), rr(t), t.a = null;\n          var s = 2;\n        } else {\n          if (!Sn(t.b, e)) return;\n          o = e.s, Nn(t.b, e), s = 1;\n        }\n\n        if (t.I = e.N, 0 != t.v) if (e.b) 1 == s ? (o = e.j ? e.j.length : 0, e = q() - e.u, n = t.u, jt(s = me(), new Te(s)), Jn(t)) : er(t);else if (3 == (n = e.h) || 0 == n && 0 < t.I || (1 != s || (i = e, _n((r = t).b) >= r.b.f - (r.h ? 1 : 0) || (r.h ? (r.g = i.s.concat(r.g), 0) : 1 == r.v || 2 == r.v || r.u >= (r.La ? 0 : r.Ma) || (r.h = Ie(V(r.Ba, r, i), ar(r, r.u)), r.u++, 0)))) && (2 != s || !nr(t))) switch (o && 0 < o.length && (e = t.b, e.c = e.c.concat(o)), n) {\n          case 1:\n            ur(t, 5);\n            break;\n\n          case 4:\n            ur(t, 10);\n            break;\n\n          case 3:\n            ur(t, 6);\n            break;\n\n          default:\n            ur(t, 2);\n        }\n      }\n\n      function ar(t, e) {\n        var n = t.Ha + Math.floor(Math.random() * t.Ra);\n        return t.f || (n *= 2), n * e;\n      }\n\n      function ur(t, e) {\n        var n, r, i, o;\n        t.c.info(\"Error code \" + e), 2 == e ? (r = null, t.f && (r = null), o = V(t.Ya, t), r || (r = new Je(\"//www.google.com/images/cleardot.gif\"), k.location && \"http\" == k.location.protocol || Ze(r, \"https\"), on(r)), n = r.toString(), r = o, o = new de(), k.Image ? ((i = new Image()).onload = U(Rn, o, i, \"TestLoadImage: loaded\", !0, r), i.onerror = U(Rn, o, i, \"TestLoadImage: error\", !1, r), i.onabort = U(Rn, o, i, \"TestLoadImage: abort\", !1, r), i.ontimeout = U(Rn, o, i, \"TestLoadImage: timeout\", !1, r), k.setTimeout(function () {\n          i.ontimeout && i.ontimeout();\n        }, 1e4), i.src = n) : r(!1)) : Ee(2), t.v = 0, t.f && t.f.ra(e), cr(t), Yn(t);\n      }\n\n      function cr(t) {\n        t.v = 0, t.I = -1, t.f && (0 == Dn(t.b).length && 0 == t.g.length || (t.b.c.length = 0, z(t.g), t.g.length = 0), t.f.qa());\n      }\n\n      function hr(t, e, n) {\n        var r,\n            i,\n            o,\n            s,\n            a,\n            u = (s = n) instanceof Je ? $e(s) : new Je(s, void 0);\n        return \"\" != u.c ? (e && tn(u, e + \".\" + u.c), en(u, u.h)) : (a = k.location, r = a.protocol, i = e ? e + \".\" + a.hostname : a.hostname, o = +a.port, s = n, a = new Je(null, void 0), r && Ze(a, r), i && tn(a, i), o && en(a, o), s && (a.g = s), u = a), t.V && Z(t.V, function (t, e) {\n          rn(u, e, t);\n        }), e = t.A, n = t.na, e && n && rn(u, e, n), rn(u, \"VER\", t.ha), Zn(t, u), u;\n      }\n\n      function lr(t, e) {\n        if (e && !t.C) throw Error(\"Can't create secondary domain capable XhrIo object.\");\n        return (e = new On(t.Na)).F = t.C, e;\n      }\n\n      function fr() {}\n\n      function dr() {\n        if (st && !(10 <= Number(gt))) throw Error(\"Environmental error: no available transport.\");\n      }\n\n      function pr(t, e) {\n        Bt.call(this), this.a = new zn(e), this.o = t, this.b = e && e.messageUrlParams || null, t = e && e.messageHeaders || null, e && e.clientProtocolHeaderRequired && (t ? t[\"X-Client-Protocol\"] = \"webchannel\" : t = {\n          \"X-Client-Protocol\": \"webchannel\"\n        }), this.a.l = t, t = e && e.initMessageHeaders || null, e && e.messageContentType && (t ? t[\"X-WebChannel-Content-Type\"] = e.messageContentType : t = {\n          \"X-WebChannel-Content-Type\": e.messageContentType\n        }), e && e.a && (t ? t[\"X-WebChannel-Client-Profile\"] = e.a : t = {\n          \"X-WebChannel-Client-Profile\": e.a\n        }), this.a.O = t, (t = e && e.httpHeadersOverwriteParam) && !H(t) && (this.a.i = t), this.m = e && e.supportsCrossDomainXhr || !1, this.l = e && e.sendRawJson || !1, (e = e && e.httpSessionIdParam) && !H(e) && (this.a.A = e, null !== (t = this.b) && e in t && e in (t = this.b) && delete t[e]), this.f = new mr(this);\n      }\n\n      function yr(t) {\n        Ce.call(this);\n        var e = t.__sm__;\n\n        if (e) {\n          t: {\n            for (var n in e) {\n              t = n;\n              break t;\n            }\n\n            t = void 0;\n          }\n\n          (this.c = t) ? (t = this.c, this.data = null !== e && t in e ? e[t] : void 0) : this.data = e;\n        } else this.data = t;\n      }\n\n      function gr() {\n        ke.call(this), this.status = 1;\n      }\n\n      function mr(t) {\n        this.a = t;\n      }\n\n      (N = On.prototype).ba = function (t, e, n, r) {\n        if (this.a) throw Error(\"[goog.net.XhrIo] Object is active with another request=\" + this.B + \"; newUri=\" + t);\n        e = e ? e.toUpperCase() : \"GET\", this.B = t, this.f = \"\", this.h = 0, this.u = !1, this.b = !0, this.a = new XMLHttpRequest(), this.s = this.H ? Ne(this.H) : Ne(Oe), this.a.onreadystatechange = V(this.za, this);\n\n        try {\n          this.A = !0, this.a.open(e, String(t), !0), this.A = !1;\n        } catch (t) {\n          return void Vn(this, t);\n        }\n\n        t = n || \"\";\n        var i,\n            o = new He(this.headers);\n        r && ze(r, function (t, e) {\n          o.set(e, t);\n        }), r = function (t) {\n          t: {\n            for (var e = Fn, n = t.length, r = \"string\" == typeof t ? t.split(\"\") : t, i = 0; i < n; i++) {\n              if (i in r && e.call(void 0, r[i], i, t)) {\n                e = i;\n                break t;\n              }\n            }\n\n            e = -1;\n          }\n\n          return e < 0 ? null : \"string\" == typeof t ? t.charAt(e) : t[e];\n        }(o.L()), n = k.FormData && t instanceof k.FormData, 0 <= K(Mn, e) && !r && !n && o.set(\"Content-Type\", \"application/x-www-form-urlencoded;charset=utf-8\"), o.forEach(function (t, e) {\n          this.a.setRequestHeader(e, t);\n        }, this), this.I && (this.a.responseType = this.I), \"withCredentials\" in this.a && this.a.withCredentials !== this.F && (this.a.withCredentials = this.F);\n\n        try {\n          jn(this), 0 < this.o && ((this.D = (i = this.a, st && yt(9) && \"number\" == typeof i.timeout && void 0 !== i.ontimeout)) ? (this.a.timeout = this.o, this.a.ontimeout = V(this.xa, this)) : this.m = ne(this.xa, this.o, this)), this.l = !0, this.a.send(t), this.l = !1;\n        } catch (t) {\n          Vn(this, t);\n        }\n      }, N.xa = function () {\n        void 0 !== C && this.a && (this.f = \"Timed out after \" + this.o + \"ms, aborting\", this.h = 8, jt(this, \"timeout\"), this.abort(8));\n      }, N.abort = function (t) {\n        this.a && this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1, this.h = t || 7, jt(this, \"complete\"), jt(this, \"abort\"), Bn(this));\n      }, N.G = function () {\n        this.a && (this.b && (this.b = !1, this.g = !0, this.a.abort(), this.g = !1), Bn(this, !0)), On.X.G.call(this);\n      }, N.za = function () {\n        this.j || (this.A || this.l || this.g ? qn(this) : this.Ua());\n      }, N.Ua = function () {\n        qn(this);\n      }, N.W = function () {\n        try {\n          return 2 < Kn(this) ? this.a.status : -1;\n        } catch (t) {\n          return -1;\n        }\n      }, N.$ = function () {\n        try {\n          return this.a ? this.a.responseText : \"\";\n        } catch (t) {\n          return \"\";\n        }\n      }, N.Pa = function (t) {\n        if (this.a) {\n          var e = this.a.responseText;\n          return t && 0 == e.indexOf(t) && (e = e.substring(t.length)), xn(e);\n        }\n      }, N.ua = function () {\n        return this.h;\n      }, N.Qa = function () {\n        return \"string\" == typeof this.f ? this.f : String(this.f);\n      }, (N = zn.prototype).ha = 8, N.v = 1, N.Ba = function (t) {\n        if (this.h) if (this.h = null, 1 == this.v) {\n          if (!t) {\n            this.R = Math.floor(1e5 * Math.random()), t = this.R++;\n            var e,\n                n = new xe(this, this.c, t, void 0),\n                r = this.l;\n            if (this.O && (r ? nt(r = tt(r), this.O) : r = this.O), null === this.i && (n.B = r), this.da) t: {\n              for (var i = e = 0; i < this.g.length; i++) {\n                var o = this.g[i];\n                if (\"__data__\" in o.a && \"string\" == typeof (o = o.a.__data__) ? o = o.length : o = void 0, void 0 === o) break;\n\n                if (4096 < (e += o)) {\n                  e = i;\n                  break t;\n                }\n\n                if (4096 === e || i === this.g.length - 1) {\n                  e = i + 1;\n                  break t;\n                }\n              }\n\n              e = 1e3;\n            } else e = 1e3;\n            e = tr(this, n, e), rn(i = $e(this.B), \"RID\", t), rn(i, \"CVER\", 22), this.A && rn(i, \"X-HTTP-Session-Id\", this.A), Zn(this, i), this.i && r && Gn(i, this.i, r), An(this.b, n), this.Ia && rn(i, \"TYPE\", \"init\"), this.da ? (rn(i, \"$req\", e), rn(i, \"SID\", \"null\"), n.U = !0, Fe(n, i, null)) : Fe(n, i, e), this.v = 2;\n          }\n        } else 3 == this.v && (t ? $n(this, t) : 0 == this.g.length || In(this.b) || $n(this));\n      }, N.Aa = function () {\n        var t;\n        this.j = null, ir(this), this.U && !(this.F || null == this.a || this.N <= 0) && (t = 2 * this.N, this.c.info(\"BP detection timer enabled: \" + t), this.s = Ie(V(this.Ta, this), t));\n      }, N.Ta = function () {\n        this.s && (this.s = null, this.c.info(\"BP detection timeout reached.\"), this.c.info(\"Buffering proxy detected and switch to long-polling!\"), this.H = !1, this.F = !0, Ee(10), Wn(this), ir(this));\n      }, N.Sa = function () {\n        null != this.m && (this.m = null, Wn(this), nr(this), Ee(19));\n      }, N.Ya = function (t) {\n        t ? (this.c.info(\"Successfully pinged google.com\"), Ee(2)) : (this.c.info(\"Failed to ping google.com\"), Ee(1));\n      }, (N = fr.prototype).ta = function () {}, N.sa = function () {}, N.ra = function () {}, N.qa = function () {}, N.Ja = function () {}, dr.prototype.a = function (t, e) {\n        return new pr(t, e);\n      }, B(pr, Bt), pr.prototype.g = function () {\n        this.a.f = this.f, this.m && (this.a.C = !0);\n        var t = this.a,\n            e = this.o,\n            n = this.b || void 0;\n        Ee(0), t.fa = e, t.V = n || {}, t.H = t.S, t.B = hr(t, null, t.fa), Jn(t);\n      }, pr.prototype.close = function () {\n        Hn(this.a);\n      }, pr.prototype.h = function (t) {\n        var e;\n        \"string\" == typeof t ? ((e = {}).__data__ = t, Xn(this.a, e)) : this.l ? ((e = {}).__data__ = Gt(t), Xn(this.a, e)) : Xn(this.a, t);\n      }, pr.prototype.G = function () {\n        this.a.f = null, delete this.f, Hn(this.a), delete this.a, pr.X.G.call(this);\n      }, B(yr, Ce), B(gr, ke), B(mr, fr), mr.prototype.ta = function () {\n        jt(this.a, \"a\");\n      }, mr.prototype.sa = function (t) {\n        jt(this.a, new yr(t));\n      }, mr.prototype.ra = function (t) {\n        jt(this.a, new gr());\n      }, mr.prototype.qa = function () {\n        jt(this.a, \"b\");\n      }, dr.prototype.createWebChannel = dr.prototype.a, pr.prototype.send = pr.prototype.h, pr.prototype.open = pr.prototype.g, _e.NO_ERROR = 0, _e.TIMEOUT = 8, _e.HTTP_ERROR = 6, Se.COMPLETE = \"complete\", (De.EventType = D).OPEN = \"a\", D.CLOSE = \"b\", D.ERROR = \"c\", D.MESSAGE = \"d\", Bt.prototype.listen = Bt.prototype.va, On.prototype.listenOnce = On.prototype.wa, On.prototype.getLastError = On.prototype.Qa, On.prototype.getLastErrorCode = On.prototype.ua, On.prototype.getStatus = On.prototype.W, On.prototype.getResponseJson = On.prototype.Pa, On.prototype.getResponseText = On.prototype.$, On.prototype.send = On.prototype.ba;\n      var vr = me,\n          br = _e,\n          wr = Se,\n          Er = ye,\n          Tr = 10,\n          Ir = 11,\n          _r = De,\n          Sr = On,\n          Ar = (Nr.prototype.t = function (t) {\n        return this.previousValue = Math.max(t, this.previousValue), this.previousValue;\n      }, Nr.prototype.next = function () {\n        var t = ++this.previousValue;\n        return this.i && this.i(t), t;\n      }, Nr);\n\n      function Nr(t, e) {\n        var n = this;\n        this.previousValue = t, e && (e.sequenceNumberHandler = function (t) {\n          return n.t(t);\n        }, this.i = function (t) {\n          return e.writeSequenceNumber(t);\n        });\n      }\n\n      Ar.o = -1;\n      var Dr,\n          Cr = {\n        OK: \"ok\",\n        CANCELLED: \"cancelled\",\n        UNKNOWN: \"unknown\",\n        INVALID_ARGUMENT: \"invalid-argument\",\n        DEADLINE_EXCEEDED: \"deadline-exceeded\",\n        NOT_FOUND: \"not-found\",\n        ALREADY_EXISTS: \"already-exists\",\n        PERMISSION_DENIED: \"permission-denied\",\n        UNAUTHENTICATED: \"unauthenticated\",\n        RESOURCE_EXHAUSTED: \"resource-exhausted\",\n        FAILED_PRECONDITION: \"failed-precondition\",\n        ABORTED: \"aborted\",\n        OUT_OF_RANGE: \"out-of-range\",\n        UNIMPLEMENTED: \"unimplemented\",\n        INTERNAL: \"internal\",\n        UNAVAILABLE: \"unavailable\",\n        DATA_LOSS: \"data-loss\"\n      },\n          kr = (n(xr, Dr = Error), xr),\n          Rr = new I(\"@firebase/firestore\");\n\n      function xr(t, e) {\n        var n = this;\n        return (n = Dr.call(this, e) || this).code = t, n.message = e, n.name = \"FirebaseError\", n.toString = function () {\n          return n.name + \": [code=\" + n.code + \"]: \" + n.message;\n        }, n;\n      }\n\n      function Or() {\n        return Rr.logLevel;\n      }\n\n      function Lr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Rr.logLevel <= p.DEBUG && (e = n.map(Fr), Rr.debug.apply(Rr, s([\"Firestore (8.6.0): \" + t], e)));\n      }\n\n      function Pr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Rr.logLevel <= p.ERROR && (e = n.map(Fr), Rr.error.apply(Rr, s([\"Firestore (8.6.0): \" + t], e)));\n      }\n\n      function Mr(t) {\n        for (var e, n = [], r = 1; r < arguments.length; r++) {\n          n[r - 1] = arguments[r];\n        }\n\n        Rr.logLevel <= p.WARN && (e = n.map(Fr), Rr.warn.apply(Rr, s([\"Firestore (8.6.0): \" + t], e)));\n      }\n\n      function Fr(e) {\n        if (\"string\" == typeof e) return e;\n\n        try {\n          return JSON.stringify(e);\n        } catch (t) {\n          return e;\n        }\n      }\n\n      function Vr(t) {\n        t = \"FIRESTORE (8.6.0) INTERNAL ASSERTION FAILED: \" + (t = void 0 === t ? \"Unexpected state\" : t);\n        throw Pr(t), new Error(t);\n      }\n\n      function Ur(t) {\n        t || Vr();\n      }\n\n      var qr = (Br.u = function () {\n        for (var t = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\", e = Math.floor(256 / t.length) * t.length, n = \"\"; n.length < 20;) {\n          for (var r = function (t) {\n            var e = \"undefined\" != typeof self && (self.crypto || self.msCrypto),\n                n = new Uint8Array(t);\n            if (e && \"function\" == typeof e.getRandomValues) e.getRandomValues(n);else for (var r = 0; r < t; r++) {\n              n[r] = Math.floor(256 * Math.random());\n            }\n            return n;\n          }(40), i = 0; i < r.length; ++i) {\n            n.length < 20 && r[i] < e && (n += t.charAt(r[i] % t.length));\n          }\n        }\n\n        return n;\n      }, Br);\n\n      function Br() {}\n\n      function jr(t, e) {\n        return t < e ? -1 : e < t ? 1 : 0;\n      }\n\n      function Kr(t, n, r) {\n        return t.length === n.length && t.every(function (t, e) {\n          return r(t, n[e]);\n        });\n      }\n\n      function Gr(t) {\n        return t + \"\\0\";\n      }\n\n      var Qr = (Wr.now = function () {\n        return Wr.fromMillis(Date.now());\n      }, Wr.fromDate = function (t) {\n        return Wr.fromMillis(t.getTime());\n      }, Wr.fromMillis = function (t) {\n        var e = Math.floor(t / 1e3);\n        return new Wr(e, Math.floor(1e6 * (t - 1e3 * e)));\n      }, Wr.prototype.toDate = function () {\n        return new Date(this.toMillis());\n      }, Wr.prototype.toMillis = function () {\n        return 1e3 * this.seconds + this.nanoseconds / 1e6;\n      }, Wr.prototype._compareTo = function (t) {\n        return this.seconds === t.seconds ? jr(this.nanoseconds, t.nanoseconds) : jr(this.seconds, t.seconds);\n      }, Wr.prototype.isEqual = function (t) {\n        return t.seconds === this.seconds && t.nanoseconds === this.nanoseconds;\n      }, Wr.prototype.toString = function () {\n        return \"Timestamp(seconds=\" + this.seconds + \", nanoseconds=\" + this.nanoseconds + \")\";\n      }, Wr.prototype.toJSON = function () {\n        return {\n          seconds: this.seconds,\n          nanoseconds: this.nanoseconds\n        };\n      }, Wr.prototype.valueOf = function () {\n        var t = this.seconds - -62135596800;\n        return String(t).padStart(12, \"0\") + \".\" + String(this.nanoseconds).padStart(9, \"0\");\n      }, Wr),\n          zr = (Hr.fromTimestamp = function (t) {\n        return new Hr(t);\n      }, Hr.min = function () {\n        return new Hr(new Qr(0, 0));\n      }, Hr.prototype.compareTo = function (t) {\n        return this.timestamp._compareTo(t.timestamp);\n      }, Hr.prototype.isEqual = function (t) {\n        return this.timestamp.isEqual(t.timestamp);\n      }, Hr.prototype.toMicroseconds = function () {\n        return 1e6 * this.timestamp.seconds + this.timestamp.nanoseconds / 1e3;\n      }, Hr.prototype.toString = function () {\n        return \"SnapshotVersion(\" + this.timestamp.toString() + \")\";\n      }, Hr.prototype.toTimestamp = function () {\n        return this.timestamp;\n      }, Hr);\n\n      function Hr(t) {\n        this.timestamp = t;\n      }\n\n      function Wr(t, e) {\n        if (this.seconds = t, (this.nanoseconds = e) < 0) throw new kr(Cr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (1e9 <= e) throw new kr(Cr.INVALID_ARGUMENT, \"Timestamp nanoseconds out of range: \" + e);\n        if (t < -62135596800) throw new kr(Cr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n        if (253402300800 <= t) throw new kr(Cr.INVALID_ARGUMENT, \"Timestamp seconds out of range: \" + t);\n      }\n\n      function Yr(t) {\n        var e,\n            n = 0;\n\n        for (e in t) {\n          Object.prototype.hasOwnProperty.call(t, e) && n++;\n        }\n\n        return n;\n      }\n\n      function Xr(t, e) {\n        for (var n in t) {\n          Object.prototype.hasOwnProperty.call(t, n) && e(n, t[n]);\n        }\n      }\n\n      function Jr(t) {\n        for (var e in t) {\n          if (Object.prototype.hasOwnProperty.call(t, e)) return !1;\n        }\n\n        return !0;\n      }\n\n      var $r,\n          Zr,\n          Se = (Object.defineProperty(ci.prototype, \"length\", {\n        get: function get() {\n          return this.len;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ci.prototype.isEqual = function (t) {\n        return 0 === ci.comparator(this, t);\n      }, ci.prototype.child = function (t) {\n        var e = this.segments.slice(this.offset, this.limit());\n        return t instanceof ci ? t.forEach(function (t) {\n          e.push(t);\n        }) : e.push(t), this.construct(e);\n      }, ci.prototype.limit = function () {\n        return this.offset + this.length;\n      }, ci.prototype.popFirst = function (t) {\n        return t = void 0 === t ? 1 : t, this.construct(this.segments, this.offset + t, this.length - t);\n      }, ci.prototype.popLast = function () {\n        return this.construct(this.segments, this.offset, this.length - 1);\n      }, ci.prototype.firstSegment = function () {\n        return this.segments[this.offset];\n      }, ci.prototype.lastSegment = function () {\n        return this.get(this.length - 1);\n      }, ci.prototype.get = function (t) {\n        return this.segments[this.offset + t];\n      }, ci.prototype.isEmpty = function () {\n        return 0 === this.length;\n      }, ci.prototype.isPrefixOf = function (t) {\n        if (t.length < this.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, ci.prototype.isImmediateParentOf = function (t) {\n        if (this.length + 1 !== t.length) return !1;\n\n        for (var e = 0; e < this.length; e++) {\n          if (this.get(e) !== t.get(e)) return !1;\n        }\n\n        return !0;\n      }, ci.prototype.forEach = function (t) {\n        for (var e = this.offset, n = this.limit(); e < n; e++) {\n          t(this.segments[e]);\n        }\n      }, ci.prototype.toArray = function () {\n        return this.segments.slice(this.offset, this.limit());\n      }, ci.comparator = function (t, e) {\n        for (var n = Math.min(t.length, e.length), r = 0; r < n; r++) {\n          var i = t.get(r),\n              o = e.get(r);\n          if (i < o) return -1;\n          if (o < i) return 1;\n        }\n\n        return t.length < e.length ? -1 : t.length > e.length ? 1 : 0;\n      }, ci),\n          ti = (n(ui, Zr = Se), ui.prototype.construct = function (t, e, n) {\n        return new ui(t, e, n);\n      }, ui.prototype.canonicalString = function () {\n        return this.toArray().join(\"/\");\n      }, ui.prototype.toString = function () {\n        return this.canonicalString();\n      }, ui.fromString = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = [], r = 0, i = t; r < i.length; r++) {\n          var o = i[r];\n          if (0 <= o.indexOf(\"//\")) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid segment (\" + o + \"). Paths must not contain // in them.\");\n          n.push.apply(n, o.split(\"/\").filter(function (t) {\n            return 0 < t.length;\n          }));\n        }\n\n        return new ui(n);\n      }, ui.emptyPath = function () {\n        return new ui([]);\n      }, ui),\n          ei = /^[_a-zA-Z][_a-zA-Z0-9]*$/,\n          ni = (n(ai, $r = Se), ai.prototype.construct = function (t, e, n) {\n        return new ai(t, e, n);\n      }, ai.isValidIdentifier = function (t) {\n        return ei.test(t);\n      }, ai.prototype.canonicalString = function () {\n        return this.toArray().map(function (t) {\n          return t = t.replace(/\\\\/g, \"\\\\\\\\\").replace(/`/g, \"\\\\`\"), t = !ai.isValidIdentifier(t) ? \"`\" + t + \"`\" : t;\n        }).join(\".\");\n      }, ai.prototype.toString = function () {\n        return this.canonicalString();\n      }, ai.prototype.isKeyField = function () {\n        return 1 === this.length && \"__name__\" === this.get(0);\n      }, ai.keyField = function () {\n        return new ai([\"__name__\"]);\n      }, ai.fromServerFormat = function (t) {\n        for (var e = [], n = \"\", r = 0, i = function i() {\n          if (0 === n.length) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid field path (\" + t + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\");\n          e.push(n), n = \"\";\n        }, o = !1; r < t.length;) {\n          var s = t[r];\n\n          if (\"\\\\\" === s) {\n            if (r + 1 === t.length) throw new kr(Cr.INVALID_ARGUMENT, \"Path has trailing escape character: \" + t);\n            var a = t[r + 1];\n            if (\"\\\\\" !== a && \".\" !== a && \"`\" !== a) throw new kr(Cr.INVALID_ARGUMENT, \"Path has invalid escape sequence: \" + t);\n            n += a, r += 2;\n          } else \"`\" === s ? o = !o : \".\" !== s || o ? n += s : i(), r++;\n        }\n\n        if (i(), o) throw new kr(Cr.INVALID_ARGUMENT, \"Unterminated ` in path: \" + t);\n        return new ai(e);\n      }, ai.emptyPath = function () {\n        return new ai([]);\n      }, ai),\n          ri = (si.prototype.covers = function (t) {\n        for (var e = 0, n = this.fields; e < n.length; e++) {\n          if (n[e].isPrefixOf(t)) return !0;\n        }\n\n        return !1;\n      }, si.prototype.isEqual = function (t) {\n        return Kr(this.fields, t.fields, function (t, e) {\n          return t.isEqual(e);\n        });\n      }, si),\n          ii = (oi.fromBase64String = function (t) {\n        return new oi(atob(t));\n      }, oi.fromUint8Array = function (t) {\n        return new oi(function (t) {\n          for (var e = \"\", n = 0; n < t.length; ++n) {\n            e += String.fromCharCode(t[n]);\n          }\n\n          return e;\n        }(t));\n      }, oi.prototype.toBase64 = function () {\n        return t = this.binaryString, btoa(t);\n        var t;\n      }, oi.prototype.toUint8Array = function () {\n        return function (t) {\n          for (var e = new Uint8Array(t.length), n = 0; n < t.length; n++) {\n            e[n] = t.charCodeAt(n);\n          }\n\n          return e;\n        }(this.binaryString);\n      }, oi.prototype.approximateByteSize = function () {\n        return 2 * this.binaryString.length;\n      }, oi.prototype.compareTo = function (t) {\n        return jr(this.binaryString, t.binaryString);\n      }, oi.prototype.isEqual = function (t) {\n        return this.binaryString === t.binaryString;\n      }, oi);\n\n      function oi(t) {\n        this.binaryString = t;\n      }\n\n      function si(t) {\n        (this.fields = t).sort(ni.comparator);\n      }\n\n      function ai() {\n        return null !== $r && $r.apply(this, arguments) || this;\n      }\n\n      function ui() {\n        return null !== Zr && Zr.apply(this, arguments) || this;\n      }\n\n      function ci(t, e, n) {\n        void 0 === e ? e = 0 : e > t.length && Vr(), void 0 === n ? n = t.length - e : n > t.length - e && Vr(), this.segments = t, this.offset = e, this.len = n;\n      }\n\n      ii.EMPTY_BYTE_STRING = new ii(\"\");\n      var hi = new RegExp(/^\\d{4}-\\d\\d-\\d\\dT\\d\\d:\\d\\d:\\d\\d(?:\\.(\\d+))?Z$/);\n\n      function li(t) {\n        if (Ur(!!t), \"string\" != typeof t) return {\n          seconds: fi(t.seconds),\n          nanos: fi(t.nanos)\n        };\n        var e = 0,\n            n = hi.exec(t);\n        Ur(!!n), n[1] && (n = ((n = n[1]) + \"000000000\").substr(0, 9), e = Number(n));\n        t = new Date(t);\n        return {\n          seconds: Math.floor(t.getTime() / 1e3),\n          nanos: e\n        };\n      }\n\n      function fi(t) {\n        return \"number\" == typeof t ? t : \"string\" == typeof t ? Number(t) : 0;\n      }\n\n      function di(t) {\n        return \"string\" == typeof t ? ii.fromBase64String(t) : ii.fromUint8Array(t);\n      }\n\n      function pi(t) {\n        return \"server_timestamp\" === (null === (t = ((null === (t = null == t ? void 0 : t.mapValue) || void 0 === t ? void 0 : t.fields) || {}).__type__) || void 0 === t ? void 0 : t.stringValue);\n      }\n\n      function yi(t) {\n        t = li(t.mapValue.fields.__local_write_time__.timestampValue);\n        return new Qr(t.seconds, t.nanos);\n      }\n\n      function gi(t) {\n        return null == t;\n      }\n\n      function mi(t) {\n        return 0 === t && 1 / t == -1 / 0;\n      }\n\n      function vi(t) {\n        return \"number\" == typeof t && Number.isInteger(t) && !mi(t) && t <= Number.MAX_SAFE_INTEGER && t >= Number.MIN_SAFE_INTEGER;\n      }\n\n      var bi = (wi.fromPath = function (t) {\n        return new wi(ti.fromString(t));\n      }, wi.fromName = function (t) {\n        return new wi(ti.fromString(t).popFirst(5));\n      }, wi.prototype.hasCollectionId = function (t) {\n        return 2 <= this.path.length && this.path.get(this.path.length - 2) === t;\n      }, wi.prototype.isEqual = function (t) {\n        return null !== t && 0 === ti.comparator(this.path, t.path);\n      }, wi.prototype.toString = function () {\n        return this.path.toString();\n      }, wi.comparator = function (t, e) {\n        return ti.comparator(t.path, e.path);\n      }, wi.isDocumentKey = function (t) {\n        return t.length % 2 == 0;\n      }, wi.fromSegments = function (t) {\n        return new wi(new ti(t.slice()));\n      }, wi);\n\n      function wi(t) {\n        this.path = t;\n      }\n\n      function Ei(t) {\n        return \"nullValue\" in t ? 0 : \"booleanValue\" in t ? 1 : \"integerValue\" in t || \"doubleValue\" in t ? 2 : \"timestampValue\" in t ? 3 : \"stringValue\" in t ? 5 : \"bytesValue\" in t ? 6 : \"referenceValue\" in t ? 7 : \"geoPointValue\" in t ? 8 : \"arrayValue\" in t ? 9 : \"mapValue\" in t ? pi(t) ? 4 : 10 : Vr();\n      }\n\n      function Ti(r, i) {\n        var t,\n            e,\n            n = Ei(r);\n        if (n !== Ei(i)) return !1;\n\n        switch (n) {\n          case 0:\n            return !0;\n\n          case 1:\n            return r.booleanValue === i.booleanValue;\n\n          case 4:\n            return yi(r).isEqual(yi(i));\n\n          case 3:\n            return function (t) {\n              if (\"string\" == typeof r.timestampValue && \"string\" == typeof t.timestampValue && r.timestampValue.length === t.timestampValue.length) return r.timestampValue === t.timestampValue;\n              var e = li(r.timestampValue),\n                  t = li(t.timestampValue);\n              return e.seconds === t.seconds && e.nanos === t.nanos;\n            }(i);\n\n          case 5:\n            return r.stringValue === i.stringValue;\n\n          case 6:\n            return e = i, di(r.bytesValue).isEqual(di(e.bytesValue));\n\n          case 7:\n            return r.referenceValue === i.referenceValue;\n\n          case 8:\n            return t = i, fi((e = r).geoPointValue.latitude) === fi(t.geoPointValue.latitude) && fi(e.geoPointValue.longitude) === fi(t.geoPointValue.longitude);\n\n          case 2:\n            return function (t, e) {\n              if (\"integerValue\" in t && \"integerValue\" in e) return fi(t.integerValue) === fi(e.integerValue);\n\n              if (\"doubleValue\" in t && \"doubleValue\" in e) {\n                t = fi(t.doubleValue), e = fi(e.doubleValue);\n                return t === e ? mi(t) === mi(e) : isNaN(t) && isNaN(e);\n              }\n\n              return !1;\n            }(r, i);\n\n          case 9:\n            return Kr(r.arrayValue.values || [], i.arrayValue.values || [], Ti);\n\n          case 10:\n            return function () {\n              var t,\n                  e = r.mapValue.fields || {},\n                  n = i.mapValue.fields || {};\n              if (Yr(e) !== Yr(n)) return !1;\n\n              for (t in e) {\n                if (e.hasOwnProperty(t) && (void 0 === n[t] || !Ti(e[t], n[t]))) return !1;\n              }\n\n              return !0;\n            }();\n\n          default:\n            return Vr();\n        }\n      }\n\n      function Ii(t, e) {\n        return void 0 !== (t.values || []).find(function (t) {\n          return Ti(t, e);\n        });\n      }\n\n      function _i(t, e) {\n        var n,\n            r,\n            i,\n            o = Ei(t),\n            s = Ei(e);\n        if (o !== s) return jr(o, s);\n\n        switch (o) {\n          case 0:\n            return 0;\n\n          case 1:\n            return jr(t.booleanValue, e.booleanValue);\n\n          case 2:\n            return r = e, i = fi(t.integerValue || t.doubleValue), r = fi(r.integerValue || r.doubleValue), i < r ? -1 : r < i ? 1 : i === r ? 0 : isNaN(i) ? isNaN(r) ? 0 : -1 : 1;\n\n          case 3:\n            return Si(t.timestampValue, e.timestampValue);\n\n          case 4:\n            return Si(yi(t), yi(e));\n\n          case 5:\n            return jr(t.stringValue, e.stringValue);\n\n          case 6:\n            return function (t, e) {\n              t = di(t), e = di(e);\n              return t.compareTo(e);\n            }(t.bytesValue, e.bytesValue);\n\n          case 7:\n            return function (t, e) {\n              for (var n = t.split(\"/\"), r = e.split(\"/\"), i = 0; i < n.length && i < r.length; i++) {\n                var o = jr(n[i], r[i]);\n                if (0 !== o) return o;\n              }\n\n              return jr(n.length, r.length);\n            }(t.referenceValue, e.referenceValue);\n\n          case 8:\n            return n = t.geoPointValue, i = e.geoPointValue, 0 !== (r = jr(fi(n.latitude), fi(i.latitude))) ? r : jr(fi(n.longitude), fi(i.longitude));\n\n          case 9:\n            return function (t, e) {\n              for (var n = t.values || [], r = e.values || [], i = 0; i < n.length && i < r.length; ++i) {\n                var o = _i(n[i], r[i]);\n\n                if (o) return o;\n              }\n\n              return jr(n.length, r.length);\n            }(t.arrayValue, e.arrayValue);\n\n          case 10:\n            return function (t, e) {\n              var n = t.fields || {},\n                  r = Object.keys(n),\n                  i = e.fields || {},\n                  o = Object.keys(i);\n              r.sort(), o.sort();\n\n              for (var s = 0; s < r.length && s < o.length; ++s) {\n                var a = jr(r[s], o[s]);\n                if (0 !== a) return a;\n                a = _i(n[r[s]], i[o[s]]);\n                if (0 !== a) return a;\n              }\n\n              return jr(r.length, o.length);\n            }(t.mapValue, e.mapValue);\n\n          default:\n            throw Vr();\n        }\n      }\n\n      function Si(t, e) {\n        if (\"string\" == typeof t && \"string\" == typeof e && t.length === e.length) return jr(t, e);\n        var n = li(t),\n            t = li(e),\n            e = jr(n.seconds, t.seconds);\n        return 0 !== e ? e : jr(n.nanos, t.nanos);\n      }\n\n      function Ai(t) {\n        return function s(t) {\n          return \"nullValue\" in t ? \"null\" : \"booleanValue\" in t ? \"\" + t.booleanValue : \"integerValue\" in t ? \"\" + t.integerValue : \"doubleValue\" in t ? \"\" + t.doubleValue : \"timestampValue\" in t ? function (t) {\n            var t = li(t);\n            return \"time(\" + t.seconds + \",\" + t.nanos + \")\";\n          }(t.timestampValue) : \"stringValue\" in t ? t.stringValue : \"bytesValue\" in t ? di(t.bytesValue).toBase64() : \"referenceValue\" in t ? (e = t.referenceValue, bi.fromName(e).toString()) : \"geoPointValue\" in t ? \"geo(\" + (e = t.geoPointValue).latitude + \",\" + e.longitude + \")\" : \"arrayValue\" in t ? function (t) {\n            for (var e = \"[\", n = !0, r = 0, i = t.values || []; r < i.length; r++) {\n              n ? n = !1 : e += \",\", e += s(i[r]);\n            }\n\n            return e + \"]\";\n          }(t.arrayValue) : \"mapValue\" in t ? function (t) {\n            for (var e = \"{\", n = !0, r = 0, i = Object.keys(t.fields || {}).sort(); r < i.length; r++) {\n              var o = i[r];\n              n ? n = !1 : e += \",\", e += o + \":\" + s(t.fields[o]);\n            }\n\n            return e + \"}\";\n          }(t.mapValue) : Vr();\n          var e;\n        }(t);\n      }\n\n      function Ni(t, e) {\n        return {\n          referenceValue: \"projects/\" + t.projectId + \"/databases/\" + t.database + \"/documents/\" + e.path.canonicalString()\n        };\n      }\n\n      function Di(t) {\n        return t && \"integerValue\" in t;\n      }\n\n      function Ci(t) {\n        return !!t && \"arrayValue\" in t;\n      }\n\n      function ki(t) {\n        return t && \"nullValue\" in t;\n      }\n\n      function Ri(t) {\n        return t && \"doubleValue\" in t && isNaN(Number(t.doubleValue));\n      }\n\n      function xi(t) {\n        return t && \"mapValue\" in t;\n      }\n\n      var Oi = (Li.empty = function () {\n        return new Li({\n          mapValue: {}\n        });\n      }, Li.prototype.field = function (t) {\n        return Li.extractNestedValue(this.buildProto(), t);\n      }, Li.prototype.toProto = function () {\n        return this.field(ni.emptyPath());\n      }, Li.prototype.set = function (t, e) {\n        this.setOverlay(t, e);\n      }, Li.prototype.setAll = function (t) {\n        var n = this;\n        t.forEach(function (t, e) {\n          t ? n.set(e, t) : n.delete(e);\n        });\n      }, Li.prototype.delete = function (t) {\n        this.setOverlay(t, null);\n      }, Li.prototype.isEqual = function (t) {\n        return Ti(this.buildProto(), t.buildProto());\n      }, Li.prototype.setOverlay = function (t, e) {\n        for (var n = this.overlayMap, r = 0; r < t.length - 1; ++r) {\n          var i = t.get(r),\n              o = n.get(i),\n              n = (o instanceof Map || (o = o && 10 === Ei(o) ? new Map(Object.entries(o.mapValue.fields || {})) : new Map(), n.set(i, o)), o);\n        }\n\n        n.set(t.lastSegment(), e);\n      }, Li.prototype.applyOverlay = function (r, t) {\n        var i = this,\n            o = !1,\n            e = Li.extractNestedValue(this.partialValue, r),\n            s = xi(e) ? Object.assign({}, e.mapValue.fields) : {};\n        return t.forEach(function (t, e) {\n          var n;\n          t instanceof Map ? null != (n = i.applyOverlay(r.child(e), t)) && (s[e] = n, o = !0) : null !== t ? (s[e] = t, o = !0) : s.hasOwnProperty(e) && (delete s[e], o = !0);\n        }), o ? {\n          mapValue: {\n            fields: s\n          }\n        } : null;\n      }, Li.prototype.buildProto = function () {\n        var t = this.applyOverlay(ni.emptyPath(), this.overlayMap);\n        return null != t && (this.partialValue = t, this.overlayMap.clear()), this.partialValue;\n      }, Li.extractNestedValue = function (t, e) {\n        if (e.isEmpty()) return t;\n\n        for (var n = t, r = 0; r < e.length - 1; ++r) {\n          if (!n.mapValue.fields) return null;\n          if (!xi(n = n.mapValue.fields[e.get(r)])) return null;\n        }\n\n        return (n = (n.mapValue.fields || {})[e.lastSegment()]) || null;\n      }, Li.prototype.clone = function () {\n        return new Li(this.buildProto());\n      }, Li);\n\n      function Li(t) {\n        this.overlayMap = new Map(), this.partialValue = t;\n      }\n\n      var Pi = (Fi.newInvalidDocument = function (t) {\n        return new Fi(t, 0, zr.min(), Oi.empty(), 0);\n      }, Fi.newFoundDocument = function (t, e, n) {\n        return new Fi(t, 1, e, n, 0);\n      }, Fi.newNoDocument = function (t, e) {\n        return new Fi(t, 2, e, Oi.empty(), 0);\n      }, Fi.newUnknownDocument = function (t, e) {\n        return new Fi(t, 3, e, Oi.empty(), 2);\n      }, Fi.prototype.convertToFoundDocument = function (t, e) {\n        return this.version = t, this.documentType = 1, this.data = e, this.documentState = 0, this;\n      }, Fi.prototype.convertToNoDocument = function (t) {\n        return this.version = t, this.documentType = 2, this.data = Oi.empty(), this.documentState = 0, this;\n      }, Fi.prototype.convertToUnknownDocument = function (t) {\n        return this.version = t, this.documentType = 3, this.data = Oi.empty(), this.documentState = 2, this;\n      }, Fi.prototype.setHasCommittedMutations = function () {\n        return this.documentState = 2, this;\n      }, Fi.prototype.setHasLocalMutations = function () {\n        return this.documentState = 1, this;\n      }, Object.defineProperty(Fi.prototype, \"hasLocalMutations\", {\n        get: function get() {\n          return 1 === this.documentState;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Fi.prototype, \"hasCommittedMutations\", {\n        get: function get() {\n          return 2 === this.documentState;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Fi.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return this.hasLocalMutations || this.hasCommittedMutations;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Fi.prototype.isValidDocument = function () {\n        return 0 !== this.documentType;\n      }, Fi.prototype.isFoundDocument = function () {\n        return 1 === this.documentType;\n      }, Fi.prototype.isNoDocument = function () {\n        return 2 === this.documentType;\n      }, Fi.prototype.isUnknownDocument = function () {\n        return 3 === this.documentType;\n      }, Fi.prototype.isEqual = function (t) {\n        return t instanceof Fi && this.key.isEqual(t.key) && this.version.isEqual(t.version) && this.documentType === t.documentType && this.documentState === t.documentState && this.data.isEqual(t.data);\n      }, Fi.prototype.clone = function () {\n        return new Fi(this.key, this.documentType, this.version, this.data.clone(), this.documentState);\n      }, Fi.prototype.toString = function () {\n        return \"Document(\" + this.key + \", \" + this.version + \", \" + JSON.stringify(this.data.toProto()) + \", {documentType: \" + this.documentType + \"}), {documentState: \" + this.documentState + \"})\";\n      }, Fi),\n          Mi = function Mi(t, e, n, r, i, o, s) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = null), void 0 === s && (s = null), this.path = t, this.collectionGroup = e, this.orderBy = n, this.filters = r, this.limit = i, this.startAt = o, this.endAt = s, this.h = null;\n      };\n\n      function Fi(t, e, n, r, i) {\n        this.key = t, this.documentType = e, this.version = n, this.data = r, this.documentState = i;\n      }\n\n      function Vi(t, e, n, r, i, o, s) {\n        return new Mi(t, e = void 0 === e ? null : e, n = void 0 === n ? [] : n, r = void 0 === r ? [] : r, i = void 0 === i ? null : i, o = void 0 === o ? null : o, s = void 0 === s ? null : s);\n      }\n\n      function Ui(t) {\n        var e = t;\n        return null === e.h && (t = e.path.canonicalString(), null !== e.collectionGroup && (t += \"|cg:\" + e.collectionGroup), t += \"|f:\", t += e.filters.map(function (t) {\n          return (t = t).field.canonicalString() + t.op.toString() + Ai(t.value);\n        }).join(\",\"), t += \"|ob:\", t += e.orderBy.map(function (t) {\n          return (t = t).field.canonicalString() + t.dir;\n        }).join(\",\"), gi(e.limit) || (t += \"|l:\", t += e.limit), e.startAt && (t += \"|lb:\", t += yo(e.startAt)), e.endAt && (t += \"|ub:\", t += yo(e.endAt)), e.h = t), e.h;\n      }\n\n      function qi(t, e) {\n        if (t.limit !== e.limit) return !1;\n        if (t.orderBy.length !== e.orderBy.length) return !1;\n\n        for (var n, r, i = 0; i < t.orderBy.length; i++) {\n          if (n = t.orderBy[i], r = e.orderBy[i], n.dir !== r.dir || !n.field.isEqual(r.field)) return !1;\n        }\n\n        if (t.filters.length !== e.filters.length) return !1;\n\n        for (var o, s, a = 0; a < t.filters.length; a++) {\n          if (o = t.filters[a], s = e.filters[a], o.op !== s.op || !o.field.isEqual(s.field) || !Ti(o.value, s.value)) return !1;\n        }\n\n        return t.collectionGroup === e.collectionGroup && !!t.path.isEqual(e.path) && !!vo(t.startAt, e.startAt) && vo(t.endAt, e.endAt);\n      }\n\n      function Bi(t) {\n        return bi.isDocumentKey(t.path) && null === t.collectionGroup && 0 === t.filters.length;\n      }\n\n      var ji,\n          Ki = (n(Gi, ji = function ji() {}), Gi.create = function (t, e, n) {\n        return t.isKeyField() ? \"in\" === e || \"not-in\" === e ? this.l(t, e, n) : new Wi(t, e, n) : \"array-contains\" === e ? new oo(t, n) : \"in\" === e ? new so(t, n) : \"not-in\" === e ? new ao(t, n) : \"array-contains-any\" === e ? new uo(t, n) : new Gi(t, e, n);\n      }, Gi.l = function (t, e, n) {\n        return new (\"in\" === e ? Yi : Xi)(t, n);\n      }, Gi.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return \"!=\" === this.op ? null !== t && this.m(_i(t, this.value)) : null !== t && Ei(this.value) === Ei(t) && this.m(_i(t, this.value));\n      }, Gi.prototype.m = function (t) {\n        switch (this.op) {\n          case \"<\":\n            return t < 0;\n\n          case \"<=\":\n            return t <= 0;\n\n          case \"==\":\n            return 0 === t;\n\n          case \"!=\":\n            return 0 !== t;\n\n          case \">\":\n            return 0 < t;\n\n          case \">=\":\n            return 0 <= t;\n\n          default:\n            return Vr();\n        }\n      }, Gi.prototype.g = function () {\n        return 0 <= [\"<\", \"<=\", \">\", \">=\", \"!=\", \"not-in\"].indexOf(this.op);\n      }, Gi);\n\n      function Gi(t, e, n) {\n        var r = this;\n        return (r = ji.call(this) || this).field = t, r.op = e, r.value = n, r;\n      }\n\n      var Qi,\n          zi,\n          Hi,\n          Wi = (n(Zi, Hi = Ki), Zi.prototype.matches = function (t) {\n        t = bi.comparator(t.key, this.key);\n        return this.m(t);\n      }, Zi),\n          Yi = (n($i, zi = Ki), $i.prototype.matches = function (e) {\n        return this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, $i),\n          Xi = (n(Ji, Qi = Ki), Ji.prototype.matches = function (e) {\n        return !this.keys.some(function (t) {\n          return t.isEqual(e.key);\n        });\n      }, Ji);\n\n      function Ji(t, e) {\n        var n = this;\n        return (n = Qi.call(this, t, \"not-in\", e) || this).keys = to(0, e), n;\n      }\n\n      function $i(t, e) {\n        var n = this;\n        return (n = zi.call(this, t, \"in\", e) || this).keys = to(0, e), n;\n      }\n\n      function Zi(t, e, n) {\n        var r = this;\n        return (r = Hi.call(this, t, e, n) || this).key = bi.fromName(n.referenceValue), r;\n      }\n\n      function to(t, e) {\n        return ((null === (e = e.arrayValue) || void 0 === e ? void 0 : e.values) || []).map(function (t) {\n          return bi.fromName(t.referenceValue);\n        });\n      }\n\n      var eo,\n          no,\n          ro,\n          io,\n          oo = (n(po, io = Ki), po.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return Ci(t) && Ii(t.arrayValue, this.value);\n      }, po),\n          so = (n(fo, ro = Ki), fo.prototype.matches = function (t) {\n        t = t.data.field(this.field);\n        return null !== t && Ii(this.value.arrayValue, t);\n      }, fo),\n          ao = (n(lo, no = Ki), lo.prototype.matches = function (t) {\n        if (Ii(this.value.arrayValue, {\n          nullValue: \"NULL_VALUE\"\n        })) return !1;\n        t = t.data.field(this.field);\n        return null !== t && !Ii(this.value.arrayValue, t);\n      }, lo),\n          uo = (n(ho, eo = Ki), ho.prototype.matches = function (t) {\n        var e = this,\n            t = t.data.field(this.field);\n        return !(!Ci(t) || !t.arrayValue.values) && t.arrayValue.values.some(function (t) {\n          return Ii(e.value.arrayValue, t);\n        });\n      }, ho),\n          co = function co(t, e) {\n        this.position = t, this.before = e;\n      };\n\n      function ho(t, e) {\n        return eo.call(this, t, \"array-contains-any\", e) || this;\n      }\n\n      function lo(t, e) {\n        return no.call(this, t, \"not-in\", e) || this;\n      }\n\n      function fo(t, e) {\n        return ro.call(this, t, \"in\", e) || this;\n      }\n\n      function po(t, e) {\n        return io.call(this, t, \"array-contains\", e) || this;\n      }\n\n      function yo(t) {\n        return (t.before ? \"b\" : \"a\") + \":\" + t.position.map(Ai).join(\",\");\n      }\n\n      var go = function go(t, e) {\n        void 0 === e && (e = \"asc\"), this.field = t, this.dir = e;\n      };\n\n      function mo(t, e, n) {\n        for (var r = 0, i = 0; i < t.position.length; i++) {\n          var o = e[i],\n              s = t.position[i],\n              r = o.field.isKeyField() ? bi.comparator(bi.fromName(s.referenceValue), n.key) : _i(s, n.data.field(o.field));\n          if (\"desc\" === o.dir && (r *= -1), 0 !== r) break;\n        }\n\n        return t.before ? r <= 0 : r < 0;\n      }\n\n      function vo(t, e) {\n        if (null === t) return null === e;\n        if (null === e) return !1;\n        if (t.before !== e.before || t.position.length !== e.position.length) return !1;\n\n        for (var n = 0; n < t.position.length; n++) {\n          if (!Ti(t.position[n], e.position[n])) return !1;\n        }\n\n        return !0;\n      }\n\n      var bo = function bo(t, e, n, r, i, o, s, a) {\n        void 0 === e && (e = null), void 0 === n && (n = []), void 0 === r && (r = []), void 0 === i && (i = null), void 0 === o && (o = \"F\"), void 0 === s && (s = null), void 0 === a && (a = null), this.path = t, this.collectionGroup = e, this.explicitOrderBy = n, this.filters = r, this.limit = i, this.limitType = o, this.startAt = s, this.endAt = a, this.p = null, this.T = null, this.startAt, this.endAt;\n      };\n\n      function wo(t, e, n, r, i, o, s, a) {\n        return new bo(t, e, n, r, i, o, s, a);\n      }\n\n      function Eo(t) {\n        return new bo(t);\n      }\n\n      function To(t) {\n        return !gi(t.limit) && \"F\" === t.limitType;\n      }\n\n      function Io(t) {\n        return !gi(t.limit) && \"L\" === t.limitType;\n      }\n\n      function _o(t) {\n        return 0 < t.explicitOrderBy.length ? t.explicitOrderBy[0].field : null;\n      }\n\n      function So(t) {\n        for (var e = 0, n = t.filters; e < n.length; e++) {\n          var r = n[e];\n          if (r.g()) return r.field;\n        }\n\n        return null;\n      }\n\n      function Ao(t) {\n        return null !== t.collectionGroup;\n      }\n\n      function No(t) {\n        var e = t;\n\n        if (null === e.p) {\n          e.p = [];\n\n          var n = So(e),\n              t = _o(e);\n\n          if (null !== n && null === t) n.isKeyField() || e.p.push(new go(n)), e.p.push(new go(ni.keyField(), \"asc\"));else {\n            for (var r = !1, i = 0, o = e.explicitOrderBy; i < o.length; i++) {\n              var s = o[i];\n              e.p.push(s), s.field.isKeyField() && (r = !0);\n            }\n\n            r || (n = 0 < e.explicitOrderBy.length ? e.explicitOrderBy[e.explicitOrderBy.length - 1].dir : \"asc\", e.p.push(new go(ni.keyField(), n)));\n          }\n        }\n\n        return e.p;\n      }\n\n      function Do(t) {\n        var e = t;\n        if (!e.T) if (\"F\" === e.limitType) e.T = Vi(e.path, e.collectionGroup, No(e), e.filters, e.limit, e.startAt, e.endAt);else {\n          for (var n = [], r = 0, i = No(e); r < i.length; r++) {\n            var o = i[r],\n                s = \"desc\" === o.dir ? \"asc\" : \"desc\";\n            n.push(new go(o.field, s));\n          }\n\n          var a = e.endAt ? new co(e.endAt.position, !e.endAt.before) : null,\n              t = e.startAt ? new co(e.startAt.position, !e.startAt.before) : null;\n          e.T = Vi(e.path, e.collectionGroup, n, e.filters, e.limit, a, t);\n        }\n        return e.T;\n      }\n\n      function Co(t, e, n) {\n        return new bo(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), e, n, t.startAt, t.endAt);\n      }\n\n      function ko(t, e) {\n        return qi(Do(t), Do(e)) && t.limitType === e.limitType;\n      }\n\n      function Ro(t) {\n        return Ui(Do(t)) + \"|lt:\" + t.limitType;\n      }\n\n      function xo(t) {\n        return \"Query(target=\" + (e = Do(t), n = e.path.canonicalString(), null !== e.collectionGroup && (n += \" collectionGroup=\" + e.collectionGroup), 0 < e.filters.length && (n += \", filters: [\" + e.filters.map(function (t) {\n          return (t = t).field.canonicalString() + \" \" + t.op + \" \" + Ai(t.value);\n        }).join(\", \") + \"]\"), gi(e.limit) || (n += \", limit: \" + e.limit), 0 < e.orderBy.length && (n += \", orderBy: [\" + e.orderBy.map(function (t) {\n          return (t = t).field.canonicalString() + \" (\" + t.dir + \")\";\n        }).join(\", \") + \"]\"), e.startAt && (n += \", startAt: \" + yo(e.startAt)), e.endAt && (n += \", endAt: \" + yo(e.endAt)), \"Target(\" + n + \")\") + \"; limitType=\" + t.limitType + \")\";\n        var e, n;\n      }\n\n      function Oo(i, t) {\n        return t.isFoundDocument() && (e = i, n = t.key.path, null !== e.collectionGroup ? t.key.hasCollectionId(e.collectionGroup) && e.path.isPrefixOf(n) : bi.isDocumentKey(e.path) ? e.path.isEqual(n) : e.path.isImmediateParentOf(n)) && function (t) {\n          for (var e = 0, n = i.explicitOrderBy; e < n.length; e++) {\n            var r = n[e];\n            if (!r.field.isKeyField() && null === t.data.field(r.field)) return;\n          }\n\n          return 1;\n        }(t) && function (t) {\n          for (var e = 0, n = i.filters; e < n.length; e++) {\n            if (!n[e].matches(t)) return;\n          }\n\n          return 1;\n        }(t) && (n = t, (!(t = i).startAt || mo(t.startAt, No(t), n)) && (!t.endAt || !mo(t.endAt, No(t), n)));\n        var e, n;\n      }\n\n      function Lo(a) {\n        return function (t, e) {\n          for (var n = !1, r = 0, i = No(a); r < i.length; r++) {\n            var o = i[r],\n                s = function (t, r, e) {\n              var n = t.field.isKeyField() ? bi.comparator(r.key, e.key) : function (t, e) {\n                var n = r.data.field(t),\n                    t = e.data.field(t);\n                return null !== n && null !== t ? _i(n, t) : Vr();\n              }(t.field, e);\n\n              switch (t.dir) {\n                case \"asc\":\n                  return n;\n\n                case \"desc\":\n                  return -1 * n;\n\n                default:\n                  return Vr();\n              }\n            }(o, t, e);\n\n            if (0 !== s) return s;\n            n = n || o.field.isKeyField();\n          }\n\n          return 0;\n        };\n      }\n\n      function Po(t, e) {\n        if (t.I) {\n          if (isNaN(e)) return {\n            doubleValue: \"NaN\"\n          };\n          if (e === 1 / 0) return {\n            doubleValue: \"Infinity\"\n          };\n          if (e === -1 / 0) return {\n            doubleValue: \"-Infinity\"\n          };\n        }\n\n        return {\n          doubleValue: mi(e) ? \"-0\" : e\n        };\n      }\n\n      function Mo(t) {\n        return {\n          integerValue: \"\" + t\n        };\n      }\n\n      function Fo(t, e) {\n        return vi(e) ? Mo(e) : Po(t, e);\n      }\n\n      I = function I() {\n        this._ = void 0;\n      };\n\n      function Vo(t, e) {\n        return t instanceof Jo ? Di(t = e) || t && \"doubleValue\" in t ? e : {\n          integerValue: 0\n        } : null;\n      }\n\n      var Uo,\n          qo,\n          Bo = (n(Go, qo = I), Go),\n          jo = (n(Ko, Uo = I), Ko);\n\n      function Ko(t) {\n        var e = this;\n        return (e = Uo.call(this) || this).elements = t, e;\n      }\n\n      function Go() {\n        return null !== qo && qo.apply(this, arguments) || this;\n      }\n\n      function Qo(t, e) {\n        for (var n = ts(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n.some(function (t) {\n              return Ti(t, e);\n            }) || n.push(e);\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var zo,\n          Ho = (n(Wo, zo = I), Wo);\n\n      function Wo(t) {\n        var e = this;\n        return (e = zo.call(this) || this).elements = t, e;\n      }\n\n      function Yo(t, e) {\n        for (var n = ts(e), r = 0, i = t.elements; r < i.length; r++) {\n          !function (e) {\n            n = n.filter(function (t) {\n              return !Ti(t, e);\n            });\n          }(i[r]);\n        }\n\n        return {\n          arrayValue: {\n            values: n\n          }\n        };\n      }\n\n      var Xo,\n          Jo = (n($o, Xo = I), $o);\n\n      function $o(t, e) {\n        var n = this;\n        return (n = Xo.call(this) || this).R = t, n.A = e, n;\n      }\n\n      function Zo(t) {\n        return fi(t.integerValue || t.doubleValue);\n      }\n\n      function ts(t) {\n        return Ci(t) && t.arrayValue.values ? t.arrayValue.values.slice() : [];\n      }\n\n      function es(t, e) {\n        this.version = t, this.transformResults = e;\n      }\n\n      var ns = function ns(t, e) {\n        this.field = t, this.transform = e;\n      },\n          rs = (is.none = function () {\n        return new is();\n      }, is.exists = function (t) {\n        return new is(void 0, t);\n      }, is.updateTime = function (t) {\n        return new is(t);\n      }, Object.defineProperty(is.prototype, \"isNone\", {\n        get: function get() {\n          return void 0 === this.updateTime && void 0 === this.exists;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), is.prototype.isEqual = function (t) {\n        return this.exists === t.exists && (this.updateTime ? !!t.updateTime && this.updateTime.isEqual(t.updateTime) : !t.updateTime);\n      }, is);\n\n      function is(t, e) {\n        this.updateTime = t, this.exists = e;\n      }\n\n      function os(t, e) {\n        return void 0 !== t.updateTime ? e.isFoundDocument() && e.version.isEqual(t.updateTime) : void 0 === t.exists || t.exists === e.isFoundDocument();\n      }\n\n      Se = function Se() {};\n\n      function ss(t, e, n) {\n        var r, i, o, s;\n        t instanceof ls ? (i = e, o = n, os((r = t).precondition, i) && (s = r.value.clone(), o = ms(r.fieldTransforms, o, i), s.setAll(o), i.convertToFoundDocument(us(i), s).setHasLocalMutations())) : t instanceof fs ? (o = e, i = n, os((s = t).precondition, o) && (n = ms(s.fieldTransforms, i, o), (i = o.data).setAll(ys(s)), i.setAll(n), o.convertToFoundDocument(us(o), i).setHasLocalMutations())) : (e = e, os(t.precondition, e) && e.convertToNoDocument(zr.min()));\n      }\n\n      function as(t, e) {\n        return t.type === e.type && !!t.key.isEqual(e.key) && !!t.precondition.isEqual(e.precondition) && (n = t.fieldTransforms, r = e.fieldTransforms, !!(void 0 === n && void 0 === r || n && r && Kr(n, r, function (t, e) {\n          return e = e, (t = t).field.isEqual(e.field) && (t = t.transform, e = e.transform, t instanceof jo && e instanceof jo || t instanceof Ho && e instanceof Ho ? Kr(t.elements, e.elements, Ti) : t instanceof Jo && e instanceof Jo ? Ti(t.A, e.A) : t instanceof Bo && e instanceof Bo);\n        }))) && (0 === t.type ? t.value.isEqual(e.value) : 1 !== t.type || t.data.isEqual(e.data) && t.fieldMask.isEqual(e.fieldMask));\n        var n, r;\n      }\n\n      function us(t) {\n        return t.isFoundDocument() ? t.version : zr.min();\n      }\n\n      var cs,\n          hs,\n          ls = (n(ps, hs = Se), ps),\n          fs = (n(ds, cs = Se), ds);\n\n      function ds(t, e, n, r, i) {\n        void 0 === i && (i = []);\n        var o = this;\n        return (o = cs.call(this) || this).key = t, o.data = e, o.fieldMask = n, o.precondition = r, o.fieldTransforms = i, o.type = 1, o;\n      }\n\n      function ps(t, e, n, r) {\n        void 0 === r && (r = []);\n        var i = this;\n        return (i = hs.call(this) || this).key = t, i.value = e, i.precondition = n, i.fieldTransforms = r, i.type = 0, i;\n      }\n\n      function ys(n) {\n        var r = new Map();\n        return n.fieldMask.fields.forEach(function (t) {\n          var e;\n          t.isEmpty() || (e = n.data.field(t), r.set(t, e));\n        }), r;\n      }\n\n      function gs(t, e, n) {\n        var r = new Map();\n        Ur(t.length === n.length);\n\n        for (var i = 0; i < n.length; i++) {\n          var o = t[i],\n              s = o.transform,\n              a = e.data.field(o.field);\n          r.set(o.field, (o = s, s = a, a = n[i], o instanceof jo ? Qo(o, s) : o instanceof Ho ? Yo(o, s) : a));\n        }\n\n        return r;\n      }\n\n      function ms(t, e, n) {\n        for (var r, i = new Map(), o = 0, s = t; o < s.length; o++) {\n          var a = s[o],\n              u = a.transform,\n              c = n.data.field(a.field);\n          i.set(a.field, (r = c, a = e, c = void 0, (u = u) instanceof Bo ? (c = {\n            fields: {\n              __type__: {\n                stringValue: \"server_timestamp\"\n              },\n              __local_write_time__: {\n                timestampValue: {\n                  seconds: a.seconds,\n                  nanos: a.nanoseconds\n                }\n              }\n            }\n          }, r && (c.fields.__previous_value__ = r), {\n            mapValue: c\n          }) : u instanceof jo ? Qo(u, r) : u instanceof Ho ? Yo(u, r) : (u = Vo(c = u, r), r = Zo(u) + Zo(c.A), Di(u) && Di(c.A) ? Mo(r) : Po(c.R, r))));\n        }\n\n        return i;\n      }\n\n      function vs(t) {\n        this.count = t;\n      }\n\n      var bs,\n          ws,\n          Es,\n          Ts = (n(Ss, Es = Se), Ss),\n          Is = (n(_s, ws = Se), _s);\n\n      function _s(t, e) {\n        var n = this;\n        return (n = ws.call(this) || this).key = t, n.precondition = e, n.type = 3, n.fieldTransforms = [], n;\n      }\n\n      function Ss(t, e) {\n        var n = this;\n        return (n = Es.call(this) || this).key = t, n.precondition = e, n.type = 2, n.fieldTransforms = [], n;\n      }\n\n      function As(t) {\n        switch (t) {\n          case Cr.OK:\n            return Vr(), 0;\n\n          case Cr.CANCELLED:\n          case Cr.UNKNOWN:\n          case Cr.DEADLINE_EXCEEDED:\n          case Cr.RESOURCE_EXHAUSTED:\n          case Cr.INTERNAL:\n          case Cr.UNAVAILABLE:\n          case Cr.UNAUTHENTICATED:\n            return;\n\n          case Cr.INVALID_ARGUMENT:\n          case Cr.NOT_FOUND:\n          case Cr.ALREADY_EXISTS:\n          case Cr.PERMISSION_DENIED:\n          case Cr.FAILED_PRECONDITION:\n          case Cr.ABORTED:\n          case Cr.OUT_OF_RANGE:\n          case Cr.UNIMPLEMENTED:\n          case Cr.DATA_LOSS:\n            return 1;\n\n          default:\n            return Vr(), 0;\n        }\n      }\n\n      function Ns(t) {\n        if (void 0 === t) return Pr(\"GRPC error has no .code\"), Cr.UNKNOWN;\n\n        switch (t) {\n          case bs.OK:\n            return Cr.OK;\n\n          case bs.CANCELLED:\n            return Cr.CANCELLED;\n\n          case bs.UNKNOWN:\n            return Cr.UNKNOWN;\n\n          case bs.DEADLINE_EXCEEDED:\n            return Cr.DEADLINE_EXCEEDED;\n\n          case bs.RESOURCE_EXHAUSTED:\n            return Cr.RESOURCE_EXHAUSTED;\n\n          case bs.INTERNAL:\n            return Cr.INTERNAL;\n\n          case bs.UNAVAILABLE:\n            return Cr.UNAVAILABLE;\n\n          case bs.UNAUTHENTICATED:\n            return Cr.UNAUTHENTICATED;\n\n          case bs.INVALID_ARGUMENT:\n            return Cr.INVALID_ARGUMENT;\n\n          case bs.NOT_FOUND:\n            return Cr.NOT_FOUND;\n\n          case bs.ALREADY_EXISTS:\n            return Cr.ALREADY_EXISTS;\n\n          case bs.PERMISSION_DENIED:\n            return Cr.PERMISSION_DENIED;\n\n          case bs.FAILED_PRECONDITION:\n            return Cr.FAILED_PRECONDITION;\n\n          case bs.ABORTED:\n            return Cr.ABORTED;\n\n          case bs.OUT_OF_RANGE:\n            return Cr.OUT_OF_RANGE;\n\n          case bs.UNIMPLEMENTED:\n            return Cr.UNIMPLEMENTED;\n\n          case bs.DATA_LOSS:\n            return Cr.DATA_LOSS;\n\n          default:\n            return Vr();\n        }\n      }\n\n      (I = bs = bs || {})[I.OK = 0] = \"OK\", I[I.CANCELLED = 1] = \"CANCELLED\", I[I.UNKNOWN = 2] = \"UNKNOWN\", I[I.INVALID_ARGUMENT = 3] = \"INVALID_ARGUMENT\", I[I.DEADLINE_EXCEEDED = 4] = \"DEADLINE_EXCEEDED\", I[I.NOT_FOUND = 5] = \"NOT_FOUND\", I[I.ALREADY_EXISTS = 6] = \"ALREADY_EXISTS\", I[I.PERMISSION_DENIED = 7] = \"PERMISSION_DENIED\", I[I.UNAUTHENTICATED = 16] = \"UNAUTHENTICATED\", I[I.RESOURCE_EXHAUSTED = 8] = \"RESOURCE_EXHAUSTED\", I[I.FAILED_PRECONDITION = 9] = \"FAILED_PRECONDITION\", I[I.ABORTED = 10] = \"ABORTED\", I[I.OUT_OF_RANGE = 11] = \"OUT_OF_RANGE\", I[I.UNIMPLEMENTED = 12] = \"UNIMPLEMENTED\", I[I.INTERNAL = 13] = \"INTERNAL\", I[I.UNAVAILABLE = 14] = \"UNAVAILABLE\", I[I.DATA_LOSS = 15] = \"DATA_LOSS\";\n      var Ds = (Os.prototype.insert = function (t, e) {\n        return new Os(this.comparator, this.root.insert(t, e, this.comparator).copy(null, null, ks.BLACK, null, null));\n      }, Os.prototype.remove = function (t) {\n        return new Os(this.comparator, this.root.remove(t, this.comparator).copy(null, null, ks.BLACK, null, null));\n      }, Os.prototype.get = function (t) {\n        for (var e = this.root; !e.isEmpty();) {\n          var n = this.comparator(t, e.key);\n          if (0 === n) return e.value;\n          n < 0 ? e = e.left : 0 < n && (e = e.right);\n        }\n\n        return null;\n      }, Os.prototype.indexOf = function (t) {\n        for (var e = 0, n = this.root; !n.isEmpty();) {\n          var r = this.comparator(t, n.key);\n          if (0 === r) return e + n.left.size;\n          n = r < 0 ? n.left : (e += n.left.size + 1, n.right);\n        }\n\n        return -1;\n      }, Os.prototype.isEmpty = function () {\n        return this.root.isEmpty();\n      }, Object.defineProperty(Os.prototype, \"size\", {\n        get: function get() {\n          return this.root.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Os.prototype.minKey = function () {\n        return this.root.minKey();\n      }, Os.prototype.maxKey = function () {\n        return this.root.maxKey();\n      }, Os.prototype.inorderTraversal = function (t) {\n        return this.root.inorderTraversal(t);\n      }, Os.prototype.forEach = function (n) {\n        this.inorderTraversal(function (t, e) {\n          return n(t, e), !1;\n        });\n      }, Os.prototype.toString = function () {\n        var n = [];\n        return this.inorderTraversal(function (t, e) {\n          return n.push(t + \":\" + e), !1;\n        }), \"{\" + n.join(\", \") + \"}\";\n      }, Os.prototype.reverseTraversal = function (t) {\n        return this.root.reverseTraversal(t);\n      }, Os.prototype.getIterator = function () {\n        return new Cs(this.root, null, this.comparator, !1);\n      }, Os.prototype.getIteratorFrom = function (t) {\n        return new Cs(this.root, t, this.comparator, !1);\n      }, Os.prototype.getReverseIterator = function () {\n        return new Cs(this.root, null, this.comparator, !0);\n      }, Os.prototype.getReverseIteratorFrom = function (t) {\n        return new Cs(this.root, t, this.comparator, !0);\n      }, Os),\n          Cs = (xs.prototype.getNext = function () {\n        var t = this.nodeStack.pop(),\n            e = {\n          key: t.key,\n          value: t.value\n        };\n        if (this.isReverse) for (t = t.left; !t.isEmpty();) {\n          this.nodeStack.push(t), t = t.right;\n        } else for (t = t.right; !t.isEmpty();) {\n          this.nodeStack.push(t), t = t.left;\n        }\n        return e;\n      }, xs.prototype.hasNext = function () {\n        return 0 < this.nodeStack.length;\n      }, xs.prototype.peek = function () {\n        if (0 === this.nodeStack.length) return null;\n        var t = this.nodeStack[this.nodeStack.length - 1];\n        return {\n          key: t.key,\n          value: t.value\n        };\n      }, xs),\n          ks = (Rs.prototype.copy = function (t, e, n, r, i) {\n        return new Rs(null != t ? t : this.key, null != e ? e : this.value, null != n ? n : this.color, null != r ? r : this.left, null != i ? i : this.right);\n      }, Rs.prototype.isEmpty = function () {\n        return !1;\n      }, Rs.prototype.inorderTraversal = function (t) {\n        return this.left.inorderTraversal(t) || t(this.key, this.value) || this.right.inorderTraversal(t);\n      }, Rs.prototype.reverseTraversal = function (t) {\n        return this.right.reverseTraversal(t) || t(this.key, this.value) || this.left.reverseTraversal(t);\n      }, Rs.prototype.min = function () {\n        return this.left.isEmpty() ? this : this.left.min();\n      }, Rs.prototype.minKey = function () {\n        return this.min().key;\n      }, Rs.prototype.maxKey = function () {\n        return this.right.isEmpty() ? this.key : this.right.maxKey();\n      }, Rs.prototype.insert = function (t, e, n) {\n        var r = this,\n            i = n(t, r.key);\n        return (r = i < 0 ? r.copy(null, null, null, r.left.insert(t, e, n), null) : 0 === i ? r.copy(null, e, null, null, null) : r.copy(null, null, null, null, r.right.insert(t, e, n))).fixUp();\n      }, Rs.prototype.removeMin = function () {\n        if (this.left.isEmpty()) return Rs.EMPTY;\n        var t = this;\n        return (t = (t = !t.left.isRed() && !t.left.left.isRed() ? t.moveRedLeft() : t).copy(null, null, null, t.left.removeMin(), null)).fixUp();\n      }, Rs.prototype.remove = function (t, e) {\n        var n,\n            r = this;\n        if (e(t, r.key) < 0) r = (r = !(r.left.isEmpty() || r.left.isRed() || r.left.left.isRed()) ? r.moveRedLeft() : r).copy(null, null, null, r.left.remove(t, e), null);else {\n          if (0 === e(t, (r = !((r = r.left.isRed() ? r.rotateRight() : r).right.isEmpty() || r.right.isRed() || r.right.left.isRed()) ? r.moveRedRight() : r).key)) {\n            if (r.right.isEmpty()) return Rs.EMPTY;\n            n = r.right.min(), r = r.copy(n.key, n.value, null, null, r.right.removeMin());\n          }\n\n          r = r.copy(null, null, null, null, r.right.remove(t, e));\n        }\n        return r.fixUp();\n      }, Rs.prototype.isRed = function () {\n        return this.color;\n      }, Rs.prototype.fixUp = function () {\n        var t = this;\n        return t = (t = (t = t.right.isRed() && !t.left.isRed() ? t.rotateLeft() : t).left.isRed() && t.left.left.isRed() ? t.rotateRight() : t).left.isRed() && t.right.isRed() ? t.colorFlip() : t;\n      }, Rs.prototype.moveRedLeft = function () {\n        var t = this.colorFlip();\n        return t = t.right.left.isRed() ? (t = (t = t.copy(null, null, null, null, t.right.rotateRight())).rotateLeft()).colorFlip() : t;\n      }, Rs.prototype.moveRedRight = function () {\n        var t = this.colorFlip();\n        return t = t.left.left.isRed() ? (t = t.rotateRight()).colorFlip() : t;\n      }, Rs.prototype.rotateLeft = function () {\n        var t = this.copy(null, null, Rs.RED, null, this.right.left);\n        return this.right.copy(null, null, this.color, t, null);\n      }, Rs.prototype.rotateRight = function () {\n        var t = this.copy(null, null, Rs.RED, this.left.right, null);\n        return this.left.copy(null, null, this.color, null, t);\n      }, Rs.prototype.colorFlip = function () {\n        var t = this.left.copy(null, null, !this.left.color, null, null),\n            e = this.right.copy(null, null, !this.right.color, null, null);\n        return this.copy(null, null, !this.color, t, e);\n      }, Rs.prototype.checkMaxDepth = function () {\n        var t = this.check();\n        return Math.pow(2, t) <= this.size + 1;\n      }, Rs.prototype.check = function () {\n        if (this.isRed() && this.left.isRed()) throw Vr();\n        if (this.right.isRed()) throw Vr();\n        var t = this.left.check();\n        if (t !== this.right.check()) throw Vr();\n        return t + (this.isRed() ? 0 : 1);\n      }, Rs);\n\n      function Rs(t, e, n, r, i) {\n        this.key = t, this.value = e, this.color = null != n ? n : Rs.RED, this.left = null != r ? r : Rs.EMPTY, this.right = null != i ? i : Rs.EMPTY, this.size = this.left.size + 1 + this.right.size;\n      }\n\n      function xs(t, e, n, r) {\n        this.isReverse = r, this.nodeStack = [];\n\n        for (var i = 1; !t.isEmpty();) {\n          if (i = e ? n(t.key, e) : 1, r && (i *= -1), i < 0) t = this.isReverse ? t.left : t.right;else {\n            if (0 === i) {\n              this.nodeStack.push(t);\n              break;\n            }\n\n            this.nodeStack.push(t), t = this.isReverse ? t.right : t.left;\n          }\n        }\n      }\n\n      function Os(t, e) {\n        this.comparator = t, this.root = e || ks.EMPTY;\n      }\n\n      function Ls() {\n        this.size = 0;\n      }\n\n      ks.EMPTY = null, ks.RED = !0, ks.BLACK = !1, ks.EMPTY = (Object.defineProperty(Ls.prototype, \"key\", {\n        get: function get() {\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ls.prototype, \"value\", {\n        get: function get() {\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ls.prototype, \"color\", {\n        get: function get() {\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ls.prototype, \"left\", {\n        get: function get() {\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ls.prototype, \"right\", {\n        get: function get() {\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ls.prototype.copy = function (t, e, n, r, i) {\n        return this;\n      }, Ls.prototype.insert = function (t, e, n) {\n        return new ks(t, e);\n      }, Ls.prototype.remove = function (t, e) {\n        return this;\n      }, Ls.prototype.isEmpty = function () {\n        return !0;\n      }, Ls.prototype.inorderTraversal = function (t) {\n        return !1;\n      }, Ls.prototype.reverseTraversal = function (t) {\n        return !1;\n      }, Ls.prototype.minKey = function () {\n        return null;\n      }, Ls.prototype.maxKey = function () {\n        return null;\n      }, Ls.prototype.isRed = function () {\n        return !1;\n      }, Ls.prototype.checkMaxDepth = function () {\n        return !0;\n      }, Ls.prototype.check = function () {\n        return 0;\n      }, new Ls());\n      var Ps = (Us.prototype.has = function (t) {\n        return null !== this.data.get(t);\n      }, Us.prototype.first = function () {\n        return this.data.minKey();\n      }, Us.prototype.last = function () {\n        return this.data.maxKey();\n      }, Object.defineProperty(Us.prototype, \"size\", {\n        get: function get() {\n          return this.data.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Us.prototype.indexOf = function (t) {\n        return this.data.indexOf(t);\n      }, Us.prototype.forEach = function (n) {\n        this.data.inorderTraversal(function (t, e) {\n          return n(t), !1;\n        });\n      }, Us.prototype.forEachInRange = function (t, e) {\n        for (var n = this.data.getIteratorFrom(t[0]); n.hasNext();) {\n          var r = n.getNext();\n          if (0 <= this.comparator(r.key, t[1])) return;\n          e(r.key);\n        }\n      }, Us.prototype.forEachWhile = function (t, e) {\n        for (var n = void 0 !== e ? this.data.getIteratorFrom(e) : this.data.getIterator(); n.hasNext();) {\n          if (!t(n.getNext().key)) return;\n        }\n      }, Us.prototype.firstAfterOrEqual = function (t) {\n        t = this.data.getIteratorFrom(t);\n        return t.hasNext() ? t.getNext().key : null;\n      }, Us.prototype.getIterator = function () {\n        return new Ms(this.data.getIterator());\n      }, Us.prototype.getIteratorFrom = function (t) {\n        return new Ms(this.data.getIteratorFrom(t));\n      }, Us.prototype.add = function (t) {\n        return this.copy(this.data.remove(t).insert(t, !0));\n      }, Us.prototype.delete = function (t) {\n        return this.has(t) ? this.copy(this.data.remove(t)) : this;\n      }, Us.prototype.isEmpty = function () {\n        return this.data.isEmpty();\n      }, Us.prototype.unionWith = function (t) {\n        var e = this;\n        return e.size < t.size && (e = t, t = this), t.forEach(function (t) {\n          e = e.add(t);\n        }), e;\n      }, Us.prototype.isEqual = function (t) {\n        if (!(t instanceof Us)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.data.getIterator(), n = t.data.getIterator(); e.hasNext();) {\n          var r = e.getNext().key,\n              i = n.getNext().key;\n          if (0 !== this.comparator(r, i)) return !1;\n        }\n\n        return !0;\n      }, Us.prototype.toArray = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t);\n        }), e;\n      }, Us.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          return e.push(t);\n        }), \"SortedSet(\" + e.toString() + \")\";\n      }, Us.prototype.copy = function (t) {\n        var e = new Us(this.comparator);\n        return e.data = t, e;\n      }, Us),\n          Ms = (Vs.prototype.getNext = function () {\n        return this.iter.getNext().key;\n      }, Vs.prototype.hasNext = function () {\n        return this.iter.hasNext();\n      }, Vs),\n          Fs = new Ds(bi.comparator);\n\n      function Vs(t) {\n        this.iter = t;\n      }\n\n      function Us(t) {\n        this.comparator = t, this.data = new Ds(this.comparator);\n      }\n\n      var qs = new Ds(bi.comparator);\n      var Bs = new Ds(bi.comparator);\n      var js = new Ps(bi.comparator);\n\n      function Ks() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = js, r = 0, i = t; r < i.length; r++) {\n          var o = i[r],\n              n = n.add(o);\n        }\n\n        return n;\n      }\n\n      var Gs = new Ps(jr);\n\n      var Qs = (ea.createSynthesizedRemoteEventForCurrentChange = function (t, e) {\n        var n = new Map();\n        return n.set(t, zs.createSynthesizedTargetChangeForCurrentChange(t, e)), new ea(zr.min(), n, Gs, Fs, Ks());\n      }, ea),\n          zs = (ta.createSynthesizedTargetChangeForCurrentChange = function (t, e) {\n        return new ta(ii.EMPTY_BYTE_STRING, e, Ks(), Ks(), Ks());\n      }, ta),\n          Hs = function Hs(t, e, n, r) {\n        this.v = t, this.removedTargetIds = e, this.key = n, this.P = r;\n      },\n          Ws = function Ws(t, e) {\n        this.targetId = t, this.V = e;\n      },\n          Ys = function Ys(t, e, n, r) {\n        void 0 === n && (n = ii.EMPTY_BYTE_STRING), void 0 === r && (r = null), this.state = t, this.targetIds = e, this.resumeToken = n, this.cause = r;\n      },\n          Xs = (Object.defineProperty(Zs.prototype, \"current\", {\n        get: function get() {\n          return this.N;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Zs.prototype, \"resumeToken\", {\n        get: function get() {\n          return this.C;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Zs.prototype, \"k\", {\n        get: function get() {\n          return 0 !== this.S;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Zs.prototype, \"O\", {\n        get: function get() {\n          return this.F;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Zs.prototype.$ = function (t) {\n        0 < t.approximateByteSize() && (this.F = !0, this.C = t);\n      }, Zs.prototype.M = function () {\n        var n = Ks(),\n            r = Ks(),\n            i = Ks();\n        return this.D.forEach(function (t, e) {\n          switch (e) {\n            case 0:\n              n = n.add(t);\n              break;\n\n            case 2:\n              r = r.add(t);\n              break;\n\n            case 1:\n              i = i.add(t);\n              break;\n\n            default:\n              Vr();\n          }\n        }), new zs(this.C, this.N, n, r, i);\n      }, Zs.prototype.L = function () {\n        this.F = !1, this.D = ra();\n      }, Zs.prototype.B = function (t, e) {\n        this.F = !0, this.D = this.D.insert(t, e);\n      }, Zs.prototype.q = function (t) {\n        this.F = !0, this.D = this.D.remove(t);\n      }, Zs.prototype.U = function () {\n        this.S += 1;\n      }, Zs.prototype.K = function () {\n        --this.S;\n      }, Zs.prototype.j = function () {\n        this.F = !0, this.N = !0;\n      }, Zs),\n          Js = ($s.prototype.X = function (t) {\n        for (var e = 0, n = t.v; e < n.length; e++) {\n          var r = n[e];\n          t.P && t.P.isFoundDocument() ? this.Z(r, t.P) : this.tt(r, t.key, t.P);\n        }\n\n        for (var i = 0, o = t.removedTargetIds; i < o.length; i++) {\n          r = o[i], this.tt(r, t.key, t.P);\n        }\n      }, $s.prototype.et = function (n) {\n        var r = this;\n        this.forEachTarget(n, function (t) {\n          var e = r.nt(t);\n\n          switch (n.state) {\n            case 0:\n              r.st(t) && e.$(n.resumeToken);\n              break;\n\n            case 1:\n              e.K(), e.k || e.L(), e.$(n.resumeToken);\n              break;\n\n            case 2:\n              e.K(), e.k || r.removeTarget(t);\n              break;\n\n            case 3:\n              r.st(t) && (e.j(), e.$(n.resumeToken));\n              break;\n\n            case 4:\n              r.st(t) && (r.it(t), e.$(n.resumeToken));\n              break;\n\n            default:\n              Vr();\n          }\n        });\n      }, $s.prototype.forEachTarget = function (t, n) {\n        var r = this;\n        0 < t.targetIds.length ? t.targetIds.forEach(n) : this.G.forEach(function (t, e) {\n          r.st(e) && n(e);\n        });\n      }, $s.prototype.rt = function (t) {\n        var e = t.targetId,\n            n = t.V.count,\n            t = this.ot(e);\n        t && (Bi(t = t.target) ? 0 === n ? (t = new bi(t.path), this.tt(e, t, Pi.newNoDocument(t, zr.min()))) : Ur(1 === n) : this.ct(e) !== n && (this.it(e), this.Y = this.Y.add(e)));\n      }, $s.prototype.ut = function (r) {\n        var i = this,\n            o = new Map();\n        this.G.forEach(function (t, e) {\n          var n = i.ot(e);\n          n && (t.current && Bi(n.target) && (n = new bi(n.target.path), null !== i.H.get(n) || i.at(e, n) || i.tt(e, n, Pi.newNoDocument(n, r))), t.O && (o.set(e, t.M()), t.L()));\n        });\n        var s = Ks();\n        this.J.forEach(function (t, e) {\n          var n = !0;\n          e.forEachWhile(function (t) {\n            t = i.ot(t);\n            return !t || 2 === t.purpose || (n = !1);\n          }), n && (s = s.add(t));\n        });\n        var t = new Qs(r, o, this.Y, this.H, s);\n        return this.H = Fs, this.J = na(), this.Y = new Ps(jr), t;\n      }, $s.prototype.Z = function (t, e) {\n        var n;\n        this.st(t) && (n = this.at(t, e.key) ? 2 : 0, this.nt(t).B(e.key, n), this.H = this.H.insert(e.key, e), this.J = this.J.insert(e.key, this.ht(e.key).add(t)));\n      }, $s.prototype.tt = function (t, e, n) {\n        var r;\n        this.st(t) && (r = this.nt(t), this.at(t, e) ? r.B(e, 1) : r.q(e), this.J = this.J.insert(e, this.ht(e).delete(t)), n && (this.H = this.H.insert(e, n)));\n      }, $s.prototype.removeTarget = function (t) {\n        this.G.delete(t);\n      }, $s.prototype.ct = function (t) {\n        var e = this.nt(t).M();\n        return this.W.getRemoteKeysForTarget(t).size + e.addedDocuments.size - e.removedDocuments.size;\n      }, $s.prototype.U = function (t) {\n        this.nt(t).U();\n      }, $s.prototype.nt = function (t) {\n        var e = this.G.get(t);\n        return e || (e = new Xs(), this.G.set(t, e)), e;\n      }, $s.prototype.ht = function (t) {\n        var e = this.J.get(t);\n        return e || (e = new Ps(jr), this.J = this.J.insert(t, e)), e;\n      }, $s.prototype.st = function (t) {\n        var e = null !== this.ot(t);\n        return e || Lr(\"WatchChangeAggregator\", \"Detected inactive target\", t), e;\n      }, $s.prototype.ot = function (t) {\n        var e = this.G.get(t);\n        return e && e.k ? null : this.W.lt(t);\n      }, $s.prototype.it = function (e) {\n        var n = this;\n        this.G.set(e, new Xs()), this.W.getRemoteKeysForTarget(e).forEach(function (t) {\n          n.tt(e, t, null);\n        });\n      }, $s.prototype.at = function (t, e) {\n        return this.W.getRemoteKeysForTarget(t).has(e);\n      }, $s);\n\n      function $s(t) {\n        this.W = t, this.G = new Map(), this.H = Fs, this.J = na(), this.Y = new Ps(jr);\n      }\n\n      function Zs() {\n        this.S = 0, this.D = ra(), this.C = ii.EMPTY_BYTE_STRING, this.N = !1, this.F = !0;\n      }\n\n      function ta(t, e, n, r, i) {\n        this.resumeToken = t, this.current = e, this.addedDocuments = n, this.modifiedDocuments = r, this.removedDocuments = i;\n      }\n\n      function ea(t, e, n, r, i) {\n        this.snapshotVersion = t, this.targetChanges = e, this.targetMismatches = n, this.documentUpdates = r, this.resolvedLimboDocuments = i;\n      }\n\n      function na() {\n        return new Ds(bi.comparator);\n      }\n\n      function ra() {\n        return new Ds(bi.comparator);\n      }\n\n      var ia = {\n        asc: \"ASCENDING\",\n        desc: \"DESCENDING\"\n      },\n          oa = {\n        \"<\": \"LESS_THAN\",\n        \"<=\": \"LESS_THAN_OR_EQUAL\",\n        \">\": \"GREATER_THAN\",\n        \">=\": \"GREATER_THAN_OR_EQUAL\",\n        \"==\": \"EQUAL\",\n        \"!=\": \"NOT_EQUAL\",\n        \"array-contains\": \"ARRAY_CONTAINS\",\n        in: \"IN\",\n        \"not-in\": \"NOT_IN\",\n        \"array-contains-any\": \"ARRAY_CONTAINS_ANY\"\n      },\n          sa = function sa(t, e) {\n        this.databaseId = t, this.I = e;\n      };\n\n      function aa(t, e) {\n        return t.I ? new Date(1e3 * e.seconds).toISOString().replace(/\\.\\d*/, \"\").replace(\"Z\", \"\") + \".\" + (\"000000000\" + e.nanoseconds).slice(-9) + \"Z\" : {\n          seconds: \"\" + e.seconds,\n          nanos: e.nanoseconds\n        };\n      }\n\n      function ua(t, e) {\n        return t.I ? e.toBase64() : e.toUint8Array();\n      }\n\n      function ca(t) {\n        return Ur(!!t), zr.fromTimestamp((t = li(t), new Qr(t.seconds, t.nanos)));\n      }\n\n      function ha(t, e) {\n        return new ti([\"projects\", t.projectId, \"databases\", t.database]).child(\"documents\").child(e).canonicalString();\n      }\n\n      function la(t) {\n        t = ti.fromString(t);\n        return Ur(Ra(t)), t;\n      }\n\n      function fa(t, e) {\n        return ha(t.databaseId, e.path);\n      }\n\n      function da(t, e) {\n        e = la(e);\n        if (e.get(1) !== t.databaseId.projectId) throw new kr(Cr.INVALID_ARGUMENT, \"Tried to deserialize key from different project: \" + e.get(1) + \" vs \" + t.databaseId.projectId);\n        if (e.get(3) !== t.databaseId.database) throw new kr(Cr.INVALID_ARGUMENT, \"Tried to deserialize key from different database: \" + e.get(3) + \" vs \" + t.databaseId.database);\n        return new bi(ma(e));\n      }\n\n      function pa(t, e) {\n        return ha(t.databaseId, e);\n      }\n\n      function ya(t) {\n        t = la(t);\n        return 4 === t.length ? ti.emptyPath() : ma(t);\n      }\n\n      function ga(t) {\n        return new ti([\"projects\", t.databaseId.projectId, \"databases\", t.databaseId.database]).canonicalString();\n      }\n\n      function ma(t) {\n        return Ur(4 < t.length && \"documents\" === t.get(4)), t.popFirst(5);\n      }\n\n      function va(t, e, n) {\n        return {\n          name: fa(t, e),\n          fields: n.toProto().mapValue.fields\n        };\n      }\n\n      function ba(t, e, n) {\n        var r = da(t, e.name),\n            t = ca(e.updateTime),\n            e = new Oi({\n          mapValue: {\n            fields: e.fields\n          }\n        }),\n            e = Pi.newFoundDocument(r, t, e);\n        return n && e.setHasCommittedMutations(), n ? e.setHasCommittedMutations() : e;\n      }\n\n      function wa(t, e) {\n        var n, r, i;\n        if (e instanceof ls) n = {\n          update: va(t, e.key, e.value)\n        };else if (e instanceof Ts) n = {\n          delete: fa(t, e.key)\n        };else if (e instanceof fs) n = {\n          update: va(t, e.key, e.data),\n          updateMask: (i = e.fieldMask, r = [], i.fields.forEach(function (t) {\n            return r.push(t.canonicalString());\n          }), {\n            fieldPaths: r\n          })\n        };else {\n          if (!(e instanceof Is)) return Vr();\n          n = {\n            verify: fa(t, e.key)\n          };\n        }\n        return 0 < e.fieldTransforms.length && (n.updateTransforms = e.fieldTransforms.map(function (t) {\n          var e = t.transform;\n          if (e instanceof Bo) return {\n            fieldPath: t.field.canonicalString(),\n            setToServerValue: \"REQUEST_TIME\"\n          };\n          if (e instanceof jo) return {\n            fieldPath: t.field.canonicalString(),\n            appendMissingElements: {\n              values: e.elements\n            }\n          };\n          if (e instanceof Ho) return {\n            fieldPath: t.field.canonicalString(),\n            removeAllFromArray: {\n              values: e.elements\n            }\n          };\n          if (e instanceof Jo) return {\n            fieldPath: t.field.canonicalString(),\n            increment: e.A\n          };\n          throw Vr();\n        })), e.precondition.isNone || (n.currentDocument = void 0 !== (i = e.precondition).updateTime ? {\n          updateTime: (e = t, t = i.updateTime, aa(e, t.toTimestamp()))\n        } : void 0 !== i.exists ? {\n          exists: i.exists\n        } : Vr()), n;\n      }\n\n      function Ea(e, t) {\n        var n = t.currentDocument ? void 0 !== (s = t.currentDocument).updateTime ? rs.updateTime(ca(s.updateTime)) : void 0 !== s.exists ? rs.exists(s.exists) : rs.none() : rs.none(),\n            r = t.updateTransforms ? t.updateTransforms.map(function (t) {\n          return function (t, e) {\n            var n,\n                r = null;\n            \"setToServerValue\" in e ? (Ur(\"REQUEST_TIME\" === e.setToServerValue), r = new Bo()) : \"appendMissingElements\" in e ? (n = e.appendMissingElements.values || [], r = new jo(n)) : \"removeAllFromArray\" in e ? (n = e.removeAllFromArray.values || [], r = new Ho(n)) : \"increment\" in e ? r = new Jo(t, e.increment) : Vr();\n            e = ni.fromServerFormat(e.fieldPath);\n            return new ns(e, r);\n          }(e, t);\n        }) : [];\n\n        if (t.update) {\n          t.update.name;\n          var i = da(e, t.update.name),\n              o = new Oi({\n            mapValue: {\n              fields: t.update.fields\n            }\n          });\n\n          if (t.updateMask) {\n            var s = (s = t.updateMask.fieldPaths || [], new ri(s.map(function (t) {\n              return ni.fromServerFormat(t);\n            })));\n            return new fs(i, o, s, n, r);\n          }\n\n          return new ls(i, o, n, r);\n        }\n\n        if (t.delete) {\n          r = da(e, t.delete);\n          return new Ts(r, n);\n        }\n\n        if (t.verify) {\n          t = da(e, t.verify);\n          return new Is(t, n);\n        }\n\n        return Vr();\n      }\n\n      function Ta(t, e) {\n        return {\n          documents: [pa(t, e.path)]\n        };\n      }\n\n      function Ia(t, e) {\n        var n = {\n          structuredQuery: {}\n        },\n            r = e.path;\n        null !== e.collectionGroup ? (n.parent = pa(t, r), n.structuredQuery.from = [{\n          collectionId: e.collectionGroup,\n          allDescendants: !0\n        }]) : (n.parent = pa(t, r.popLast()), n.structuredQuery.from = [{\n          collectionId: r.lastSegment()\n        }]);\n\n        r = function (t) {\n          if (0 !== t.length) {\n            t = t.map(function (t) {\n              if (\"==\" === t.op) {\n                if (Ri(t.value)) return {\n                  unaryFilter: {\n                    field: Na(t.field),\n                    op: \"IS_NAN\"\n                  }\n                };\n                if (ki(t.value)) return {\n                  unaryFilter: {\n                    field: Na(t.field),\n                    op: \"IS_NULL\"\n                  }\n                };\n              } else if (\"!=\" === t.op) {\n                if (Ri(t.value)) return {\n                  unaryFilter: {\n                    field: Na(t.field),\n                    op: \"IS_NOT_NAN\"\n                  }\n                };\n                if (ki(t.value)) return {\n                  unaryFilter: {\n                    field: Na(t.field),\n                    op: \"IS_NOT_NULL\"\n                  }\n                };\n              }\n\n              return {\n                fieldFilter: {\n                  field: Na(t.field),\n                  op: (e = t.op, oa[e]),\n                  value: t.value\n                }\n              };\n              var e;\n            });\n            return 1 === t.length ? t[0] : {\n              compositeFilter: {\n                op: \"AND\",\n                filters: t\n              }\n            };\n          }\n        }(e.filters);\n\n        r && (n.structuredQuery.where = r);\n\n        r = function (t) {\n          if (0 !== t.length) return t.map(function (t) {\n            return {\n              field: Na((t = t).field),\n              direction: (t = t.dir, ia[t])\n            };\n          });\n        }(e.orderBy);\n\n        r && (n.structuredQuery.orderBy = r);\n        r = e.limit, r = t.I || gi(r) ? r : {\n          value: r\n        };\n        return null !== r && (n.structuredQuery.limit = r), e.startAt && (n.structuredQuery.startAt = Sa(e.startAt)), e.endAt && (n.structuredQuery.endAt = Sa(e.endAt)), n;\n      }\n\n      function _a(t) {\n        var e = ya(t.parent),\n            n = t.structuredQuery,\n            r = n.from ? n.from.length : 0,\n            i = null;\n        0 < r && (Ur(1 === r), (a = n.from[0]).allDescendants ? i = a.collectionId : e = e.child(a.collectionId));\n        var o = [];\n        n.where && (o = function e(t) {\n          return t ? void 0 !== t.unaryFilter ? [ka(t)] : void 0 !== t.fieldFilter ? [Ca(t)] : void 0 !== t.compositeFilter ? t.compositeFilter.filters.map(function (t) {\n            return e(t);\n          }).reduce(function (t, e) {\n            return t.concat(e);\n          }) : Vr() : [];\n        }(n.where));\n        var s = [],\n            t = null,\n            r = null,\n            a = null;\n        return wo(e, i, s = n.orderBy ? n.orderBy.map(function (t) {\n          return new go(Da((e = t).field), function () {\n            switch (e.direction) {\n              case \"ASCENDING\":\n                return \"asc\";\n\n              case \"DESCENDING\":\n                return \"desc\";\n\n              default:\n                return;\n            }\n          }());\n          var e;\n        }) : s, o, t = n.limit ? gi(o = \"object\" == typeof (o = n.limit) ? o.value : o) ? null : o : t, \"F\", r = n.startAt ? Aa(n.startAt) : r, a = n.endAt ? Aa(n.endAt) : a);\n      }\n\n      function Sa(t) {\n        return {\n          before: t.before,\n          values: t.position\n        };\n      }\n\n      function Aa(t) {\n        var e = !!t.before,\n            t = t.values || [];\n        return new co(t, e);\n      }\n\n      function Na(t) {\n        return {\n          fieldPath: t.canonicalString()\n        };\n      }\n\n      function Da(t) {\n        return ni.fromServerFormat(t.fieldPath);\n      }\n\n      function Ca(t) {\n        return Ki.create(Da(t.fieldFilter.field), function () {\n          switch (t.fieldFilter.op) {\n            case \"EQUAL\":\n              return \"==\";\n\n            case \"NOT_EQUAL\":\n              return \"!=\";\n\n            case \"GREATER_THAN\":\n              return \">\";\n\n            case \"GREATER_THAN_OR_EQUAL\":\n              return \">=\";\n\n            case \"LESS_THAN\":\n              return \"<\";\n\n            case \"LESS_THAN_OR_EQUAL\":\n              return \"<=\";\n\n            case \"ARRAY_CONTAINS\":\n              return \"array-contains\";\n\n            case \"IN\":\n              return \"in\";\n\n            case \"NOT_IN\":\n              return \"not-in\";\n\n            case \"ARRAY_CONTAINS_ANY\":\n              return \"array-contains-any\";\n\n            case \"OPERATOR_UNSPECIFIED\":\n            default:\n              return Vr();\n          }\n        }(), t.fieldFilter.value);\n      }\n\n      function ka(t) {\n        switch (t.unaryFilter.op) {\n          case \"IS_NAN\":\n            var e = Da(t.unaryFilter.field);\n            return Ki.create(e, \"==\", {\n              doubleValue: NaN\n            });\n\n          case \"IS_NULL\":\n            e = Da(t.unaryFilter.field);\n            return Ki.create(e, \"==\", {\n              nullValue: \"NULL_VALUE\"\n            });\n\n          case \"IS_NOT_NAN\":\n            var n = Da(t.unaryFilter.field);\n            return Ki.create(n, \"!=\", {\n              doubleValue: NaN\n            });\n\n          case \"IS_NOT_NULL\":\n            n = Da(t.unaryFilter.field);\n            return Ki.create(n, \"!=\", {\n              nullValue: \"NULL_VALUE\"\n            });\n\n          case \"OPERATOR_UNSPECIFIED\":\n          default:\n            return Vr();\n        }\n      }\n\n      function Ra(t) {\n        return 4 <= t.length && \"projects\" === t.get(0) && \"databases\" === t.get(2);\n      }\n\n      function xa(t) {\n        for (var e = \"\", n = 0; n < t.length; n++) {\n          0 < e.length && (e = Oa(e)), e = function (t, e) {\n            for (var n = e, r = t.length, i = 0; i < r; i++) {\n              var o = t.charAt(i);\n\n              switch (o) {\n                case \"\\0\":\n                  n += \"\\x01\\x10\";\n                  break;\n\n                case \"\\x01\":\n                  n += \"\\x01\\x11\";\n                  break;\n\n                default:\n                  n += o;\n              }\n            }\n\n            return n;\n          }(t.get(n), e);\n        }\n\n        return Oa(e);\n      }\n\n      function Oa(t) {\n        return t + \"\\x01\\x01\";\n      }\n\n      function La(t) {\n        var e = t.length;\n        if (Ur(2 <= e), 2 === e) return Ur(\"\\x01\" === t.charAt(0) && \"\\x01\" === t.charAt(1)), ti.emptyPath();\n\n        for (var n = e - 2, r = [], i = \"\", o = 0; o < e;) {\n          var s = t.indexOf(\"\\x01\", o);\n\n          switch ((s < 0 || n < s) && Vr(), t.charAt(s + 1)) {\n            case \"\\x01\":\n              var a = t.substring(o, s),\n                  u = void 0;\n              0 === i.length ? u = a : (u = i += a, i = \"\"), r.push(u);\n              break;\n\n            case \"\\x10\":\n              i += t.substring(o, s), i += \"\\0\";\n              break;\n\n            case \"\\x11\":\n              i += t.substring(o, s + 1);\n              break;\n\n            default:\n              Vr();\n          }\n\n          o = s + 2;\n        }\n\n        return new ti(r);\n      }\n\n      function Pa(t, e, n) {\n        this.ownerId = t, this.allowTabSynchronization = e, this.leaseTimestampMs = n;\n      }\n\n      var Ma = function Ma(t, e) {\n        this.seconds = t, this.nanoseconds = e;\n      };\n\n      Pa.store = \"owner\", Pa.key = \"owner\";\n\n      function Fa(t, e, n) {\n        this.userId = t, this.lastAcknowledgedBatchId = e, this.lastStreamToken = n;\n      }\n\n      Fa.store = \"mutationQueues\", Fa.keyPath = \"userId\";\n\n      function Va(t, e, n, r, i) {\n        this.userId = t, this.batchId = e, this.localWriteTimeMs = n, this.baseMutations = r, this.mutations = i;\n      }\n\n      Va.store = \"mutations\", Va.keyPath = \"batchId\", Va.userMutationsIndex = \"userMutationsIndex\", Va.userMutationsKeyPath = [\"userId\", \"batchId\"];\n      var Ua = (qa.prefixForUser = function (t) {\n        return [t];\n      }, qa.prefixForPath = function (t, e) {\n        return [t, xa(e)];\n      }, qa.key = function (t, e, n) {\n        return [t, xa(e), n];\n      }, qa);\n\n      function qa() {}\n\n      Ua.store = \"documentMutations\", Ua.PLACEHOLDER = new Ua();\n\n      function Ba(t, e) {\n        this.path = t, this.readTime = e;\n      }\n\n      function ja(t, e) {\n        this.path = t, this.version = e;\n      }\n\n      var Ka = function Ka(t, e, n, r, i, o) {\n        this.unknownDocument = t, this.noDocument = e, this.document = n, this.hasCommittedMutations = r, this.readTime = i, this.parentPath = o;\n      };\n\n      Ka.store = \"remoteDocuments\", Ka.readTimeIndex = \"readTimeIndex\", Ka.readTimeIndexPath = \"readTime\", Ka.collectionReadTimeIndex = \"collectionReadTimeIndex\", Ka.collectionReadTimeIndexPath = [\"parentPath\", \"readTime\"];\n\n      function Ga(t) {\n        this.byteSize = t;\n      }\n\n      Ga.store = \"remoteDocumentGlobal\", Ga.key = \"remoteDocumentGlobalKey\";\n\n      function Qa(t, e, n, r, i, o, s) {\n        this.targetId = t, this.canonicalId = e, this.readTime = n, this.resumeToken = r, this.lastListenSequenceNumber = i, this.lastLimboFreeSnapshotVersion = o, this.query = s;\n      }\n\n      Qa.store = \"targets\", Qa.keyPath = \"targetId\", Qa.queryTargetsIndexName = \"queryTargetsIndex\", Qa.queryTargetsKeyPath = [\"canonicalId\", \"targetId\"];\n\n      var za = function za(t, e, n) {\n        this.targetId = t, this.path = e, this.sequenceNumber = n;\n      };\n\n      za.store = \"targetDocuments\", za.keyPath = [\"targetId\", \"path\"], za.documentTargetsIndex = \"documentTargetsIndex\", za.documentTargetsKeyPath = [\"path\", \"targetId\"];\n\n      function Ha(t, e, n, r) {\n        this.highestTargetId = t, this.highestListenSequenceNumber = e, this.lastRemoteSnapshotVersion = n, this.targetCount = r;\n      }\n\n      Ha.key = \"targetGlobalKey\", Ha.store = \"targetGlobal\";\n\n      function Wa(t, e) {\n        this.collectionId = t, this.parent = e;\n      }\n\n      Wa.store = \"collectionParents\", Wa.keyPath = [\"collectionId\", \"parent\"];\n\n      function Ya(t, e, n, r) {\n        this.clientId = t, this.updateTimeMs = e, this.networkEnabled = n, this.inForeground = r;\n      }\n\n      Ya.store = \"clientMetadata\", Ya.keyPath = \"clientId\";\n\n      function Xa(t, e, n) {\n        this.bundleId = t, this.createTime = e, this.version = n;\n      }\n\n      Xa.store = \"bundles\", Xa.keyPath = \"bundleId\";\n\n      function Ja(t, e, n) {\n        this.name = t, this.readTime = e, this.bundledQuery = n;\n      }\n\n      Ja.store = \"namedQueries\", Ja.keyPath = \"name\";\n\n      var $a,\n          Za = s(s([], s(s([], s(s([], s(s([], [Fa.store, Va.store, Ua.store, Ka.store, Qa.store, Pa.store, Ha.store, za.store]), [Ya.store])), [Ga.store])), [Wa.store])), [Xa.store, Ja.store]),\n          tu = \"The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.\",\n          Se = (fu.prototype.addOnCommittedListener = function (t) {\n        this.onCommittedListeners.push(t);\n      }, fu.prototype.raiseOnCommittedEvent = function () {\n        this.onCommittedListeners.forEach(function (t) {\n          return t();\n        });\n      }, fu),\n          eu = function eu() {\n        var n = this;\n        this.promise = new Promise(function (t, e) {\n          n.resolve = t, n.reject = e;\n        });\n      },\n          nu = (lu.prototype.catch = function (t) {\n        return this.next(void 0, t);\n      }, lu.prototype.next = function (r, i) {\n        var o = this;\n        return this.callbackAttached && Vr(), this.callbackAttached = !0, this.isDone ? this.error ? this.wrapFailure(i, this.error) : this.wrapSuccess(r, this.result) : new lu(function (e, n) {\n          o.nextCallback = function (t) {\n            o.wrapSuccess(r, t).next(e, n);\n          }, o.catchCallback = function (t) {\n            o.wrapFailure(i, t).next(e, n);\n          };\n        });\n      }, lu.prototype.toPromise = function () {\n        var n = this;\n        return new Promise(function (t, e) {\n          n.next(t, e);\n        });\n      }, lu.prototype.wrapUserFunction = function (t) {\n        try {\n          var e = t();\n          return e instanceof lu ? e : lu.resolve(e);\n        } catch (t) {\n          return lu.reject(t);\n        }\n      }, lu.prototype.wrapSuccess = function (t, e) {\n        return t ? this.wrapUserFunction(function () {\n          return t(e);\n        }) : lu.resolve(e);\n      }, lu.prototype.wrapFailure = function (t, e) {\n        return t ? this.wrapUserFunction(function () {\n          return t(e);\n        }) : lu.reject(e);\n      }, lu.resolve = function (n) {\n        return new lu(function (t, e) {\n          t(n);\n        });\n      }, lu.reject = function (n) {\n        return new lu(function (t, e) {\n          e(n);\n        });\n      }, lu.waitFor = function (t) {\n        return new lu(function (e, n) {\n          var r = 0,\n              i = 0,\n              o = !1;\n          t.forEach(function (t) {\n            ++r, t.next(function () {\n              ++i, o && i === r && e();\n            }, function (t) {\n              return n(t);\n            });\n          }), o = !0, i === r && e();\n        });\n      }, lu.or = function (t) {\n        for (var n = lu.resolve(!1), e = 0, r = t; e < r.length; e++) {\n          !function (e) {\n            n = n.next(function (t) {\n              return t ? lu.resolve(t) : e();\n            });\n          }(r[e]);\n        }\n\n        return n;\n      }, lu.forEach = function (t, n) {\n        var r = this,\n            i = [];\n        return t.forEach(function (t, e) {\n          i.push(n.call(r, t, e));\n        }), this.waitFor(i);\n      }, lu),\n          ru = (hu.open = function (t, e, n, r) {\n        try {\n          return new hu(e, t.transaction(r, n));\n        } catch (t) {\n          throw new su(e, t);\n        }\n      }, Object.defineProperty(hu.prototype, \"dt\", {\n        get: function get() {\n          return this.ft.promise;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), hu.prototype.abort = function (t) {\n        t && this.ft.reject(t), this.aborted || (Lr(\"SimpleDb\", \"Aborting transaction:\", t ? t.message : \"Client-initiated abort\"), this.aborted = !0, this.transaction.abort());\n      }, hu.prototype.store = function (t) {\n        t = this.transaction.objectStore(t);\n        return new pu(t);\n      }, hu),\n          iu = (cu.delete = function (t) {\n        return Lr(\"SimpleDb\", \"Removing database:\", t), gu(window.indexedDB.deleteDatabase(t)).toPromise();\n      }, cu.yt = function () {\n        if (\"undefined\" == typeof indexedDB) return !1;\n        if (cu.gt()) return !0;\n\n        var t = h(),\n            e = cu._t(t),\n            n = 0 < e && e < 10,\n            e = cu.Et(t),\n            e = 0 < e && e < 4.5;\n\n        return !(0 < t.indexOf(\"MSIE \") || 0 < t.indexOf(\"Trident/\") || 0 < t.indexOf(\"Edge/\") || n || e);\n      }, cu.gt = function () {\n        var t;\n        return \"undefined\" != typeof process && \"YES\" === (null === (t = process.env) || void 0 === t ? void 0 : t.Tt);\n      }, cu.It = function (t, e) {\n        return t.store(e);\n      }, cu._t = function (t) {\n        t = t.match(/i(?:phone|pad|pod) os ([\\d_]+)/i), t = t ? t[1].split(\"_\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(t);\n      }, cu.Et = function (t) {\n        t = t.match(/Android ([\\d.]+)/i), t = t ? t[1].split(\".\").slice(0, 2).join(\".\") : \"-1\";\n        return Number(t);\n      }, cu.prototype.At = function (o) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              i = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.db ? [3, 2] : (Lr(\"SimpleDb\", \"Opening database:\", this.name), e = this, [4, new Promise(function (e, n) {\n                  var r = indexedDB.open(i.name, i.version);\n                  r.onsuccess = function (t) {\n                    t = t.target.result;\n                    e(t);\n                  }, r.onblocked = function () {\n                    n(new su(o, \"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed.\"));\n                  }, r.onerror = function (t) {\n                    t = t.target.error;\n                    \"VersionError\" === t.name ? n(new kr(Cr.FAILED_PRECONDITION, \"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.\")) : n(new su(o, t));\n                  }, r.onupgradeneeded = function (t) {\n                    Lr(\"SimpleDb\", 'Database \"' + i.name + '\" requires upgrade from version:', t.oldVersion);\n                    var e = t.target.result;\n                    i.wt.Rt(e, r.transaction, t.oldVersion, i.version).next(function () {\n                      Lr(\"SimpleDb\", \"Database upgrade to version \" + i.version + \" complete\");\n                    });\n                  };\n                })]);\n\n              case 1:\n                e.db = t.sent(), t.label = 2;\n\n              case 2:\n                return [2, (this.bt && (this.db.onversionchange = function (t) {\n                  return i.bt(t);\n                }), this.db)];\n            }\n          });\n        });\n      }, cu.prototype.vt = function (e) {\n        this.bt = e, this.db && (this.db.onversionchange = function (t) {\n          return e(t);\n        });\n      }, cu.prototype.runTransaction = function (a, n, u, c) {\n        return y(this, void 0, void 0, function () {\n          var i, o, s, e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                i = \"readonly\" === n, o = 0, e = function e() {\n                  var e, n, r;\n                  return g(this, function (t) {\n                    switch (t.label) {\n                      case 0:\n                        ++o, t.label = 1;\n\n                      case 1:\n                        return t.trys.push([1, 4,, 5]), [4, s.At(a)];\n\n                      case 2:\n                        return s.db = t.sent(), e = ru.open(s.db, a, i ? \"readonly\" : \"readwrite\", u), n = c(e).catch(function (t) {\n                          return e.abort(t), nu.reject(t);\n                        }).toPromise(), r = {}, n.catch(function () {}), [4, e.dt];\n\n                      case 3:\n                        return [2, (r.value = (t.sent(), n), r)];\n\n                      case 4:\n                        return n = t.sent(), r = \"FirebaseError\" !== n.name && o < 3, Lr(\"SimpleDb\", \"Transaction failed with error:\", n.message, \"Retrying:\", r), s.close(), r ? [3, 5] : [2, {\n                          value: Promise.reject(n)\n                        }];\n\n                      case 5:\n                        return [2];\n                    }\n                  });\n                }, s = this, t.label = 1;\n\n              case 1:\n                return [5, e()];\n\n              case 2:\n                if (\"object\" == typeof (e = t.sent())) return [2, e.value];\n                t.label = 3;\n\n              case 3:\n                return [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }, cu.prototype.close = function () {\n        this.db && this.db.close(), this.db = void 0;\n      }, cu),\n          ou = (Object.defineProperty(uu.prototype, \"isDone\", {\n        get: function get() {\n          return this.Vt;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(uu.prototype, \"Dt\", {\n        get: function get() {\n          return this.St;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(uu.prototype, \"cursor\", {\n        set: function set(t) {\n          this.Pt = t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), uu.prototype.done = function () {\n        this.Vt = !0;\n      }, uu.prototype.Ct = function (t) {\n        this.St = t;\n      }, uu.prototype.delete = function () {\n        return gu(this.Pt.delete());\n      }, uu),\n          su = (n(au, $a = kr), au);\n\n      function au(t, e) {\n        var n = this;\n        return (n = $a.call(this, Cr.UNAVAILABLE, \"IndexedDB transaction '\" + t + \"' failed: \" + e) || this).name = \"IndexedDbTransactionError\", n;\n      }\n\n      function uu(t) {\n        this.Pt = t, this.Vt = !1, this.St = null;\n      }\n\n      function cu(t, e, n) {\n        this.name = t, this.version = e, this.wt = n, 12.2 === cu._t(h()) && Pr(\"Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n      }\n\n      function hu(e, t) {\n        var n = this;\n        this.action = e, this.transaction = t, this.aborted = !1, this.ft = new eu(), this.transaction.oncomplete = function () {\n          n.ft.resolve();\n        }, this.transaction.onabort = function () {\n          t.error ? n.ft.reject(new su(e, t.error)) : n.ft.resolve();\n        }, this.transaction.onerror = function (t) {\n          t = vu(t.target.error);\n          n.ft.reject(new su(e, t));\n        };\n      }\n\n      function lu(t) {\n        var e = this;\n        this.nextCallback = null, this.catchCallback = null, this.result = void 0, this.error = void 0, this.isDone = !1, this.callbackAttached = !1, t(function (t) {\n          e.isDone = !0, e.result = t, e.nextCallback && e.nextCallback(t);\n        }, function (t) {\n          e.isDone = !0, e.error = t, e.catchCallback && e.catchCallback(t);\n        });\n      }\n\n      function fu() {\n        this.onCommittedListeners = [];\n      }\n\n      function du(t) {\n        return \"IndexedDbTransactionError\" === t.name;\n      }\n\n      var pu = (yu.prototype.put = function (t, e) {\n        t = void 0 !== e ? (Lr(\"SimpleDb\", \"PUT\", this.store.name, t, e), this.store.put(e, t)) : (Lr(\"SimpleDb\", \"PUT\", this.store.name, \"<auto-key>\", t), this.store.put(t));\n        return gu(t);\n      }, yu.prototype.add = function (t) {\n        return Lr(\"SimpleDb\", \"ADD\", this.store.name, t, t), gu(this.store.add(t));\n      }, yu.prototype.get = function (e) {\n        var n = this;\n        return gu(this.store.get(e)).next(function (t) {\n          return void 0 === t && (t = null), Lr(\"SimpleDb\", \"GET\", n.store.name, e, t), t;\n        });\n      }, yu.prototype.delete = function (t) {\n        return Lr(\"SimpleDb\", \"DELETE\", this.store.name, t), gu(this.store.delete(t));\n      }, yu.prototype.count = function () {\n        return Lr(\"SimpleDb\", \"COUNT\", this.store.name), gu(this.store.count());\n      }, yu.prototype.Nt = function (t, e) {\n        var e = this.cursor(this.options(t, e)),\n            n = [];\n        return this.xt(e, function (t, e) {\n          n.push(e);\n        }).next(function () {\n          return n;\n        });\n      }, yu.prototype.Ft = function (t, e) {\n        Lr(\"SimpleDb\", \"DELETE ALL\", this.store.name);\n        e = this.options(t, e);\n        e.kt = !1;\n        e = this.cursor(e);\n        return this.xt(e, function (t, e, n) {\n          return n.delete();\n        });\n      }, yu.prototype.Ot = function (t, e) {\n        e ? n = t : (n = {}, e = t);\n        var n = this.cursor(n);\n        return this.xt(n, e);\n      }, yu.prototype.$t = function (r) {\n        var t = this.cursor({});\n        return new nu(function (n, e) {\n          t.onerror = function (t) {\n            t = vu(t.target.error);\n            e(t);\n          }, t.onsuccess = function (t) {\n            var e = t.target.result;\n            e ? r(e.primaryKey, e.value).next(function (t) {\n              t ? e.continue() : n();\n            }) : n();\n          };\n        });\n      }, yu.prototype.xt = function (t, i) {\n        var o = [];\n        return new nu(function (r, e) {\n          t.onerror = function (t) {\n            e(t.target.error);\n          }, t.onsuccess = function (t) {\n            var e,\n                n = t.target.result;\n            n ? (e = new ou(n), (t = i(n.primaryKey, n.value, e)) instanceof nu && (t = t.catch(function (t) {\n              return e.done(), nu.reject(t);\n            }), o.push(t)), e.isDone ? r() : null === e.Dt ? n.continue() : n.continue(e.Dt)) : r();\n          };\n        }).next(function () {\n          return nu.waitFor(o);\n        });\n      }, yu.prototype.options = function (t, e) {\n        var n;\n        return void 0 !== t && (\"string\" == typeof t ? n = t : e = t), {\n          index: n,\n          range: e\n        };\n      }, yu.prototype.cursor = function (t) {\n        var e = \"next\";\n\n        if (t.reverse && (e = \"prev\"), t.index) {\n          var n = this.store.index(t.index);\n          return t.kt ? n.openKeyCursor(t.range, e) : n.openCursor(t.range, e);\n        }\n\n        return this.store.openCursor(t.range, e);\n      }, yu);\n\n      function yu(t) {\n        this.store = t;\n      }\n\n      function gu(t) {\n        return new nu(function (e, n) {\n          t.onsuccess = function (t) {\n            t = t.target.result;\n            e(t);\n          }, t.onerror = function (t) {\n            t = vu(t.target.error);\n            n(t);\n          };\n        });\n      }\n\n      var mu = !1;\n\n      function vu(t) {\n        var e = iu._t(h());\n\n        if (12.2 <= e && e < 13) {\n          e = \"An internal error was encountered in the Indexed Database server\";\n\n          if (0 <= t.message.indexOf(e)) {\n            var n = new kr(\"internal\", \"IOS_INDEXEDDB_BUG1: IndexedDb has thrown '\" + e + \"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.\");\n            return mu || (mu = !0, setTimeout(function () {\n              throw n;\n            }, 0)), n;\n          }\n        }\n\n        return t;\n      }\n\n      var bu,\n          wu = (n(Eu, bu = Se), Eu);\n\n      function Eu(t, e) {\n        var n = this;\n        return (n = bu.call(this) || this).Mt = t, n.currentSequenceNumber = e, n;\n      }\n\n      function Tu(t, e) {\n        return iu.It(t.Mt, e);\n      }\n\n      var Iu = (Cu.prototype.applyToRemoteDocument = function (t, e) {\n        for (var n, r, i, o, s, a, u = e.mutationResults, c = 0; c < this.mutations.length; c++) {\n          var h = this.mutations[c];\n          h.key.isEqual(t.key) && (n = h, r = t, i = u[c], h = a = s = o = void 0, n instanceof ls ? (s = r, a = i, h = (o = n).value.clone(), o = gs(o.fieldTransforms, s, a.transformResults), h.setAll(o), s.convertToFoundDocument(a.version, h).setHasCommittedMutations()) : n instanceof fs ? (o = r, s = i, os((a = n).precondition, o) ? (h = gs(a.fieldTransforms, o, s.transformResults), (n = o.data).setAll(ys(a)), n.setAll(h), o.convertToFoundDocument(s.version, n).setHasCommittedMutations()) : o.convertToUnknownDocument(s.version)) : r.convertToNoDocument(i.version).setHasCommittedMutations());\n        }\n      }, Cu.prototype.applyToLocalView = function (t) {\n        for (var e = 0, n = this.baseMutations; e < n.length; e++) {\n          (r = n[e]).key.isEqual(t.key) && ss(r, t, this.localWriteTime);\n        }\n\n        for (var r, i = 0, o = this.mutations; i < o.length; i++) {\n          (r = o[i]).key.isEqual(t.key) && ss(r, t, this.localWriteTime);\n        }\n      }, Cu.prototype.applyToLocalDocumentSet = function (n) {\n        var r = this;\n        this.mutations.forEach(function (t) {\n          var e = n.get(t.key),\n              t = e;\n          r.applyToLocalView(t), e.isValidDocument() || t.convertToNoDocument(zr.min());\n        });\n      }, Cu.prototype.keys = function () {\n        return this.mutations.reduce(function (t, e) {\n          return t.add(e.key);\n        }, Ks());\n      }, Cu.prototype.isEqual = function (t) {\n        return this.batchId === t.batchId && Kr(this.mutations, t.mutations, as) && Kr(this.baseMutations, t.baseMutations, as);\n      }, Cu),\n          _u = (Du.from = function (t, e, n) {\n        Ur(t.mutations.length === n.length);\n\n        for (var r = Bs, i = t.mutations, o = 0; o < i.length; o++) {\n          r = r.insert(i[o].key, n[o].version);\n        }\n\n        return new Du(t, e, n, r);\n      }, Du),\n          Su = (Nu.prototype.withSequenceNumber = function (t) {\n        return new Nu(this.target, this.targetId, this.purpose, t, this.snapshotVersion, this.lastLimboFreeSnapshotVersion, this.resumeToken);\n      }, Nu.prototype.withResumeToken = function (t, e) {\n        return new Nu(this.target, this.targetId, this.purpose, this.sequenceNumber, e, this.lastLimboFreeSnapshotVersion, t);\n      }, Nu.prototype.withLastLimboFreeSnapshotVersion = function (t) {\n        return new Nu(this.target, this.targetId, this.purpose, this.sequenceNumber, this.snapshotVersion, t, this.resumeToken);\n      }, Nu),\n          Au = function Au(t) {\n        this.Lt = t;\n      };\n\n      function Nu(t, e, n, r, i, o, s) {\n        void 0 === i && (i = zr.min()), void 0 === o && (o = zr.min()), void 0 === s && (s = ii.EMPTY_BYTE_STRING), this.target = t, this.targetId = e, this.purpose = n, this.sequenceNumber = r, this.snapshotVersion = i, this.lastLimboFreeSnapshotVersion = o, this.resumeToken = s;\n      }\n\n      function Du(t, e, n, r) {\n        this.batch = t, this.commitVersion = e, this.mutationResults = n, this.docVersions = r;\n      }\n\n      function Cu(t, e, n, r) {\n        this.batchId = t, this.localWriteTime = e, this.baseMutations = n, this.mutations = r;\n      }\n\n      function ku(t, e) {\n        if (e.document) return ba(t.Lt, e.document, !!e.hasCommittedMutations);\n\n        if (e.noDocument) {\n          var n = bi.fromSegments(e.noDocument.path),\n              r = Pu(e.noDocument.readTime),\n              n = Pi.newNoDocument(n, r);\n          return e.hasCommittedMutations ? n.setHasCommittedMutations() : n;\n        }\n\n        if (e.unknownDocument) {\n          n = bi.fromSegments(e.unknownDocument.path), r = Pu(e.unknownDocument.version);\n          return Pi.newUnknownDocument(n, r);\n        }\n\n        return Vr();\n      }\n\n      function Ru(t, e, n) {\n        var r = xu(n),\n            n = e.key.path.popLast().toArray();\n\n        if (e.isFoundDocument()) {\n          var i = {\n            name: fa(o = t.Lt, (s = e).key),\n            fields: s.data.toProto().mapValue.fields,\n            updateTime: aa(o, s.version.toTimestamp())\n          },\n              o = e.hasCommittedMutations;\n          return new Ka(null, null, i, o, r, n);\n        }\n\n        if (e.isNoDocument()) {\n          var s = e.key.path.toArray(),\n              i = Lu(e.version),\n              o = e.hasCommittedMutations;\n          return new Ka(null, new Ba(s, i), null, o, r, n);\n        }\n\n        if (e.isUnknownDocument()) {\n          o = e.key.path.toArray(), e = Lu(e.version);\n          return new Ka(new ja(o, e), null, null, !0, r, n);\n        }\n\n        return Vr();\n      }\n\n      function xu(t) {\n        t = t.toTimestamp();\n        return [t.seconds, t.nanoseconds];\n      }\n\n      function Ou(t) {\n        t = new Qr(t[0], t[1]);\n        return zr.fromTimestamp(t);\n      }\n\n      function Lu(t) {\n        t = t.toTimestamp();\n        return new Ma(t.seconds, t.nanoseconds);\n      }\n\n      function Pu(t) {\n        t = new Qr(t.seconds, t.nanoseconds);\n        return zr.fromTimestamp(t);\n      }\n\n      function Mu(e, t) {\n        for (var n = (t.baseMutations || []).map(function (t) {\n          return Ea(e.Lt, t);\n        }), r = 0; r < t.mutations.length - 1; ++r) {\n          var i,\n              o = t.mutations[r];\n          r + 1 < t.mutations.length && void 0 !== t.mutations[r + 1].transform && (i = t.mutations[r + 1], o.updateTransforms = i.transform.fieldTransforms, t.mutations.splice(r + 1, 1), ++r);\n        }\n\n        var s = t.mutations.map(function (t) {\n          return Ea(e.Lt, t);\n        }),\n            a = Qr.fromMillis(t.localWriteTimeMs);\n        return new Iu(t.batchId, a, n, s);\n      }\n\n      function Fu(t) {\n        var e = Pu(t.readTime),\n            n = void 0 !== t.lastLimboFreeSnapshotVersion ? Pu(t.lastLimboFreeSnapshotVersion) : zr.min(),\n            r = void 0 !== t.query.documents ? (Ur(1 === (r = t.query).documents.length), Do(Eo(ya(r.documents[0])))) : Do(_a(t.query));\n        return new Su(r, t.targetId, 0, t.lastListenSequenceNumber, e, n, ii.fromBase64String(t.resumeToken));\n      }\n\n      function Vu(t, e) {\n        var n = Lu(e.snapshotVersion),\n            r = Lu(e.lastLimboFreeSnapshotVersion),\n            i = (Bi(e.target) ? Ta : Ia)(t.Lt, e.target),\n            t = e.resumeToken.toBase64();\n        return new Qa(e.targetId, Ui(e.target), n, t, e.sequenceNumber, r, i);\n      }\n\n      function Uu(t) {\n        var e = _a({\n          parent: t.parent,\n          structuredQuery: t.structuredQuery\n        });\n\n        return \"LAST\" === t.limitType ? Co(e, e.limit, \"L\") : e;\n      }\n\n      var qu = (Bu.prototype.getBundleMetadata = function (t, e) {\n        return ju(t).get(e).next(function (t) {\n          if (t) return {\n            id: (t = t).bundleId,\n            createTime: Pu(t.createTime),\n            version: t.version\n          };\n        });\n      }, Bu.prototype.saveBundleMetadata = function (t, e) {\n        return ju(t).put({\n          bundleId: (e = e).id,\n          createTime: Lu(ca(e.createTime)),\n          version: e.version\n        });\n      }, Bu.prototype.getNamedQuery = function (t, e) {\n        return Ku(t).get(e).next(function (t) {\n          if (t) return {\n            name: (t = t).name,\n            query: Uu(t.bundledQuery),\n            readTime: Pu(t.readTime)\n          };\n        });\n      }, Bu.prototype.saveNamedQuery = function (t, e) {\n        return Ku(t).put({\n          name: (e = e).name,\n          readTime: Lu(ca(e.readTime)),\n          bundledQuery: e.bundledQuery\n        });\n      }, Bu);\n\n      function Bu() {}\n\n      function ju(t) {\n        return Tu(t, Xa.store);\n      }\n\n      function Ku(t) {\n        return Tu(t, Ja.store);\n      }\n\n      var Gu = (Yu.prototype.addToCollectionParentIndex = function (t, e) {\n        return this.Bt.add(e), nu.resolve();\n      }, Yu.prototype.getCollectionParents = function (t, e) {\n        return nu.resolve(this.Bt.getEntries(e));\n      }, Yu),\n          Qu = (Wu.prototype.add = function (t) {\n        var e = t.lastSegment(),\n            n = t.popLast(),\n            r = this.index[e] || new Ps(ti.comparator),\n            t = !r.has(n);\n        return this.index[e] = r.add(n), t;\n      }, Wu.prototype.has = function (t) {\n        var e = t.lastSegment(),\n            t = t.popLast(),\n            e = this.index[e];\n        return e && e.has(t);\n      }, Wu.prototype.getEntries = function (t) {\n        return (this.index[t] || new Ps(ti.comparator)).toArray();\n      }, Wu),\n          zu = (Hu.prototype.addToCollectionParentIndex = function (t, e) {\n        var n = this;\n        if (this.qt.has(e)) return nu.resolve();\n        var r = e.lastSegment(),\n            i = e.popLast();\n        t.addOnCommittedListener(function () {\n          n.qt.add(e);\n        });\n        i = {\n          collectionId: r,\n          parent: xa(i)\n        };\n        return Xu(t).put(i);\n      }, Hu.prototype.getCollectionParents = function (t, i) {\n        var o = [],\n            e = IDBKeyRange.bound([i, \"\"], [Gr(i), \"\"], !1, !0);\n        return Xu(t).Nt(e).next(function (t) {\n          for (var e = 0, n = t; e < n.length; e++) {\n            var r = n[e];\n            if (r.collectionId !== i) break;\n            o.push(La(r.parent));\n          }\n\n          return o;\n        });\n      }, Hu);\n\n      function Hu() {\n        this.qt = new Qu();\n      }\n\n      function Wu() {\n        this.index = {};\n      }\n\n      function Yu() {\n        this.Bt = new Qu();\n      }\n\n      function Xu(t) {\n        return Tu(t, Wa.store);\n      }\n\n      var Ju = {\n        didRun: !1,\n        sequenceNumbersCollected: 0,\n        targetsRemoved: 0,\n        documentsRemoved: 0\n      },\n          $u = (Zu.withCacheSize = function (t) {\n        return new Zu(t, Zu.DEFAULT_COLLECTION_PERCENTILE, Zu.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);\n      }, Zu);\n\n      function Zu(t, e, n) {\n        this.cacheSizeCollectionThreshold = t, this.percentileToCollect = e, this.maximumSequenceNumbersToCollect = n;\n      }\n\n      function tc(t, e, n) {\n        var r = t.store(Va.store),\n            i = t.store(Ua.store),\n            o = [],\n            t = IDBKeyRange.only(n.batchId),\n            s = 0,\n            t = r.Ot({\n          range: t\n        }, function (t, e, n) {\n          return s++, n.delete();\n        });\n        o.push(t.next(function () {\n          Ur(1 === s);\n        }));\n\n        for (var a = [], u = 0, c = n.mutations; u < c.length; u++) {\n          var h = c[u],\n              l = Ua.key(e, h.key.path, n.batchId);\n          o.push(i.delete(l)), a.push(h.key);\n        }\n\n        return nu.waitFor(o).next(function () {\n          return a;\n        });\n      }\n\n      function ec(t) {\n        if (!t) return 0;\n        var e;\n        if (t.document) e = t.document;else if (t.unknownDocument) e = t.unknownDocument;else {\n          if (!t.noDocument) throw Vr();\n          e = t.noDocument;\n        }\n        return JSON.stringify(e).length;\n      }\n\n      $u.DEFAULT_COLLECTION_PERCENTILE = 10, $u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT = 1e3, $u.DEFAULT = new $u(41943040, $u.DEFAULT_COLLECTION_PERCENTILE, $u.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT), $u.DISABLED = new $u(-1, 0, 0);\n      var nc = (rc.Kt = function (t, e, n, r) {\n        return Ur(\"\" !== t.uid), new rc(t.isAuthenticated() ? t.uid : \"\", e, n, r);\n      }, rc.prototype.checkEmpty = function (t) {\n        var r = !0,\n            e = IDBKeyRange.bound([this.userId, Number.NEGATIVE_INFINITY], [this.userId, Number.POSITIVE_INFINITY]);\n        return oc(t).Ot({\n          index: Va.userMutationsIndex,\n          range: e\n        }, function (t, e, n) {\n          r = !1, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, rc.prototype.addMutationBatch = function (p, y, g, m) {\n        var v = this,\n            b = sc(p),\n            w = oc(p);\n        return w.add({}).next(function (t) {\n          Ur(\"number\" == typeof t);\n\n          for (var e, n, r, i, o, s = new Iu(t, y, g, m), a = (e = v.R, n = v.userId, i = (r = s).baseMutations.map(function (t) {\n            return wa(e.Lt, t);\n          }), o = r.mutations.map(function (t) {\n            return wa(e.Lt, t);\n          }), new Va(n, r.batchId, r.localWriteTime.toMillis(), i, o)), u = [], c = new Ps(function (t, e) {\n            return jr(t.canonicalString(), e.canonicalString());\n          }), h = 0, l = m; h < l.length; h++) {\n            var f = l[h],\n                d = Ua.key(v.userId, f.key.path, t),\n                c = c.add(f.key.path.popLast());\n            u.push(w.put(a)), u.push(b.put(d, Ua.PLACEHOLDER));\n          }\n\n          return c.forEach(function (t) {\n            u.push(v.Ut.addToCollectionParentIndex(p, t));\n          }), p.addOnCommittedListener(function () {\n            v.Qt[t] = s.keys();\n          }), nu.waitFor(u).next(function () {\n            return s;\n          });\n        });\n      }, rc.prototype.lookupMutationBatch = function (t, e) {\n        var n = this;\n        return oc(t).get(e).next(function (t) {\n          return t ? (Ur(t.userId === n.userId), Mu(n.R, t)) : null;\n        });\n      }, rc.prototype.jt = function (t, e) {\n        var n = this;\n        return this.Qt[e] ? nu.resolve(this.Qt[e]) : this.lookupMutationBatch(t, e).next(function (t) {\n          if (t) {\n            t = t.keys();\n            return n.Qt[e] = t;\n          }\n\n          return null;\n        });\n      }, rc.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n        var r = this,\n            i = e + 1,\n            e = IDBKeyRange.lowerBound([this.userId, i]),\n            o = null;\n        return oc(t).Ot({\n          index: Va.userMutationsIndex,\n          range: e\n        }, function (t, e, n) {\n          e.userId === r.userId && (Ur(e.batchId >= i), o = Mu(r.R, e)), n.done();\n        }).next(function () {\n          return o;\n        });\n      }, rc.prototype.getHighestUnacknowledgedBatchId = function (t) {\n        var e = IDBKeyRange.upperBound([this.userId, Number.POSITIVE_INFINITY]),\n            r = -1;\n        return oc(t).Ot({\n          index: Va.userMutationsIndex,\n          range: e,\n          reverse: !0\n        }, function (t, e, n) {\n          r = e.batchId, n.done();\n        }).next(function () {\n          return r;\n        });\n      }, rc.prototype.getAllMutationBatches = function (t) {\n        var e = this,\n            n = IDBKeyRange.bound([this.userId, -1], [this.userId, Number.POSITIVE_INFINITY]);\n        return oc(t).Nt(Va.userMutationsIndex, n).next(function (t) {\n          return t.map(function (t) {\n            return Mu(e.R, t);\n          });\n        });\n      }, rc.prototype.getAllMutationBatchesAffectingDocumentKey = function (o, s) {\n        var a = this,\n            t = Ua.prefixForPath(this.userId, s.path),\n            t = IDBKeyRange.lowerBound(t),\n            u = [];\n        return sc(o).Ot({\n          range: t\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              t = t[2],\n              i = La(i);\n          if (r === a.userId && s.path.isEqual(i)) return oc(o).get(t).next(function (t) {\n            if (!t) throw Vr();\n            Ur(t.userId === a.userId), u.push(Mu(a.R, t));\n          });\n          n.done();\n        }).next(function () {\n          return u;\n        });\n      }, rc.prototype.getAllMutationBatchesAffectingDocumentKeys = function (e, t) {\n        var s = this,\n            a = new Ps(jr),\n            n = [];\n        return t.forEach(function (o) {\n          var t = Ua.prefixForPath(s.userId, o.path),\n              t = IDBKeyRange.lowerBound(t),\n              t = sc(e).Ot({\n            range: t\n          }, function (t, e, n) {\n            var r = t[0],\n                i = t[1],\n                t = t[2],\n                i = La(i);\n            r === s.userId && o.path.isEqual(i) ? a = a.add(t) : n.done();\n          });\n          n.push(t);\n        }), nu.waitFor(n).next(function () {\n          return s.Wt(e, a);\n        });\n      }, rc.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n        var o = this,\n            s = e.path,\n            a = s.length + 1,\n            e = Ua.prefixForPath(this.userId, s),\n            e = IDBKeyRange.lowerBound(e),\n            u = new Ps(jr);\n        return sc(t).Ot({\n          range: e\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1],\n              t = t[2],\n              i = La(i);\n          r === o.userId && s.isPrefixOf(i) ? i.length === a && (u = u.add(t)) : n.done();\n        }).next(function () {\n          return o.Wt(t, u);\n        });\n      }, rc.prototype.Wt = function (e, t) {\n        var n = this,\n            r = [],\n            i = [];\n        return t.forEach(function (t) {\n          i.push(oc(e).get(t).next(function (t) {\n            if (null === t) throw Vr();\n            Ur(t.userId === n.userId), r.push(Mu(n.R, t));\n          }));\n        }), nu.waitFor(i).next(function () {\n          return r;\n        });\n      }, rc.prototype.removeMutationBatch = function (e, n) {\n        var r = this;\n        return tc(e.Mt, this.userId, n).next(function (t) {\n          return e.addOnCommittedListener(function () {\n            r.Gt(n.batchId);\n          }), nu.forEach(t, function (t) {\n            return r.referenceDelegate.markPotentiallyOrphaned(e, t);\n          });\n        });\n      }, rc.prototype.Gt = function (t) {\n        delete this.Qt[t];\n      }, rc.prototype.performConsistencyCheck = function (e) {\n        var i = this;\n        return this.checkEmpty(e).next(function (t) {\n          if (!t) return nu.resolve();\n          var t = IDBKeyRange.lowerBound(Ua.prefixForUser(i.userId)),\n              r = [];\n          return sc(e).Ot({\n            range: t\n          }, function (t, e, n) {\n            t[0] === i.userId ? (t = La(t[1]), r.push(t)) : n.done();\n          }).next(function () {\n            Ur(0 === r.length);\n          });\n        });\n      }, rc.prototype.containsKey = function (t, e) {\n        return ic(t, this.userId, e);\n      }, rc.prototype.zt = function (t) {\n        var e = this;\n        return ac(t).get(this.userId).next(function (t) {\n          return t || new Fa(e.userId, -1, \"\");\n        });\n      }, rc);\n\n      function rc(t, e, n, r) {\n        this.userId = t, this.R = e, this.Ut = n, this.referenceDelegate = r, this.Qt = {};\n      }\n\n      function ic(t, o, e) {\n        var e = Ua.prefixForPath(o, e.path),\n            s = e[1],\n            e = IDBKeyRange.lowerBound(e),\n            a = !1;\n        return sc(t).Ot({\n          range: e,\n          kt: !0\n        }, function (t, e, n) {\n          var r = t[0],\n              i = t[1];\n          t[2], r === o && i === s && (a = !0), n.done();\n        }).next(function () {\n          return a;\n        });\n      }\n\n      function oc(t) {\n        return Tu(t, Va.store);\n      }\n\n      function sc(t) {\n        return Tu(t, Ua.store);\n      }\n\n      function ac(t) {\n        return Tu(t, Fa.store);\n      }\n\n      var uc = (lc.prototype.next = function () {\n        return this.Ht += 2, this.Ht;\n      }, lc.Jt = function () {\n        return new lc(0);\n      }, lc.Yt = function () {\n        return new lc(-1);\n      }, lc),\n          cc = (hc.prototype.allocateTargetId = function (n) {\n        var r = this;\n        return this.Xt(n).next(function (t) {\n          var e = new uc(t.highestTargetId);\n          return t.highestTargetId = e.next(), r.Zt(n, t).next(function () {\n            return t.highestTargetId;\n          });\n        });\n      }, hc.prototype.getLastRemoteSnapshotVersion = function (t) {\n        return this.Xt(t).next(function (t) {\n          return zr.fromTimestamp(new Qr(t.lastRemoteSnapshotVersion.seconds, t.lastRemoteSnapshotVersion.nanoseconds));\n        });\n      }, hc.prototype.getHighestSequenceNumber = function (t) {\n        return this.Xt(t).next(function (t) {\n          return t.highestListenSequenceNumber;\n        });\n      }, hc.prototype.setTargetsMetadata = function (e, n, r) {\n        var i = this;\n        return this.Xt(e).next(function (t) {\n          return t.highestListenSequenceNumber = n, r && (t.lastRemoteSnapshotVersion = r.toTimestamp()), n > t.highestListenSequenceNumber && (t.highestListenSequenceNumber = n), i.Zt(e, t);\n        });\n      }, hc.prototype.addTargetData = function (e, n) {\n        var r = this;\n        return this.te(e, n).next(function () {\n          return r.Xt(e).next(function (t) {\n            return t.targetCount += 1, r.ee(n, t), r.Zt(e, t);\n          });\n        });\n      }, hc.prototype.updateTargetData = function (t, e) {\n        return this.te(t, e);\n      }, hc.prototype.removeTargetData = function (e, t) {\n        var n = this;\n        return this.removeMatchingKeysForTargetId(e, t.targetId).next(function () {\n          return fc(e).delete(t.targetId);\n        }).next(function () {\n          return n.Xt(e);\n        }).next(function (t) {\n          return Ur(0 < t.targetCount), --t.targetCount, n.Zt(e, t);\n        });\n      }, hc.prototype.removeTargets = function (n, r, i) {\n        var o = this,\n            s = 0,\n            a = [];\n        return fc(n).Ot(function (t, e) {\n          e = Fu(e);\n          e.sequenceNumber <= r && null === i.get(e.targetId) && (s++, a.push(o.removeTargetData(n, e)));\n        }).next(function () {\n          return nu.waitFor(a);\n        }).next(function () {\n          return s;\n        });\n      }, hc.prototype.forEachTarget = function (t, n) {\n        return fc(t).Ot(function (t, e) {\n          e = Fu(e);\n          n(e);\n        });\n      }, hc.prototype.Xt = function (t) {\n        return dc(t).get(Ha.key).next(function (t) {\n          return Ur(null !== t), t;\n        });\n      }, hc.prototype.Zt = function (t, e) {\n        return dc(t).put(Ha.key, e);\n      }, hc.prototype.te = function (t, e) {\n        return fc(t).put(Vu(this.R, e));\n      }, hc.prototype.ee = function (t, e) {\n        var n = !1;\n        return t.targetId > e.highestTargetId && (e.highestTargetId = t.targetId, n = !0), t.sequenceNumber > e.highestListenSequenceNumber && (e.highestListenSequenceNumber = t.sequenceNumber, n = !0), n;\n      }, hc.prototype.getTargetCount = function (t) {\n        return this.Xt(t).next(function (t) {\n          return t.targetCount;\n        });\n      }, hc.prototype.getTargetData = function (t, r) {\n        var e = Ui(r),\n            e = IDBKeyRange.bound([e, Number.NEGATIVE_INFINITY], [e, Number.POSITIVE_INFINITY]),\n            i = null;\n        return fc(t).Ot({\n          range: e,\n          index: Qa.queryTargetsIndexName\n        }, function (t, e, n) {\n          e = Fu(e);\n          qi(r, e.target) && (i = e, n.done());\n        }).next(function () {\n          return i;\n        });\n      }, hc.prototype.addMatchingKeys = function (n, t, r) {\n        var i = this,\n            o = [],\n            s = pc(n);\n        return t.forEach(function (t) {\n          var e = xa(t.path);\n          o.push(s.put(new za(r, e))), o.push(i.referenceDelegate.addReference(n, r, t));\n        }), nu.waitFor(o);\n      }, hc.prototype.removeMatchingKeys = function (n, t, r) {\n        var i = this,\n            o = pc(n);\n        return nu.forEach(t, function (t) {\n          var e = xa(t.path);\n          return nu.waitFor([o.delete([r, e]), i.referenceDelegate.removeReference(n, r, t)]);\n        });\n      }, hc.prototype.removeMatchingKeysForTargetId = function (t, e) {\n        t = pc(t), e = IDBKeyRange.bound([e], [e + 1], !1, !0);\n        return t.delete(e);\n      }, hc.prototype.getMatchingKeysForTargetId = function (t, e) {\n        var e = IDBKeyRange.bound([e], [e + 1], !1, !0),\n            t = pc(t),\n            r = Ks();\n        return t.Ot({\n          range: e,\n          kt: !0\n        }, function (t, e, n) {\n          t = La(t[1]), t = new bi(t);\n          r = r.add(t);\n        }).next(function () {\n          return r;\n        });\n      }, hc.prototype.containsKey = function (t, e) {\n        var e = xa(e.path),\n            e = IDBKeyRange.bound([e], [Gr(e)], !1, !0),\n            i = 0;\n        return pc(t).Ot({\n          index: za.documentTargetsIndex,\n          kt: !0,\n          range: e\n        }, function (t, e, n) {\n          var r = t[0];\n          t[1], 0 !== r && (i++, n.done());\n        }).next(function () {\n          return 0 < i;\n        });\n      }, hc.prototype.lt = function (t, e) {\n        return fc(t).get(e).next(function (t) {\n          return t ? Fu(t) : null;\n        });\n      }, hc);\n\n      function hc(t, e) {\n        this.referenceDelegate = t, this.R = e;\n      }\n\n      function lc(t) {\n        this.Ht = t;\n      }\n\n      function fc(t) {\n        return Tu(t, Qa.store);\n      }\n\n      function dc(t) {\n        return Tu(t, Ha.store);\n      }\n\n      function pc(t) {\n        return Tu(t, za.store);\n      }\n\n      function yc(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            if (e.code !== Cr.FAILED_PRECONDITION || e.message !== tu) throw e;\n            return Lr(\"LocalStore\", \"Unexpectedly lost primary lease\"), [2];\n          });\n        });\n      }\n\n      function gc(t, e) {\n        var n = t[0],\n            r = t[1],\n            t = e[0],\n            e = e[1],\n            t = jr(n, t);\n        return 0 === t ? jr(r, e) : t;\n      }\n\n      var mc = (_c.prototype.ie = function () {\n        return ++this.se;\n      }, _c.prototype.re = function (t) {\n        var e = [t, this.ie()];\n        this.buffer.size < this.ne ? this.buffer = this.buffer.add(e) : gc(e, t = this.buffer.last()) < 0 && (this.buffer = this.buffer.delete(t).add(e));\n      }, Object.defineProperty(_c.prototype, \"maxValue\", {\n        get: function get() {\n          return this.buffer.last()[0];\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _c),\n          vc = (Ic.prototype.start = function (t) {\n        -1 !== this.garbageCollector.params.cacheSizeCollectionThreshold && this.ue(t);\n      }, Ic.prototype.stop = function () {\n        this.ce && (this.ce.cancel(), this.ce = null);\n      }, Object.defineProperty(Ic.prototype, \"started\", {\n        get: function get() {\n          return null !== this.ce;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ic.prototype.ue = function (n) {\n        var t = this,\n            e = this.oe ? 3e5 : 6e4;\n        Lr(\"LruGarbageCollector\", \"Garbage collection scheduled in \" + e + \"ms\"), this.ce = this.asyncQueue.enqueueAfterDelay(\"lru_garbage_collection\", e, function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  this.ce = null, this.oe = !0, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 3,, 7]), [4, n.collectGarbage(this.garbageCollector)];\n\n                case 2:\n                  return t.sent(), [3, 7];\n\n                case 3:\n                  return du(e = t.sent()) ? (Lr(\"LruGarbageCollector\", \"Ignoring IndexedDB error during garbage collection: \", e), [3, 6]) : [3, 4];\n\n                case 4:\n                  return [4, yc(e)];\n\n                case 5:\n                  t.sent(), t.label = 6;\n\n                case 6:\n                  return [3, 7];\n\n                case 7:\n                  return [4, this.ue(n)];\n\n                case 8:\n                  return t.sent(), [2];\n              }\n            });\n          });\n        });\n      }, Ic),\n          bc = (Tc.prototype.calculateTargetCount = function (t, e) {\n        return this.ae.he(t).next(function (t) {\n          return Math.floor(e / 100 * t);\n        });\n      }, Tc.prototype.nthSequenceNumber = function (t, e) {\n        var n = this;\n        if (0 === e) return nu.resolve(Ar.o);\n        var r = new mc(e);\n        return this.ae.forEachTarget(t, function (t) {\n          return r.re(t.sequenceNumber);\n        }).next(function () {\n          return n.ae.le(t, function (t) {\n            return r.re(t);\n          });\n        }).next(function () {\n          return r.maxValue;\n        });\n      }, Tc.prototype.removeTargets = function (t, e, n) {\n        return this.ae.removeTargets(t, e, n);\n      }, Tc.prototype.removeOrphanedDocuments = function (t, e) {\n        return this.ae.removeOrphanedDocuments(t, e);\n      }, Tc.prototype.collect = function (e, n) {\n        var r = this;\n        return -1 === this.params.cacheSizeCollectionThreshold ? (Lr(\"LruGarbageCollector\", \"Garbage collection skipped; disabled\"), nu.resolve(Ju)) : this.getCacheSize(e).next(function (t) {\n          return t < r.params.cacheSizeCollectionThreshold ? (Lr(\"LruGarbageCollector\", \"Garbage collection skipped; Cache size \" + t + \" is lower than threshold \" + r.params.cacheSizeCollectionThreshold), Ju) : r.fe(e, n);\n        });\n      }, Tc.prototype.getCacheSize = function (t) {\n        return this.ae.getCacheSize(t);\n      }, Tc.prototype.fe = function (e, n) {\n        var r,\n            i,\n            o,\n            s,\n            a,\n            u,\n            c,\n            h = this,\n            l = Date.now();\n        return this.calculateTargetCount(e, this.params.percentileToCollect).next(function (t) {\n          return i = t > h.params.maximumSequenceNumbersToCollect ? (Lr(\"LruGarbageCollector\", \"Capping sequence numbers to collect down to the maximum of \" + h.params.maximumSequenceNumbersToCollect + \" from \" + t), h.params.maximumSequenceNumbersToCollect) : t, s = Date.now(), h.nthSequenceNumber(e, i);\n        }).next(function (t) {\n          return r = t, a = Date.now(), h.removeTargets(e, r, n);\n        }).next(function (t) {\n          return o = t, u = Date.now(), h.removeOrphanedDocuments(e, r);\n        }).next(function (t) {\n          return c = Date.now(), Or() <= p.DEBUG && Lr(\"LruGarbageCollector\", \"LRU Garbage Collection\\n\\tCounted targets in \" + (s - l) + \"ms\\n\\tDetermined least recently used \" + i + \" in \" + (a - s) + \"ms\\n\\tRemoved \" + o + \" targets in \" + (u - a) + \"ms\\n\\tRemoved \" + t + \" documents in \" + (c - u) + \"ms\\nTotal Duration: \" + (c - l) + \"ms\"), nu.resolve({\n            didRun: !0,\n            sequenceNumbersCollected: i,\n            targetsRemoved: o,\n            documentsRemoved: t\n          });\n        });\n      }, Tc),\n          wc = (Ec.prototype.he = function (t) {\n        var n = this.de(t);\n        return this.db.getTargetCache().getTargetCount(t).next(function (e) {\n          return n.next(function (t) {\n            return e + t;\n          });\n        });\n      }, Ec.prototype.de = function (t) {\n        var e = 0;\n        return this.le(t, function (t) {\n          e++;\n        }).next(function () {\n          return e;\n        });\n      }, Ec.prototype.forEachTarget = function (t, e) {\n        return this.db.getTargetCache().forEachTarget(t, e);\n      }, Ec.prototype.le = function (t, n) {\n        return this.we(t, function (t, e) {\n          return n(e);\n        });\n      }, Ec.prototype.addReference = function (t, e, n) {\n        return Sc(t, n);\n      }, Ec.prototype.removeReference = function (t, e, n) {\n        return Sc(t, n);\n      }, Ec.prototype.removeTargets = function (t, e, n) {\n        return this.db.getTargetCache().removeTargets(t, e, n);\n      }, Ec.prototype.markPotentiallyOrphaned = Sc, Ec.prototype._e = function (t, e) {\n        return r = e, i = !1, ac(n = t).$t(function (t) {\n          return ic(n, t, r).next(function (t) {\n            return t && (i = !0), nu.resolve(!t);\n          });\n        }).next(function () {\n          return i;\n        });\n        var n, r, i;\n      }, Ec.prototype.removeOrphanedDocuments = function (n, r) {\n        var i = this,\n            o = this.db.getRemoteDocumentCache().newChangeBuffer(),\n            s = [],\n            a = 0;\n        return this.we(n, function (e, t) {\n          t <= r && (t = i._e(n, e).next(function (t) {\n            if (!t) return a++, o.getEntry(n, e).next(function () {\n              return o.removeEntry(e), pc(n).delete([0, xa(e.path)]);\n            });\n          }), s.push(t));\n        }).next(function () {\n          return nu.waitFor(s);\n        }).next(function () {\n          return o.apply(n);\n        }).next(function () {\n          return a;\n        });\n      }, Ec.prototype.removeTarget = function (t, e) {\n        e = e.withSequenceNumber(t.currentSequenceNumber);\n        return this.db.getTargetCache().updateTargetData(t, e);\n      }, Ec.prototype.updateLimboDocument = Sc, Ec.prototype.we = function (t, r) {\n        var i,\n            t = pc(t),\n            o = Ar.o;\n        return t.Ot({\n          index: za.documentTargetsIndex\n        }, function (t, e) {\n          var n = t[0],\n              t = (t[1], e.path),\n              e = e.sequenceNumber;\n          0 === n ? (o !== Ar.o && r(new bi(La(i)), o), o = e, i = t) : o = Ar.o;\n        }).next(function () {\n          o !== Ar.o && r(new bi(La(i)), o);\n        });\n      }, Ec.prototype.getCacheSize = function (t) {\n        return this.db.getRemoteDocumentCache().getSize(t);\n      }, Ec);\n\n      function Ec(t, e) {\n        this.db = t, this.garbageCollector = new bc(this, e);\n      }\n\n      function Tc(t, e) {\n        this.ae = t, this.params = e;\n      }\n\n      function Ic(t, e) {\n        this.garbageCollector = t, this.asyncQueue = e, this.oe = !1, this.ce = null;\n      }\n\n      function _c(t) {\n        this.ne = t, this.buffer = new Ps(gc), this.se = 0;\n      }\n\n      function Sc(t, e) {\n        return pc(t).put((t = t.currentSequenceNumber, new za(0, xa(e.path), t)));\n      }\n\n      var Ac,\n          Nc = (Oc.prototype.get = function (t) {\n        var e = this.mapKeyFn(t),\n            e = this.inner[e];\n        if (void 0 !== e) for (var n = 0, r = e; n < r.length; n++) {\n          var i = r[n],\n              o = i[0],\n              i = i[1];\n          if (this.equalsFn(o, t)) return i;\n        }\n      }, Oc.prototype.has = function (t) {\n        return void 0 !== this.get(t);\n      }, Oc.prototype.set = function (t, e) {\n        var n = this.mapKeyFn(t),\n            r = this.inner[n];\n\n        if (void 0 !== r) {\n          for (var i = 0; i < r.length; i++) {\n            if (this.equalsFn(r[i][0], t)) return void (r[i] = [t, e]);\n          }\n\n          r.push([t, e]);\n        } else this.inner[n] = [[t, e]];\n      }, Oc.prototype.delete = function (t) {\n        var e = this.mapKeyFn(t),\n            n = this.inner[e];\n        if (void 0 === n) return !1;\n\n        for (var r = 0; r < n.length; r++) {\n          if (this.equalsFn(n[r][0], t)) return 1 === n.length ? delete this.inner[e] : n.splice(r, 1), !0;\n        }\n\n        return !1;\n      }, Oc.prototype.forEach = function (s) {\n        Xr(this.inner, function (t, e) {\n          for (var n = 0, r = e; n < r.length; n++) {\n            var i = r[n],\n                o = i[0],\n                i = i[1];\n            s(o, i);\n          }\n        });\n      }, Oc.prototype.isEmpty = function () {\n        return Jr(this.inner);\n      }, Oc),\n          I = (xc.prototype.getReadTime = function (t) {\n        t = this.changes.get(t);\n        return t ? t.readTime : zr.min();\n      }, xc.prototype.addEntry = function (t, e) {\n        this.assertNotApplied(), this.changes.set(t.key, {\n          document: t,\n          readTime: e\n        });\n      }, xc.prototype.removeEntry = function (t, e) {\n        void 0 === e && (e = null), this.assertNotApplied(), this.changes.set(t, {\n          document: Pi.newInvalidDocument(t),\n          readTime: e\n        });\n      }, xc.prototype.getEntry = function (t, e) {\n        this.assertNotApplied();\n        var n = this.changes.get(e);\n        return void 0 !== n ? nu.resolve(n.document) : this.getFromCache(t, e);\n      }, xc.prototype.getEntries = function (t, e) {\n        return this.getAllFromCache(t, e);\n      }, xc.prototype.apply = function (t) {\n        return this.assertNotApplied(), this.changesApplied = !0, this.applyChanges(t);\n      }, xc.prototype.assertNotApplied = function () {}, xc),\n          Dc = (Rc.prototype.addEntry = function (t, e, n) {\n        return Pc(t).put(Mc(e), n);\n      }, Rc.prototype.removeEntry = function (t, e) {\n        t = Pc(t), e = Mc(e);\n        return t.delete(e);\n      }, Rc.prototype.updateMetadata = function (e, n) {\n        var r = this;\n        return this.getMetadata(e).next(function (t) {\n          return t.byteSize += n, r.me(e, t);\n        });\n      }, Rc.prototype.getEntry = function (t, e) {\n        var n = this;\n        return Pc(t).get(Mc(e)).next(function (t) {\n          return n.ye(e, t);\n        });\n      }, Rc.prototype.ge = function (t, e) {\n        var n = this;\n        return Pc(t).get(Mc(e)).next(function (t) {\n          return {\n            document: n.ye(e, t),\n            size: ec(t)\n          };\n        });\n      }, Rc.prototype.getEntries = function (t, e) {\n        var n = this,\n            r = Fs;\n        return this.pe(t, e, function (t, e) {\n          e = n.ye(t, e);\n          r = r.insert(t, e);\n        }).next(function () {\n          return r;\n        });\n      }, Rc.prototype.Ee = function (t, e) {\n        var r = this,\n            i = Fs,\n            o = new Ds(bi.comparator);\n        return this.pe(t, e, function (t, e) {\n          var n = r.ye(t, e);\n          i = i.insert(t, n), o = o.insert(t, ec(e));\n        }).next(function () {\n          return {\n            documents: i,\n            Te: o\n          };\n        });\n      }, Rc.prototype.pe = function (t, e, i) {\n        if (e.isEmpty()) return nu.resolve();\n        var n = IDBKeyRange.bound(e.first().path.toArray(), e.last().path.toArray()),\n            o = e.getIterator(),\n            s = o.getNext();\n        return Pc(t).Ot({\n          range: n\n        }, function (t, e, n) {\n          for (var r = bi.fromSegments(t); s && bi.comparator(s, r) < 0;) {\n            i(s, null), s = o.getNext();\n          }\n\n          s && s.isEqual(r) && (i(s, e), s = o.hasNext() ? o.getNext() : null), s ? n.Ct(s.path.toArray()) : n.done();\n        }).next(function () {\n          for (; s;) {\n            i(s, null), s = o.hasNext() ? o.getNext() : null;\n          }\n        });\n      }, Rc.prototype.getDocumentsMatchingQuery = function (t, r, e) {\n        var n,\n            i = this,\n            o = Fs,\n            s = r.path.length + 1,\n            a = {};\n        return e.isEqual(zr.min()) ? (n = r.path.toArray(), a.range = IDBKeyRange.lowerBound(n)) : (n = r.path.toArray(), e = xu(e), a.range = IDBKeyRange.lowerBound([n, e], !0), a.index = Ka.collectionReadTimeIndex), Pc(t).Ot(a, function (t, e, n) {\n          t.length === s && (e = ku(i.R, e), r.path.isPrefixOf(e.key.path) ? Oo(r, e) && (o = o.insert(e.key, e)) : n.done());\n        }).next(function () {\n          return o;\n        });\n      }, Rc.prototype.newChangeBuffer = function (t) {\n        return new Cc(this, !!t && t.trackRemovals);\n      }, Rc.prototype.getSize = function (t) {\n        return this.getMetadata(t).next(function (t) {\n          return t.byteSize;\n        });\n      }, Rc.prototype.getMetadata = function (t) {\n        return Lc(t).get(Ga.key).next(function (t) {\n          return Ur(!!t), t;\n        });\n      }, Rc.prototype.me = function (t, e) {\n        return Lc(t).put(Ga.key, e);\n      }, Rc.prototype.ye = function (t, e) {\n        if (e) {\n          e = ku(this.R, e);\n          if (!e.isNoDocument() || !e.version.isEqual(zr.min())) return e;\n        }\n\n        return Pi.newInvalidDocument(t);\n      }, Rc),\n          Cc = (n(kc, Ac = I), kc.prototype.applyChanges = function (i) {\n        var o = this,\n            s = [],\n            a = 0,\n            u = new Ps(function (t, e) {\n          return jr(t.canonicalString(), e.canonicalString());\n        });\n        return this.changes.forEach(function (t, e) {\n          var n,\n              r = o.Ae.get(t);\n          e.document.isValidDocument() ? (n = Ru(o.Ie.R, e.document, o.getReadTime(t)), u = u.add(t.path.popLast()), e = ec(n), a += e - r, s.push(o.Ie.addEntry(i, t, n))) : (a -= r, o.trackRemovals ? (r = Ru(o.Ie.R, Pi.newNoDocument(t, zr.min()), o.getReadTime(t)), s.push(o.Ie.addEntry(i, t, r))) : s.push(o.Ie.removeEntry(i, t)));\n        }), u.forEach(function (t) {\n          s.push(o.Ie.Ut.addToCollectionParentIndex(i, t));\n        }), s.push(this.Ie.updateMetadata(i, a)), nu.waitFor(s);\n      }, kc.prototype.getFromCache = function (t, e) {\n        var n = this;\n        return this.Ie.ge(t, e).next(function (t) {\n          return n.Ae.set(e, t.size), t.document;\n        });\n      }, kc.prototype.getAllFromCache = function (t, e) {\n        var n = this;\n        return this.Ie.Ee(t, e).next(function (t) {\n          var e = t.documents;\n          return t.Te.forEach(function (t, e) {\n            n.Ae.set(t, e);\n          }), e;\n        });\n      }, kc);\n\n      function kc(t, e) {\n        var n = this;\n        return (n = Ac.call(this) || this).Ie = t, n.trackRemovals = e, n.Ae = new Nc(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), n;\n      }\n\n      function Rc(t, e) {\n        this.R = t, this.Ut = e;\n      }\n\n      function xc() {\n        this.changes = new Nc(function (t) {\n          return t.toString();\n        }, function (t, e) {\n          return t.isEqual(e);\n        }), this.changesApplied = !1;\n      }\n\n      function Oc(t, e) {\n        this.mapKeyFn = t, this.equalsFn = e, this.inner = {};\n      }\n\n      function Lc(t) {\n        return Tu(t, Ga.store);\n      }\n\n      function Pc(t) {\n        return Tu(t, Ka.store);\n      }\n\n      function Mc(t) {\n        return t.path.toArray();\n      }\n\n      var Fc = (Vc.prototype.Rt = function (e, n, t, r) {\n        var i = this;\n        Ur(t < r && 0 <= t && r <= 11);\n        var o = new ru(\"createOrUpgrade\", n);\n        t < 1 && 1 <= r && (e.createObjectStore(Pa.store), (s = e).createObjectStore(Fa.store, {\n          keyPath: Fa.keyPath\n        }), s.createObjectStore(Va.store, {\n          keyPath: Va.keyPath,\n          autoIncrement: !0\n        }).createIndex(Va.userMutationsIndex, Va.userMutationsKeyPath, {\n          unique: !0\n        }), s.createObjectStore(Ua.store), Uc(e), e.createObjectStore(Ka.store));\n        var s,\n            a = nu.resolve();\n        return t < 3 && 3 <= r && (0 !== t && ((s = e).deleteObjectStore(za.store), s.deleteObjectStore(Qa.store), s.deleteObjectStore(Ha.store), Uc(e)), a = a.next(function () {\n          return t = o.store(Ha.store), e = new Ha(0, 0, zr.min().toTimestamp(), 0), t.put(Ha.key, e);\n          var t, e;\n        })), t < 4 && 4 <= r && (a = (a = 0 !== t ? a.next(function () {\n          return n = e, (r = o).store(Va.store).Nt().next(function (t) {\n            n.deleteObjectStore(Va.store), n.createObjectStore(Va.store, {\n              keyPath: Va.keyPath,\n              autoIncrement: !0\n            }).createIndex(Va.userMutationsIndex, Va.userMutationsKeyPath, {\n              unique: !0\n            });\n            var e = r.store(Va.store),\n                t = t.map(function (t) {\n              return e.put(t);\n            });\n            return nu.waitFor(t);\n          });\n          var n, r;\n        }) : a).next(function () {\n          e.createObjectStore(Ya.store, {\n            keyPath: Ya.keyPath\n          });\n        })), t < 5 && 5 <= r && (a = a.next(function () {\n          return i.Re(o);\n        })), t < 6 && 6 <= r && (a = a.next(function () {\n          return e.createObjectStore(Ga.store), i.be(o);\n        })), t < 7 && 7 <= r && (a = a.next(function () {\n          return i.ve(o);\n        })), t < 8 && 8 <= r && (a = a.next(function () {\n          return i.Pe(e, o);\n        })), t < 9 && 9 <= r && (a = a.next(function () {\n          var t;\n          (t = e).objectStoreNames.contains(\"remoteDocumentChanges\") && t.deleteObjectStore(\"remoteDocumentChanges\"), (t = n.objectStore(Ka.store)).createIndex(Ka.readTimeIndex, Ka.readTimeIndexPath, {\n            unique: !1\n          }), t.createIndex(Ka.collectionReadTimeIndex, Ka.collectionReadTimeIndexPath, {\n            unique: !1\n          });\n        })), t < 10 && 10 <= r && (a = a.next(function () {\n          return i.Ve(o);\n        })), a = t < 11 && 11 <= r ? a.next(function () {\n          e.createObjectStore(Xa.store, {\n            keyPath: Xa.keyPath\n          }), e.createObjectStore(Ja.store, {\n            keyPath: Ja.keyPath\n          });\n        }) : a;\n      }, Vc.prototype.be = function (e) {\n        var n = 0;\n        return e.store(Ka.store).Ot(function (t, e) {\n          n += ec(e);\n        }).next(function () {\n          var t = new Ga(n);\n          return e.store(Ga.store).put(Ga.key, t);\n        });\n      }, Vc.prototype.Re = function (n) {\n        var r = this,\n            t = n.store(Fa.store),\n            i = n.store(Va.store);\n        return t.Nt().next(function (t) {\n          return nu.forEach(t, function (e) {\n            var t = IDBKeyRange.bound([e.userId, -1], [e.userId, e.lastAcknowledgedBatchId]);\n            return i.Nt(Va.userMutationsIndex, t).next(function (t) {\n              return nu.forEach(t, function (t) {\n                Ur(t.userId === e.userId);\n                t = Mu(r.R, t);\n                return tc(n, e.userId, t).next(function () {});\n              });\n            });\n          });\n        });\n      }, Vc.prototype.ve = function (t) {\n        var o = t.store(za.store),\n            e = t.store(Ka.store);\n        return t.store(Ha.store).get(Ha.key).next(function (r) {\n          var i = [];\n          return e.Ot(function (t, e) {\n            var n = new ti(t),\n                t = [0, xa(n)];\n            i.push(o.get(t).next(function (t) {\n              return t ? nu.resolve() : o.put(new za(0, xa(n), r.highestListenSequenceNumber));\n            }));\n          }).next(function () {\n            return nu.waitFor(i);\n          });\n        });\n      }, Vc.prototype.Pe = function (t, e) {\n        t.createObjectStore(Wa.store, {\n          keyPath: Wa.keyPath\n        });\n\n        function r(t) {\n          if (i.add(t)) {\n            var e = t.lastSegment(),\n                t = t.popLast();\n            return n.put({\n              collectionId: e,\n              parent: xa(t)\n            });\n          }\n        }\n\n        var n = e.store(Wa.store),\n            i = new Qu();\n        return e.store(Ka.store).Ot({\n          kt: !0\n        }, function (t, e) {\n          t = new ti(t);\n          return r(t.popLast());\n        }).next(function () {\n          return e.store(Ua.store).Ot({\n            kt: !0\n          }, function (t, e) {\n            t[0];\n            var n = t[1],\n                n = (t[2], La(n));\n            return r(n.popLast());\n          });\n        });\n      }, Vc.prototype.Ve = function (t) {\n        var n = this,\n            r = t.store(Qa.store);\n        return r.Ot(function (t, e) {\n          e = Fu(e), e = Vu(n.R, e);\n          return r.put(e);\n        });\n      }, Vc);\n\n      function Vc(t) {\n        this.R = t;\n      }\n\n      function Uc(t) {\n        t.createObjectStore(za.store, {\n          keyPath: za.keyPath\n        }).createIndex(za.documentTargetsIndex, za.documentTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(Qa.store, {\n          keyPath: Qa.keyPath\n        }).createIndex(Qa.queryTargetsIndexName, Qa.queryTargetsKeyPath, {\n          unique: !0\n        }), t.createObjectStore(Ha.store);\n      }\n\n      var qc = \"Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.\",\n          Bc = (jc.prototype.start = function () {\n        var e = this;\n        return this.je().then(function () {\n          if (!e.isPrimary && !e.allowTabSynchronization) throw new kr(Cr.FAILED_PRECONDITION, qc);\n          return e.We(), e.Ge(), e.ze(), e.runTransaction(\"getHighestListenSequenceNumber\", \"readonly\", function (t) {\n            return e.qe.getHighestSequenceNumber(t);\n          });\n        }).then(function (t) {\n          e.Ne = new Ar(t, e.De);\n        }).then(function () {\n          e.xe = !0;\n        }).catch(function (t) {\n          return e.Be && e.Be.close(), Promise.reject(t);\n        });\n      }, jc.prototype.He = function (n) {\n        var t = this;\n        return this.Me = function (e) {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              return this.started ? [2, n(e)] : [2];\n            });\n          });\n        }, n(this.isPrimary);\n      }, jc.prototype.setDatabaseDeletedListener = function (n) {\n        var t = this;\n        this.Be.vt(function (e) {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return null === e.newVersion ? [4, n()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        });\n      }, jc.prototype.setNetworkEnabled = function (t) {\n        var e = this;\n        this.networkEnabled !== t && (this.networkEnabled = t, this.Se.enqueueAndForget(function () {\n          return y(e, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return this.started ? [4, this.je()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return [2];\n              }\n            });\n          });\n        }));\n      }, jc.prototype.je = function () {\n        var n = this;\n        return this.runTransaction(\"updateClientMetadataAndTryBecomePrimary\", \"readwrite\", function (e) {\n          return Gc(e).put(new Ya(n.clientId, Date.now(), n.networkEnabled, n.inForeground)).next(function () {\n            if (n.isPrimary) return n.Je(e).next(function (t) {\n              t || (n.isPrimary = !1, n.Se.enqueueRetryable(function () {\n                return n.Me(!1);\n              }));\n            });\n          }).next(function () {\n            return n.Ye(e);\n          }).next(function (t) {\n            return n.isPrimary && !t ? n.Xe(e).next(function () {\n              return !1;\n            }) : !!t && n.Ze(e).next(function () {\n              return !0;\n            });\n          });\n        }).catch(function (t) {\n          if (du(t)) return Lr(\"IndexedDbPersistence\", \"Failed to extend owner lease: \", t), n.isPrimary;\n          if (!n.allowTabSynchronization) throw t;\n          return Lr(\"IndexedDbPersistence\", \"Releasing owner lease after error during lease refresh\", t), !1;\n        }).then(function (t) {\n          n.isPrimary !== t && n.Se.enqueueRetryable(function () {\n            return n.Me(t);\n          }), n.isPrimary = t;\n        });\n      }, jc.prototype.Je = function (t) {\n        var e = this;\n        return Kc(t).get(Pa.key).next(function (t) {\n          return nu.resolve(e.tn(t));\n        });\n      }, jc.prototype.en = function (t) {\n        return Gc(t).delete(this.clientId);\n      }, jc.prototype.nn = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return !this.isPrimary || this.sn(this.$e, 18e5) ? [3, 2] : (this.$e = Date.now(), [4, this.runTransaction(\"maybeGarbageCollectMultiClientState\", \"readwrite-primary\", function (t) {\n                  var r = Tu(t, Ya.store);\n                  return r.Nt().next(function (t) {\n                    var e = o.rn(t, 18e5),\n                        n = t.filter(function (t) {\n                      return -1 === e.indexOf(t);\n                    });\n                    return nu.forEach(n, function (t) {\n                      return r.delete(t.clientId);\n                    }).next(function () {\n                      return n;\n                    });\n                  });\n                }).catch(function () {\n                  return [];\n                })]);\n\n              case 1:\n                if (e = t.sent(), this.Ke) for (n = 0, r = e; n < r.length; n++) {\n                  i = r[n], this.Ke.removeItem(this.on(i.clientId));\n                }\n                t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, jc.prototype.ze = function () {\n        var t = this;\n        this.Oe = this.Se.enqueueAfterDelay(\"client_metadata_refresh\", 4e3, function () {\n          return t.je().then(function () {\n            return t.nn();\n          }).then(function () {\n            return t.ze();\n          });\n        });\n      }, jc.prototype.tn = function (t) {\n        return !!t && t.ownerId === this.clientId;\n      }, jc.prototype.Ye = function (e) {\n        var r = this;\n        return this.Ce ? nu.resolve(!0) : Kc(e).get(Pa.key).next(function (t) {\n          if (null !== t && r.sn(t.leaseTimestampMs, 5e3) && !r.cn(t.ownerId)) {\n            if (r.tn(t) && r.networkEnabled) return !0;\n\n            if (!r.tn(t)) {\n              if (!t.allowTabSynchronization) throw new kr(Cr.FAILED_PRECONDITION, qc);\n              return !1;\n            }\n          }\n\n          return !(!r.networkEnabled || !r.inForeground) || Gc(e).Nt().next(function (t) {\n            return void 0 === r.rn(t, 5e3).find(function (t) {\n              if (r.clientId !== t.clientId) {\n                var e = !r.networkEnabled && t.networkEnabled,\n                    n = !r.inForeground && t.inForeground,\n                    t = r.networkEnabled === t.networkEnabled;\n                if (e || n && t) return !0;\n              }\n\n              return !1;\n            });\n          });\n        }).next(function (t) {\n          return r.isPrimary !== t && Lr(\"IndexedDbPersistence\", \"Client \" + (t ? \"is\" : \"is not\") + \" eligible for a primary lease.\"), t;\n        });\n      }, jc.prototype.shutdown = function () {\n        return y(this, void 0, void 0, function () {\n          var n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.xe = !1, this.un(), this.Oe && (this.Oe.cancel(), this.Oe = null), this.an(), this.hn(), [4, this.Be.runTransaction(\"shutdown\", \"readwrite\", [Pa.store, Ya.store], function (t) {\n                  var e = new wu(t, Ar.o);\n                  return n.Xe(e).next(function () {\n                    return n.en(e);\n                  });\n                })];\n\n              case 1:\n                return t.sent(), this.Be.close(), this.ln(), [2];\n            }\n          });\n        });\n      }, jc.prototype.rn = function (t, e) {\n        var n = this;\n        return t.filter(function (t) {\n          return n.sn(t.updateTimeMs, e) && !n.cn(t.clientId);\n        });\n      }, jc.prototype.fn = function () {\n        var e = this;\n        return this.runTransaction(\"getActiveClients\", \"readonly\", function (t) {\n          return Gc(t).Nt().next(function (t) {\n            return e.rn(t, 18e5).map(function (t) {\n              return t.clientId;\n            });\n          });\n        });\n      }, Object.defineProperty(jc.prototype, \"started\", {\n        get: function get() {\n          return this.xe;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), jc.prototype.getMutationQueue = function (t) {\n        return nc.Kt(t, this.R, this.Ut, this.referenceDelegate);\n      }, jc.prototype.getTargetCache = function () {\n        return this.qe;\n      }, jc.prototype.getRemoteDocumentCache = function () {\n        return this.Ue;\n      }, jc.prototype.getIndexManager = function () {\n        return this.Ut;\n      }, jc.prototype.getBundleCache = function () {\n        return this.Qe;\n      }, jc.prototype.runTransaction = function (e, n, r) {\n        var i = this;\n        Lr(\"IndexedDbPersistence\", \"Starting transaction:\", e);\n        var o,\n            t = \"readonly\" === n ? \"readonly\" : \"readwrite\";\n        return this.Be.runTransaction(e, t, Za, function (t) {\n          return o = new wu(t, i.Ne ? i.Ne.next() : Ar.o), \"readwrite-primary\" === n ? i.Je(o).next(function (t) {\n            return !!t || i.Ye(o);\n          }).next(function (t) {\n            if (!t) throw Pr(\"Failed to obtain primary lease for action '\" + e + \"'.\"), i.isPrimary = !1, i.Se.enqueueRetryable(function () {\n              return i.Me(!1);\n            }), new kr(Cr.FAILED_PRECONDITION, tu);\n            return r(o);\n          }).next(function (t) {\n            return i.Ze(o).next(function () {\n              return t;\n            });\n          }) : i.dn(o).next(function () {\n            return r(o);\n          });\n        }).then(function (t) {\n          return o.raiseOnCommittedEvent(), t;\n        });\n      }, jc.prototype.dn = function (t) {\n        var e = this;\n        return Kc(t).get(Pa.key).next(function (t) {\n          if (null !== t && e.sn(t.leaseTimestampMs, 5e3) && !e.cn(t.ownerId) && !e.tn(t) && !(e.Ce || e.allowTabSynchronization && t.allowTabSynchronization)) throw new kr(Cr.FAILED_PRECONDITION, qc);\n        });\n      }, jc.prototype.Ze = function (t) {\n        var e = new Pa(this.clientId, this.allowTabSynchronization, Date.now());\n        return Kc(t).put(Pa.key, e);\n      }, jc.yt = function () {\n        return iu.yt();\n      }, jc.prototype.Xe = function (t) {\n        var e = this,\n            n = Kc(t);\n        return n.get(Pa.key).next(function (t) {\n          return e.tn(t) ? (Lr(\"IndexedDbPersistence\", \"Releasing primary lease.\"), n.delete(Pa.key)) : nu.resolve();\n        });\n      }, jc.prototype.sn = function (t, e) {\n        var n = Date.now();\n        return !(t < n - e || n < t && (Pr(\"Detected an update time that is in the future: \" + t + \" > \" + n), 1));\n      }, jc.prototype.We = function () {\n        var t = this;\n        null !== this.document && \"function\" == typeof this.document.addEventListener && (this.ke = function () {\n          t.Se.enqueueAndForget(function () {\n            return t.inForeground = \"visible\" === t.document.visibilityState, t.je();\n          });\n        }, this.document.addEventListener(\"visibilitychange\", this.ke), this.inForeground = \"visible\" === this.document.visibilityState);\n      }, jc.prototype.an = function () {\n        this.ke && (this.document.removeEventListener(\"visibilitychange\", this.ke), this.ke = null);\n      }, jc.prototype.Ge = function () {\n        var t,\n            e = this;\n        \"function\" == typeof (null === (t = this.window) || void 0 === t ? void 0 : t.addEventListener) && (this.Fe = function () {\n          e.un(), e.Se.enqueueAndForget(function () {\n            return e.shutdown();\n          });\n        }, this.window.addEventListener(\"unload\", this.Fe));\n      }, jc.prototype.hn = function () {\n        this.Fe && (this.window.removeEventListener(\"unload\", this.Fe), this.Fe = null);\n      }, jc.prototype.cn = function (t) {\n        try {\n          var e = null !== (null === (e = this.Ke) || void 0 === e ? void 0 : e.getItem(this.on(t)));\n          return Lr(\"IndexedDbPersistence\", \"Client '\" + t + \"' \" + (e ? \"is\" : \"is not\") + \" zombied in LocalStorage\"), e;\n        } catch (t) {\n          return Pr(\"IndexedDbPersistence\", \"Failed to get zombied client id.\", t), !1;\n        }\n      }, jc.prototype.un = function () {\n        if (this.Ke) try {\n          this.Ke.setItem(this.on(this.clientId), String(Date.now()));\n        } catch (t) {\n          Pr(\"Failed to set zombie client id.\", t);\n        }\n      }, jc.prototype.ln = function () {\n        if (this.Ke) try {\n          this.Ke.removeItem(this.on(this.clientId));\n        } catch (t) {}\n      }, jc.prototype.on = function (t) {\n        return \"firestore_zombie_\" + this.persistenceKey + \"_\" + t;\n      }, jc);\n\n      function jc(t, e, n, r, i, o, s, a, u, c) {\n        if (this.allowTabSynchronization = t, this.persistenceKey = e, this.clientId = n, this.Se = i, this.window = o, this.document = s, this.De = u, this.Ce = c, this.Ne = null, this.xe = !1, this.isPrimary = !1, this.networkEnabled = !0, this.Fe = null, this.inForeground = !1, this.ke = null, this.Oe = null, this.$e = Number.NEGATIVE_INFINITY, this.Me = function (t) {\n          return Promise.resolve();\n        }, !jc.yt()) throw new kr(Cr.UNIMPLEMENTED, \"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.\");\n        this.referenceDelegate = new wc(this, r), this.Le = e + \"main\", this.R = new Au(a), this.Be = new iu(this.Le, 11, new Fc(this.R)), this.qe = new cc(this.referenceDelegate, this.R), this.Ut = new zu(), this.Ue = (e = this.R, a = this.Ut, new Dc(e, a)), this.Qe = new qu(), this.window && this.window.localStorage ? this.Ke = this.window.localStorage : (this.Ke = null, !1 === c && Pr(\"IndexedDbPersistence\", \"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page.\"));\n      }\n\n      function Kc(t) {\n        return Tu(t, Pa.store);\n      }\n\n      function Gc(t) {\n        return Tu(t, Ya.store);\n      }\n\n      function Qc(t, e) {\n        var n = t.projectId;\n        return t.isDefaultDatabase || (n += \".\" + t.database), \"firestore/\" + e + \"/\" + n + \"/\";\n      }\n\n      function zc(t, e) {\n        this.progress = t, this.wn = e;\n      }\n\n      var Hc = (th.prototype.mn = function (e, n) {\n        var r = this;\n        return this._n.getAllMutationBatchesAffectingDocumentKey(e, n).next(function (t) {\n          return r.yn(e, n, t);\n        });\n      }, th.prototype.yn = function (t, e, r) {\n        return this.Ue.getEntry(t, e).next(function (t) {\n          for (var e = 0, n = r; e < n.length; e++) {\n            n[e].applyToLocalView(t);\n          }\n\n          return t;\n        });\n      }, th.prototype.gn = function (t, i) {\n        t.forEach(function (t, e) {\n          for (var n = 0, r = i; n < r.length; n++) {\n            r[n].applyToLocalView(e);\n          }\n        });\n      }, th.prototype.pn = function (e, t) {\n        var n = this;\n        return this.Ue.getEntries(e, t).next(function (t) {\n          return n.En(e, t).next(function () {\n            return t;\n          });\n        });\n      }, th.prototype.En = function (t, e) {\n        var n = this;\n        return this._n.getAllMutationBatchesAffectingDocumentKeys(t, e).next(function (t) {\n          return n.gn(e, t);\n        });\n      }, th.prototype.getDocumentsMatchingQuery = function (t, e, n) {\n        return r = e, bi.isDocumentKey(r.path) && null === r.collectionGroup && 0 === r.filters.length ? this.Tn(t, e.path) : Ao(e) ? this.In(t, e, n) : this.An(t, e, n);\n        var r;\n      }, th.prototype.Tn = function (t, e) {\n        return this.mn(t, new bi(e)).next(function (t) {\n          var e = qs;\n          return e = t.isFoundDocument() ? e.insert(t.key, t) : e;\n        });\n      }, th.prototype.In = function (n, r, i) {\n        var o = this,\n            s = r.collectionGroup,\n            a = qs;\n        return this.Ut.getCollectionParents(n, s).next(function (t) {\n          return nu.forEach(t, function (t) {\n            var e,\n                e = (e = r, t = t.child(s), new bo(t, null, e.explicitOrderBy.slice(), e.filters.slice(), e.limit, e.limitType, e.startAt, e.endAt));\n            return o.An(n, e, i).next(function (t) {\n              t.forEach(function (t, e) {\n                a = a.insert(t, e);\n              });\n            });\n          }).next(function () {\n            return a;\n          });\n        });\n      }, th.prototype.An = function (e, n, t) {\n        var c,\n            h,\n            r = this;\n        return this.Ue.getDocumentsMatchingQuery(e, n, t).next(function (t) {\n          return c = t, r._n.getAllMutationBatchesAffectingQuery(e, n);\n        }).next(function (t) {\n          return h = t, r.Rn(e, h, c).next(function (t) {\n            c = t;\n\n            for (var e = 0, n = h; e < n.length; e++) {\n              for (var r = n[e], i = 0, o = r.mutations; i < o.length; i++) {\n                var s = o[i],\n                    a = s.key,\n                    u = c.get(a);\n                null == u && (u = Pi.newInvalidDocument(a), c = c.insert(a, u)), ss(s, u, r.localWriteTime), u.isFoundDocument() || (c = c.remove(a));\n              }\n            }\n          });\n        }).next(function () {\n          return c.forEach(function (t, e) {\n            Oo(n, e) || (c = c.remove(t));\n          }), c;\n        });\n      }, th.prototype.Rn = function (t, e, n) {\n        for (var r = Ks(), i = 0, o = e; i < o.length; i++) {\n          for (var s = 0, a = o[i].mutations; s < a.length; s++) {\n            var u = a[s];\n            u instanceof fs && null === n.get(u.key) && (r = r.add(u.key));\n          }\n        }\n\n        var c = n;\n        return this.Ue.getEntries(t, r).next(function (t) {\n          return t.forEach(function (t, e) {\n            e.isFoundDocument() && (c = c.insert(t, e));\n          }), c;\n        });\n      }, th),\n          Wc = (Zc.Pn = function (t, e) {\n        for (var n = Ks(), r = Ks(), i = 0, o = e.docChanges; i < o.length; i++) {\n          var s = o[i];\n\n          switch (s.type) {\n            case 0:\n              n = n.add(s.doc.key);\n              break;\n\n            case 1:\n              r = r.add(s.doc.key);\n          }\n        }\n\n        return new Zc(t, e.fromCache, n, r);\n      }, Zc),\n          Yc = ($c.prototype.Vn = function (t) {\n        this.Sn = t;\n      }, $c.prototype.getDocumentsMatchingQuery = function (e, r, i, o) {\n        var s = this;\n        return 0 === r.filters.length && null === r.limit && null == r.startAt && null == r.endAt && (0 === r.explicitOrderBy.length || 1 === r.explicitOrderBy.length && r.explicitOrderBy[0].field.isKeyField()) || i.isEqual(zr.min()) ? this.Dn(e, r) : this.Sn.pn(e, o).next(function (t) {\n          var n = s.Cn(r, t);\n          return (To(r) || Io(r)) && s.Nn(r.limitType, n, o, i) ? s.Dn(e, r) : (Or() <= p.DEBUG && Lr(\"QueryEngine\", \"Re-using previous result from %s to execute query: %s\", i.toString(), xo(r)), s.Sn.getDocumentsMatchingQuery(e, r, i).next(function (e) {\n            return n.forEach(function (t) {\n              e = e.insert(t.key, t);\n            }), e;\n          }));\n        });\n      }, $c.prototype.Cn = function (n, t) {\n        var r = new Ps(Lo(n));\n        return t.forEach(function (t, e) {\n          Oo(n, e) && (r = r.add(e));\n        }), r;\n      }, $c.prototype.Nn = function (t, e, n, r) {\n        if (n.size !== e.size) return !0;\n        e = \"F\" === t ? e.last() : e.first();\n        return !!e && (e.hasPendingWrites || 0 < e.version.compareTo(r));\n      }, $c.prototype.Dn = function (t, e) {\n        return Or() <= p.DEBUG && Lr(\"QueryEngine\", \"Using full collection scan to execute query:\", xo(e)), this.Sn.getDocumentsMatchingQuery(t, e, zr.min());\n      }, $c),\n          Xc = (Jc.prototype.collectGarbage = function (e) {\n        var n = this;\n        return this.persistence.runTransaction(\"Collect garbage\", \"readwrite-primary\", function (t) {\n          return e.collect(t, n.Fn);\n        });\n      }, Jc);\n\n      function Jc(t, e, n, r) {\n        this.persistence = t, this.xn = e, this.R = r, this.Fn = new Ds(jr), this.kn = new Nc(Ui, qi), this.On = zr.min(), this._n = t.getMutationQueue(n), this.$n = t.getRemoteDocumentCache(), this.qe = t.getTargetCache(), this.Mn = new Hc(this.$n, this._n, this.persistence.getIndexManager()), this.Qe = t.getBundleCache(), this.xn.Vn(this.Mn);\n      }\n\n      function $c() {}\n\n      function Zc(t, e, n, r) {\n        this.targetId = t, this.fromCache = e, this.bn = n, this.vn = r;\n      }\n\n      function th(t, e, n) {\n        this.Ue = t, this._n = e, this.Ut = n;\n      }\n\n      function eh(t, e, n, r) {\n        return new Xc(t, e, n, r);\n      }\n\n      function nh(i, o) {\n        return y(this, void 0, void 0, function () {\n          var e, n, v, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return n = (e = i)._n, v = e.Mn, [4, e.persistence.runTransaction(\"Handle user change\", \"readonly\", function (g) {\n                  var m;\n                  return e._n.getAllMutationBatches(g).next(function (t) {\n                    return m = t, n = e.persistence.getMutationQueue(o), v = new Hc(e.$n, n, e.persistence.getIndexManager()), n.getAllMutationBatches(g);\n                  }).next(function (t) {\n                    for (var e = [], n = [], r = Ks(), i = 0, o = m; i < o.length; i++) {\n                      var s = o[i];\n                      e.push(s.batchId);\n\n                      for (var a = 0, u = s.mutations; a < u.length; a++) {\n                        var c = u[a],\n                            r = r.add(c.key);\n                      }\n                    }\n\n                    for (var h = 0, l = t; h < l.length; h++) {\n                      var f = l[h];\n                      n.push(f.batchId);\n\n                      for (var d = 0, p = f.mutations; d < p.length; d++) {\n                        var y = p[d];\n                        r = r.add(y.key);\n                      }\n                    }\n\n                    return v.pn(g, r).next(function (t) {\n                      return {\n                        Ln: t,\n                        removedBatchIds: e,\n                        addedBatchIds: n\n                      };\n                    });\n                  });\n                })];\n\n              case 1:\n                return r = t.sent(), [2, (e._n = n, e.Mn = v, e.xn.Vn(e.Mn), r)];\n            }\n          });\n        });\n      }\n\n      function rh(t, h) {\n        var l = t;\n        return l.persistence.runTransaction(\"Acknowledge batch\", \"readwrite-primary\", function (t) {\n          var e,\n              r,\n              i,\n              o,\n              s,\n              n,\n              a,\n              u = h.batch.keys(),\n              c = l.$n.newChangeBuffer({\n            trackRemovals: !0\n          });\n          return e = l, r = t, o = c, s = (i = h).batch, n = s.keys(), a = nu.resolve(), n.forEach(function (n) {\n            a = a.next(function () {\n              return o.getEntry(r, n);\n            }).next(function (t) {\n              var e = i.docVersions.get(n);\n              Ur(null !== e), t.version.compareTo(e) < 0 && (s.applyToRemoteDocument(t, i), t.isValidDocument() && o.addEntry(t, i.commitVersion));\n            });\n          }), a.next(function () {\n            return e._n.removeMutationBatch(r, s);\n          }).next(function () {\n            return c.apply(t);\n          }).next(function () {\n            return l._n.performConsistencyCheck(t);\n          }).next(function () {\n            return l.Mn.pn(t, u);\n          });\n        });\n      }\n\n      function ih(t) {\n        var e = t;\n        return e.persistence.runTransaction(\"Get last remote snapshot version\", \"readonly\", function (t) {\n          return e.qe.getLastRemoteSnapshotVersion(t);\n        });\n      }\n\n      function oh(t, r) {\n        var u = t,\n            c = r.snapshotVersion,\n            h = u.Fn;\n        return u.persistence.runTransaction(\"Apply remote event\", \"readwrite-primary\", function (s) {\n          var t = u.$n.newChangeBuffer({\n            trackRemovals: !0\n          });\n          h = u.Fn;\n          var a = [];\n          r.targetChanges.forEach(function (t, e) {\n            var n,\n                r,\n                i,\n                o = h.get(e);\n            o && (a.push(u.qe.removeMatchingKeys(s, t.removedDocuments, e).next(function () {\n              return u.qe.addMatchingKeys(s, t.addedDocuments, e);\n            })), 0 < (i = t.resumeToken).approximateByteSize() && (n = o.withResumeToken(i, c).withSequenceNumber(s.currentSequenceNumber), h = h.insert(e, n), r = o, i = t, Ur(0 < (o = n).resumeToken.approximateByteSize()), (0 === r.resumeToken.approximateByteSize() || 3e8 <= o.snapshotVersion.toMicroseconds() - r.snapshotVersion.toMicroseconds() || 0 < i.addedDocuments.size + i.modifiedDocuments.size + i.removedDocuments.size) && a.push(u.qe.updateTargetData(s, n))));\n          });\n          var e,\n              n = Fs;\n          return r.documentUpdates.forEach(function (t, e) {\n            r.resolvedLimboDocuments.has(t) && a.push(u.persistence.referenceDelegate.updateLimboDocument(s, t));\n          }), a.push(sh(s, t, r.documentUpdates, c, void 0).next(function (t) {\n            n = t;\n          })), c.isEqual(zr.min()) || (e = u.qe.getLastRemoteSnapshotVersion(s).next(function (t) {\n            return u.qe.setTargetsMetadata(s, s.currentSequenceNumber, c);\n          }), a.push(e)), nu.waitFor(a).next(function () {\n            return t.apply(s);\n          }).next(function () {\n            return u.Mn.En(s, n);\n          }).next(function () {\n            return n;\n          });\n        }).then(function (t) {\n          return u.Fn = h, t;\n        });\n      }\n\n      function sh(t, s, e, a, u) {\n        var n = Ks();\n        return e.forEach(function (t) {\n          return n = n.add(t);\n        }), s.getEntries(t, n).next(function (i) {\n          var o = Fs;\n          return e.forEach(function (t, e) {\n            var n = i.get(t),\n                r = (null == u ? void 0 : u.get(t)) || a;\n            e.isNoDocument() && e.version.isEqual(zr.min()) ? (s.removeEntry(t, r), o = o.insert(t, e)) : !n.isValidDocument() || 0 < e.version.compareTo(n.version) || 0 === e.version.compareTo(n.version) && n.hasPendingWrites ? (s.addEntry(e, r), o = o.insert(t, e)) : Lr(\"LocalStore\", \"Ignoring outdated watch update for \", t, \". Current version:\", n.version, \" Watch version:\", e.version);\n          }), o;\n        });\n      }\n\n      function ah(t, r) {\n        var i = t;\n        return i.persistence.runTransaction(\"Allocate target\", \"readwrite\", function (e) {\n          var n;\n          return i.qe.getTargetData(e, r).next(function (t) {\n            return t ? (n = t, nu.resolve(n)) : i.qe.allocateTargetId(e).next(function (t) {\n              return n = new Su(r, t, 0, e.currentSequenceNumber), i.qe.addTargetData(e, n).next(function () {\n                return n;\n              });\n            });\n          });\n        }).then(function (t) {\n          var e = i.Fn.get(t.targetId);\n          return (null === e || 0 < t.snapshotVersion.compareTo(e.snapshotVersion)) && (i.Fn = i.Fn.insert(t.targetId, t), i.kn.set(r, t.targetId)), t;\n        });\n      }\n\n      function uh(i, o, s) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = (e = i).Fn.get(o), r = s ? \"readwrite\" : \"readwrite-primary\", t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 5]), s ? [3, 3] : [4, e.persistence.runTransaction(\"Release target\", r, function (t) {\n                  return e.persistence.referenceDelegate.removeTarget(t, n);\n                })];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [3, 5];\n\n              case 4:\n                if (!du(r = t.sent())) throw r;\n                return Lr(\"LocalStore\", \"Failed to update sequence numbers for target \" + o + \": \" + r), [3, 5];\n\n              case 5:\n                return e.Fn = e.Fn.remove(o), e.kn.delete(n.target), [2];\n            }\n          });\n        });\n      }\n\n      function ch(t, o, s) {\n        var a = t,\n            u = zr.min(),\n            c = Ks();\n        return a.persistence.runTransaction(\"Execute query\", \"readonly\", function (e) {\n          return t = a, n = e, r = Do(o), (void 0 !== (t = (i = t).kn.get(r)) ? nu.resolve(i.Fn.get(t)) : i.qe.getTargetData(n, r)).next(function (t) {\n            if (t) return u = t.lastLimboFreeSnapshotVersion, a.qe.getMatchingKeysForTargetId(e, t.targetId).next(function (t) {\n              c = t;\n            });\n          }).next(function () {\n            return a.xn.getDocumentsMatchingQuery(e, o, s ? u : zr.min(), s ? c : Ks());\n          }).next(function (t) {\n            return {\n              documents: t,\n              Bn: c\n            };\n          });\n          var t, n, r, i;\n        });\n      }\n\n      function hh(t, e) {\n        var n = t,\n            r = n.qe,\n            t = n.Fn.get(e);\n        return t ? Promise.resolve(t.target) : n.persistence.runTransaction(\"Get target data\", \"readonly\", function (t) {\n          return r.lt(t, e).next(function (t) {\n            return t ? t.target : null;\n          });\n        });\n      }\n\n      function lh(t) {\n        var s = t;\n        return s.persistence.runTransaction(\"Get new document changes\", \"readonly\", function (t) {\n          return e = s.$n, n = t, t = s.On, r = e, i = Fs, o = xu(t), t = Pc(n), n = IDBKeyRange.lowerBound(o, !0), t.Ot({\n            index: Ka.readTimeIndex,\n            range: n\n          }, function (t, e) {\n            var n = ku(r.R, e);\n            i = i.insert(n.key, n), o = e.readTime;\n          }).next(function () {\n            return {\n              wn: i,\n              readTime: Ou(o)\n            };\n          });\n          var e, n, r, i, o;\n        }).then(function (t) {\n          var e = t.wn,\n              t = t.readTime;\n          return s.On = t, e;\n        });\n      }\n\n      function fh(n) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            return [2, (e = n).persistence.runTransaction(\"Synchronize last document change read time\", \"readonly\", function (t) {\n              return t = Pc(t), r = zr.min(), t.Ot({\n                index: Ka.readTimeIndex,\n                reverse: !0\n              }, function (t, e, n) {\n                e.readTime && (r = Ou(e.readTime)), n.done();\n              }).next(function () {\n                return r;\n              });\n              var r;\n            }).then(function (t) {\n              e.On = t;\n            })];\n          });\n        });\n      }\n\n      var dh,\n          ph,\n          yh = (Mh.prototype.getBundleMetadata = function (t, e) {\n        return nu.resolve(this.Kn.get(e));\n      }, Mh.prototype.saveBundleMetadata = function (t, e) {\n        return this.Kn.set(e.id, {\n          id: e.id,\n          version: e.version,\n          createTime: ca(e.createTime)\n        }), nu.resolve();\n      }, Mh.prototype.getNamedQuery = function (t, e) {\n        return nu.resolve(this.jn.get(e));\n      }, Mh.prototype.saveNamedQuery = function (t, e) {\n        return this.jn.set(e.name, {\n          name: (e = e).name,\n          query: Uu(e.bundledQuery),\n          readTime: ca(e.readTime)\n        }), nu.resolve();\n      }, Mh),\n          gh = (Ph.prototype.isEmpty = function () {\n        return this.Wn.isEmpty();\n      }, Ph.prototype.addReference = function (t, e) {\n        e = new mh(t, e);\n        this.Wn = this.Wn.add(e), this.zn = this.zn.add(e);\n      }, Ph.prototype.Jn = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.addReference(t, e);\n        });\n      }, Ph.prototype.removeReference = function (t, e) {\n        this.Yn(new mh(t, e));\n      }, Ph.prototype.Xn = function (t, e) {\n        var n = this;\n        t.forEach(function (t) {\n          return n.removeReference(t, e);\n        });\n      }, Ph.prototype.Zn = function (t) {\n        var e = this,\n            n = new bi(new ti([])),\n            r = new mh(n, t),\n            t = new mh(n, t + 1),\n            i = [];\n        return this.zn.forEachInRange([r, t], function (t) {\n          e.Yn(t), i.push(t.key);\n        }), i;\n      }, Ph.prototype.ts = function () {\n        var e = this;\n        this.Wn.forEach(function (t) {\n          return e.Yn(t);\n        });\n      }, Ph.prototype.Yn = function (t) {\n        this.Wn = this.Wn.delete(t), this.zn = this.zn.delete(t);\n      }, Ph.prototype.es = function (t) {\n        var e = new bi(new ti([])),\n            n = new mh(e, t),\n            t = new mh(e, t + 1),\n            r = Ks();\n        return this.zn.forEachInRange([n, t], function (t) {\n          r = r.add(t.key);\n        }), r;\n      }, Ph.prototype.containsKey = function (t) {\n        var e = new mh(t, 0),\n            e = this.Wn.firstAfterOrEqual(e);\n        return null !== e && t.isEqual(e.key);\n      }, Ph),\n          mh = (Lh.Gn = function (t, e) {\n        return bi.comparator(t.key, e.key) || jr(t.ns, e.ns);\n      }, Lh.Hn = function (t, e) {\n        return jr(t.ns, e.ns) || bi.comparator(t.key, e.key);\n      }, Lh),\n          vh = (Oh.prototype.checkEmpty = function (t) {\n        return nu.resolve(0 === this._n.length);\n      }, Oh.prototype.addMutationBatch = function (t, e, n, r) {\n        var i = this.ss;\n        this.ss++, 0 < this._n.length && this._n[this._n.length - 1];\n        n = new Iu(i, e, n, r);\n\n        this._n.push(n);\n\n        for (var o = 0, s = r; o < s.length; o++) {\n          var a = s[o];\n          this.rs = this.rs.add(new mh(a.key, i)), this.Ut.addToCollectionParentIndex(t, a.key.path.popLast());\n        }\n\n        return nu.resolve(n);\n      }, Oh.prototype.lookupMutationBatch = function (t, e) {\n        return nu.resolve(this.os(e));\n      }, Oh.prototype.getNextMutationBatchAfterBatchId = function (t, e) {\n        e += 1, e = this.cs(e), e = e < 0 ? 0 : e;\n        return nu.resolve(this._n.length > e ? this._n[e] : null);\n      }, Oh.prototype.getHighestUnacknowledgedBatchId = function () {\n        return nu.resolve(0 === this._n.length ? -1 : this.ss - 1);\n      }, Oh.prototype.getAllMutationBatches = function (t) {\n        return nu.resolve(this._n.slice());\n      }, Oh.prototype.getAllMutationBatchesAffectingDocumentKey = function (t, e) {\n        var n = this,\n            r = new mh(e, 0),\n            e = new mh(e, Number.POSITIVE_INFINITY),\n            i = [];\n        return this.rs.forEachInRange([r, e], function (t) {\n          t = n.os(t.ns);\n          i.push(t);\n        }), nu.resolve(i);\n      }, Oh.prototype.getAllMutationBatchesAffectingDocumentKeys = function (t, e) {\n        var n = this,\n            r = new Ps(jr);\n        return e.forEach(function (t) {\n          var e = new mh(t, 0),\n              t = new mh(t, Number.POSITIVE_INFINITY);\n          n.rs.forEachInRange([e, t], function (t) {\n            r = r.add(t.ns);\n          });\n        }), nu.resolve(this.us(r));\n      }, Oh.prototype.getAllMutationBatchesAffectingQuery = function (t, e) {\n        var n = e.path,\n            r = n.length + 1,\n            e = n;\n        bi.isDocumentKey(e) || (e = e.child(\"\"));\n        var e = new mh(new bi(e), 0),\n            i = new Ps(jr);\n        return this.rs.forEachWhile(function (t) {\n          var e = t.key.path;\n          return !!n.isPrefixOf(e) && (e.length === r && (i = i.add(t.ns)), !0);\n        }, e), nu.resolve(this.us(i));\n      }, Oh.prototype.us = function (t) {\n        var e = this,\n            n = [];\n        return t.forEach(function (t) {\n          t = e.os(t);\n          null !== t && n.push(t);\n        }), n;\n      }, Oh.prototype.removeMutationBatch = function (n, r) {\n        var i = this;\n        Ur(0 === this.hs(r.batchId, \"removed\")), this._n.shift();\n        var o = this.rs;\n        return nu.forEach(r.mutations, function (t) {\n          var e = new mh(t.key, r.batchId);\n          return o = o.delete(e), i.referenceDelegate.markPotentiallyOrphaned(n, t.key);\n        }).next(function () {\n          i.rs = o;\n        });\n      }, Oh.prototype.Gt = function (t) {}, Oh.prototype.containsKey = function (t, e) {\n        var n = new mh(e, 0),\n            n = this.rs.firstAfterOrEqual(n);\n        return nu.resolve(e.isEqual(n && n.key));\n      }, Oh.prototype.performConsistencyCheck = function (t) {\n        return this._n.length, nu.resolve();\n      }, Oh.prototype.hs = function (t, e) {\n        return this.cs(t);\n      }, Oh.prototype.cs = function (t) {\n        return 0 === this._n.length ? 0 : t - this._n[0].batchId;\n      }, Oh.prototype.os = function (t) {\n        t = this.cs(t);\n        return t < 0 || t >= this._n.length ? null : this._n[t];\n      }, Oh),\n          bh = (xh.prototype.addEntry = function (t, e, n) {\n        var r = e.key,\n            i = this.docs.get(r),\n            o = i ? i.size : 0,\n            i = this.ls(e);\n        return this.docs = this.docs.insert(r, {\n          document: e.clone(),\n          size: i,\n          readTime: n\n        }), this.size += i - o, this.Ut.addToCollectionParentIndex(t, r.path.popLast());\n      }, xh.prototype.removeEntry = function (t) {\n        var e = this.docs.get(t);\n        e && (this.docs = this.docs.remove(t), this.size -= e.size);\n      }, xh.prototype.getEntry = function (t, e) {\n        var n = this.docs.get(e);\n        return nu.resolve(n ? n.document.clone() : Pi.newInvalidDocument(e));\n      }, xh.prototype.getEntries = function (t, e) {\n        var n = this,\n            r = Fs;\n        return e.forEach(function (t) {\n          var e = n.docs.get(t);\n          r = r.insert(t, e ? e.document.clone() : Pi.newInvalidDocument(t));\n        }), nu.resolve(r);\n      }, xh.prototype.getDocumentsMatchingQuery = function (t, e, n) {\n        for (var r = Fs, i = new bi(e.path.child(\"\")), o = this.docs.getIteratorFrom(i); o.hasNext();) {\n          var s = o.getNext(),\n              a = s.key,\n              u = s.value,\n              s = u.document,\n              u = u.readTime;\n          if (!e.path.isPrefixOf(a.path)) break;\n          u.compareTo(n) <= 0 || Oo(e, s) && (r = r.insert(s.key, s.clone()));\n        }\n\n        return nu.resolve(r);\n      }, xh.prototype.fs = function (t, e) {\n        return nu.forEach(this.docs, function (t) {\n          return e(t);\n        });\n      }, xh.prototype.newChangeBuffer = function (t) {\n        return new wh(this);\n      }, xh.prototype.getSize = function (t) {\n        return nu.resolve(this.size);\n      }, xh),\n          wh = (n(Rh, ph = I), Rh.prototype.applyChanges = function (n) {\n        var r = this,\n            i = [];\n        return this.changes.forEach(function (t, e) {\n          e.document.isValidDocument() ? i.push(r.Ie.addEntry(n, e.document, r.getReadTime(t))) : r.Ie.removeEntry(t);\n        }), nu.waitFor(i);\n      }, Rh.prototype.getFromCache = function (t, e) {\n        return this.Ie.getEntry(t, e);\n      }, Rh.prototype.getAllFromCache = function (t, e) {\n        return this.Ie.getEntries(t, e);\n      }, Rh),\n          Eh = (kh.prototype.forEachTarget = function (t, n) {\n        return this.ds.forEach(function (t, e) {\n          return n(e);\n        }), nu.resolve();\n      }, kh.prototype.getLastRemoteSnapshotVersion = function (t) {\n        return nu.resolve(this.lastRemoteSnapshotVersion);\n      }, kh.prototype.getHighestSequenceNumber = function (t) {\n        return nu.resolve(this.ws);\n      }, kh.prototype.allocateTargetId = function (t) {\n        return this.highestTargetId = this.ys.next(), nu.resolve(this.highestTargetId);\n      }, kh.prototype.setTargetsMetadata = function (t, e, n) {\n        return n && (this.lastRemoteSnapshotVersion = n), e > this.ws && (this.ws = e), nu.resolve();\n      }, kh.prototype.te = function (t) {\n        this.ds.set(t.target, t);\n        var e = t.targetId;\n        e > this.highestTargetId && (this.ys = new uc(e), this.highestTargetId = e), t.sequenceNumber > this.ws && (this.ws = t.sequenceNumber);\n      }, kh.prototype.addTargetData = function (t, e) {\n        return this.te(e), this.targetCount += 1, nu.resolve();\n      }, kh.prototype.updateTargetData = function (t, e) {\n        return this.te(e), nu.resolve();\n      }, kh.prototype.removeTargetData = function (t, e) {\n        return this.ds.delete(e.target), this._s.Zn(e.targetId), --this.targetCount, nu.resolve();\n      }, kh.prototype.removeTargets = function (n, r, i) {\n        var o = this,\n            s = 0,\n            a = [];\n        return this.ds.forEach(function (t, e) {\n          e.sequenceNumber <= r && null === i.get(e.targetId) && (o.ds.delete(t), a.push(o.removeMatchingKeysForTargetId(n, e.targetId)), s++);\n        }), nu.waitFor(a).next(function () {\n          return s;\n        });\n      }, kh.prototype.getTargetCount = function (t) {\n        return nu.resolve(this.targetCount);\n      }, kh.prototype.getTargetData = function (t, e) {\n        e = this.ds.get(e) || null;\n        return nu.resolve(e);\n      }, kh.prototype.addMatchingKeys = function (t, e, n) {\n        return this._s.Jn(e, n), nu.resolve();\n      }, kh.prototype.removeMatchingKeys = function (e, t, n) {\n        this._s.Xn(t, n);\n\n        var r = this.persistence.referenceDelegate,\n            i = [];\n        return r && t.forEach(function (t) {\n          i.push(r.markPotentiallyOrphaned(e, t));\n        }), nu.waitFor(i);\n      }, kh.prototype.removeMatchingKeysForTargetId = function (t, e) {\n        return this._s.Zn(e), nu.resolve();\n      }, kh.prototype.getMatchingKeysForTargetId = function (t, e) {\n        e = this._s.es(e);\n        return nu.resolve(e);\n      }, kh.prototype.containsKey = function (t, e) {\n        return nu.resolve(this._s.containsKey(e));\n      }, kh),\n          Th = (Ch.prototype.start = function () {\n        return Promise.resolve();\n      }, Ch.prototype.shutdown = function () {\n        return this.xe = !1, Promise.resolve();\n      }, Object.defineProperty(Ch.prototype, \"started\", {\n        get: function get() {\n          return this.xe;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ch.prototype.setDatabaseDeletedListener = function () {}, Ch.prototype.setNetworkEnabled = function () {}, Ch.prototype.getIndexManager = function () {\n        return this.Ut;\n      }, Ch.prototype.getMutationQueue = function (t) {\n        var e = this.gs[t.toKey()];\n        return e || (e = new vh(this.Ut, this.referenceDelegate), this.gs[t.toKey()] = e), e;\n      }, Ch.prototype.getTargetCache = function () {\n        return this.qe;\n      }, Ch.prototype.getRemoteDocumentCache = function () {\n        return this.Ue;\n      }, Ch.prototype.getBundleCache = function () {\n        return this.Qe;\n      }, Ch.prototype.runTransaction = function (t, e, n) {\n        var r = this;\n        Lr(\"MemoryPersistence\", \"Starting transaction:\", t);\n        var i = new Ih(this.Ne.next());\n        return this.referenceDelegate.Es(), n(i).next(function (t) {\n          return r.referenceDelegate.Ts(i).next(function () {\n            return t;\n          });\n        }).toPromise().then(function (t) {\n          return i.raiseOnCommittedEvent(), t;\n        });\n      }, Ch.prototype.Is = function (e, n) {\n        return nu.or(Object.values(this.gs).map(function (t) {\n          return function () {\n            return t.containsKey(e, n);\n          };\n        }));\n      }, Ch),\n          Ih = (n(Dh, dh = Se), Dh),\n          _h = (Nh.bs = function (t) {\n        return new Nh(t);\n      }, Object.defineProperty(Nh.prototype, \"vs\", {\n        get: function get() {\n          if (this.Rs) return this.Rs;\n          throw Vr();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Nh.prototype.addReference = function (t, e, n) {\n        return this.As.addReference(n, e), this.vs.delete(n.toString()), nu.resolve();\n      }, Nh.prototype.removeReference = function (t, e, n) {\n        return this.As.removeReference(n, e), this.vs.add(n.toString()), nu.resolve();\n      }, Nh.prototype.markPotentiallyOrphaned = function (t, e) {\n        return this.vs.add(e.toString()), nu.resolve();\n      }, Nh.prototype.removeTarget = function (t, e) {\n        var n = this;\n        this.As.Zn(e.targetId).forEach(function (t) {\n          return n.vs.add(t.toString());\n        });\n        var r = this.persistence.getTargetCache();\n        return r.getMatchingKeysForTargetId(t, e.targetId).next(function (t) {\n          t.forEach(function (t) {\n            return n.vs.add(t.toString());\n          });\n        }).next(function () {\n          return r.removeTargetData(t, e);\n        });\n      }, Nh.prototype.Es = function () {\n        this.Rs = new Set();\n      }, Nh.prototype.Ts = function (n) {\n        var r = this,\n            i = this.persistence.getRemoteDocumentCache().newChangeBuffer();\n        return nu.forEach(this.vs, function (t) {\n          var e = bi.fromPath(t);\n          return r.Ps(n, e).next(function (t) {\n            t || i.removeEntry(e);\n          });\n        }).next(function () {\n          return r.Rs = null, i.apply(n);\n        });\n      }, Nh.prototype.updateLimboDocument = function (t, e) {\n        var n = this;\n        return this.Ps(t, e).next(function (t) {\n          t ? n.vs.delete(e.toString()) : n.vs.add(e.toString());\n        });\n      }, Nh.prototype.ps = function (t) {\n        return 0;\n      }, Nh.prototype.Ps = function (t, e) {\n        var n = this;\n        return nu.or([function () {\n          return nu.resolve(n.As.containsKey(e));\n        }, function () {\n          return n.persistence.getTargetCache().containsKey(t, e);\n        }, function () {\n          return n.persistence.Is(t, e);\n        }]);\n      }, Nh),\n          Sh = (Ah.prototype.isAuthenticated = function () {\n        return null != this.uid;\n      }, Ah.prototype.toKey = function () {\n        return this.isAuthenticated() ? \"uid:\" + this.uid : \"anonymous-user\";\n      }, Ah.prototype.isEqual = function (t) {\n        return t.uid === this.uid;\n      }, Ah);\n\n      function Ah(t) {\n        this.uid = t;\n      }\n\n      function Nh(t) {\n        this.persistence = t, this.As = new gh(), this.Rs = null;\n      }\n\n      function Dh(t) {\n        var e = this;\n        return (e = dh.call(this) || this).currentSequenceNumber = t, e;\n      }\n\n      function Ch(t, e) {\n        var n = this;\n        this.gs = {}, this.Ne = new Ar(0), this.xe = !1, this.xe = !0, this.referenceDelegate = t(this), this.qe = new Eh(this), this.Ut = new Gu(), this.Ue = (t = this.Ut, new bh(t, function (t) {\n          return n.referenceDelegate.ps(t);\n        })), this.R = new Au(e), this.Qe = new yh(this.R);\n      }\n\n      function kh(t) {\n        this.persistence = t, this.ds = new Nc(Ui, qi), this.lastRemoteSnapshotVersion = zr.min(), this.highestTargetId = 0, this.ws = 0, this._s = new gh(), this.targetCount = 0, this.ys = uc.Jt();\n      }\n\n      function Rh(t) {\n        var e = this;\n        return (e = ph.call(this) || this).Ie = t, e;\n      }\n\n      function xh(t, e) {\n        this.Ut = t, this.ls = e, this.docs = new Ds(bi.comparator), this.size = 0;\n      }\n\n      function Oh(t, e) {\n        this.Ut = t, this.referenceDelegate = e, this._n = [], this.ss = 1, this.rs = new Ps(mh.Gn);\n      }\n\n      function Lh(t, e) {\n        this.key = t, this.ns = e;\n      }\n\n      function Ph() {\n        this.Wn = new Ps(mh.Gn), this.zn = new Ps(mh.Hn);\n      }\n\n      function Mh(t) {\n        this.R = t, this.Kn = new Map(), this.jn = new Map();\n      }\n\n      function Fh(t, e) {\n        return \"firestore_clients_\" + t + \"_\" + e;\n      }\n\n      function Vh(t, e, n) {\n        n = \"firestore_mutations_\" + t + \"_\" + n;\n        return e.isAuthenticated() && (n += \"_\" + e.uid), n;\n      }\n\n      function Uh(t, e) {\n        return \"firestore_targets_\" + t + \"_\" + e;\n      }\n\n      Sh.UNAUTHENTICATED = new Sh(null), Sh.GOOGLE_CREDENTIALS = new Sh(\"google-credentials-uid\"), Sh.FIRST_PARTY = new Sh(\"first-party-uid\");\n      var qh,\n          Bh = (hl.Vs = function (t, e, n) {\n        var r,\n            i = JSON.parse(n),\n            o = \"object\" == typeof i && -1 !== [\"pending\", \"acknowledged\", \"rejected\"].indexOf(i.state) && (void 0 === i.error || \"object\" == typeof i.error);\n        return o && i.error && (o = \"string\" == typeof i.error.message && \"string\" == typeof i.error.code) && (r = new kr(i.error.code, i.error.message)), o ? new hl(t, e, i.state, r) : (Pr(\"SharedClientState\", \"Failed to parse mutation state for ID '\" + e + \"': \" + n), null);\n      }, hl.prototype.Ss = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, hl),\n          jh = (cl.Vs = function (t, e) {\n        var n,\n            r = JSON.parse(e),\n            i = \"object\" == typeof r && -1 !== [\"not-current\", \"current\", \"rejected\"].indexOf(r.state) && (void 0 === r.error || \"object\" == typeof r.error);\n        return i && r.error && (i = \"string\" == typeof r.error.message && \"string\" == typeof r.error.code) && (n = new kr(r.error.code, r.error.message)), i ? new cl(t, r.state, n) : (Pr(\"SharedClientState\", \"Failed to parse target state for ID '\" + t + \"': \" + e), null);\n      }, cl.prototype.Ss = function () {\n        var t = {\n          state: this.state,\n          updateTimeMs: Date.now()\n        };\n        return this.error && (t.error = {\n          code: this.error.code,\n          message: this.error.message\n        }), JSON.stringify(t);\n      }, cl),\n          Kh = (ul.Vs = function (t, e) {\n        for (var n = JSON.parse(e), r = \"object\" == typeof n && n.activeTargetIds instanceof Array, i = Gs, o = 0; r && o < n.activeTargetIds.length; ++o) {\n          r = vi(n.activeTargetIds[o]), i = i.add(n.activeTargetIds[o]);\n        }\n\n        return r ? new ul(t, i) : (Pr(\"SharedClientState\", \"Failed to parse client data for instance '\" + t + \"': \" + e), null);\n      }, ul),\n          Gh = (al.Vs = function (t) {\n        var e = JSON.parse(t);\n        return \"object\" == typeof e && -1 !== [\"Unknown\", \"Online\", \"Offline\"].indexOf(e.onlineState) && \"string\" == typeof e.clientId ? new al(e.clientId, e.onlineState) : (Pr(\"SharedClientState\", \"Failed to parse online state: \" + t), null);\n      }, al),\n          Qh = (sl.prototype.Ds = function (t) {\n        this.activeTargetIds = this.activeTargetIds.add(t);\n      }, sl.prototype.Cs = function (t) {\n        this.activeTargetIds = this.activeTargetIds.delete(t);\n      }, sl.prototype.Ss = function () {\n        var t = {\n          activeTargetIds: this.activeTargetIds.toArray(),\n          updateTimeMs: Date.now()\n        };\n        return JSON.stringify(t);\n      }, sl),\n          zh = (ol.yt = function (t) {\n        return !(!t || !t.localStorage);\n      }, ol.prototype.start = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r,\n              i,\n              o,\n              s,\n              a,\n              u,\n              c,\n              h,\n              l = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.syncEngine.fn()];\n\n              case 1:\n                for (s = t.sent(), e = 0, n = s; e < n.length; e++) {\n                  (r = n[e]) !== this.Ns && (i = this.getItem(Fh(this.persistenceKey, r))) && (o = Kh.Vs(r, i)) && (this.ks = this.ks.insert(o.clientId, o));\n                }\n\n                for (this.Ks(), (s = this.storage.getItem(this.Us)) && (a = this.js(s)) && this.Ws(a), u = 0, c = this.Os; u < c.length; u++) {\n                  h = c[u], this.Fs(h);\n                }\n\n                return this.Os = [], this.window.addEventListener(\"unload\", function () {\n                  return l.shutdown();\n                }), this.started = !0, [2];\n            }\n          });\n        });\n      }, ol.prototype.writeSequenceNumber = function (t) {\n        this.setItem(this.Ms, JSON.stringify(t));\n      }, ol.prototype.getAllActiveQueryTargets = function () {\n        return this.Gs(this.ks);\n      }, ol.prototype.isActiveQueryTarget = function (n) {\n        var r = !1;\n        return this.ks.forEach(function (t, e) {\n          e.activeTargetIds.has(n) && (r = !0);\n        }), r;\n      }, ol.prototype.addPendingMutation = function (t) {\n        this.zs(t, \"pending\");\n      }, ol.prototype.updateMutationState = function (t, e, n) {\n        this.zs(t, e, n), this.Hs(t);\n      }, ol.prototype.addLocalQueryTarget = function (t) {\n        var e,\n            n = \"not-current\";\n        return this.isActiveQueryTarget(t) && (!(e = this.storage.getItem(Uh(this.persistenceKey, t))) || (e = jh.Vs(t, e)) && (n = e.state)), this.Js.Ds(t), this.Ks(), n;\n      }, ol.prototype.removeLocalQueryTarget = function (t) {\n        this.Js.Cs(t), this.Ks();\n      }, ol.prototype.isLocalQueryTarget = function (t) {\n        return this.Js.activeTargetIds.has(t);\n      }, ol.prototype.clearQueryState = function (t) {\n        this.removeItem(Uh(this.persistenceKey, t));\n      }, ol.prototype.updateQueryState = function (t, e, n) {\n        this.Ys(t, e, n);\n      }, ol.prototype.handleUserChange = function (t, e, n) {\n        var r = this;\n        e.forEach(function (t) {\n          r.Hs(t);\n        }), this.currentUser = t, n.forEach(function (t) {\n          r.addPendingMutation(t);\n        });\n      }, ol.prototype.setOnlineState = function (t) {\n        this.Xs(t);\n      }, ol.prototype.notifyBundleLoaded = function () {\n        this.Zs();\n      }, ol.prototype.shutdown = function () {\n        this.started && (this.window.removeEventListener(\"storage\", this.xs), this.removeItem(this.$s), this.started = !1);\n      }, ol.prototype.getItem = function (t) {\n        var e = this.storage.getItem(t);\n        return Lr(\"SharedClientState\", \"READ\", t, e), e;\n      }, ol.prototype.setItem = function (t, e) {\n        Lr(\"SharedClientState\", \"SET\", t, e), this.storage.setItem(t, e);\n      }, ol.prototype.removeItem = function (t) {\n        Lr(\"SharedClientState\", \"REMOVE\", t), this.storage.removeItem(t);\n      }, ol.prototype.Fs = function (t) {\n        var e = this,\n            o = t;\n        o.storageArea === this.storage && (Lr(\"SharedClientState\", \"EVENT\", o.key, o.newValue), o.key !== this.$s ? this.Se.enqueueRetryable(function () {\n          return y(e, void 0, void 0, function () {\n            var e, n, r, i;\n            return g(this, function (t) {\n              if (this.started) {\n                if (null !== o.key) if (this.Ls.test(o.key)) {\n                  if (null == o.newValue) return e = this.ti(o.key), [2, this.ei(e, null)];\n                  if (e = this.ni(o.key, o.newValue)) return [2, this.ei(e.clientId, e)];\n                } else if (this.Bs.test(o.key)) {\n                  if (null !== o.newValue && (n = this.si(o.key, o.newValue))) return [2, this.ii(n)];\n                } else if (this.qs.test(o.key)) {\n                  if (null !== o.newValue && (r = this.ri(o.key, o.newValue))) return [2, this.oi(r)];\n                } else if (o.key === this.Us) {\n                  if (null !== o.newValue && (i = this.js(o.newValue))) return [2, this.Ws(i)];\n                } else if (o.key === this.Ms) (i = function (t) {\n                  var e = Ar.o;\n                  if (null != t) try {\n                    var n = JSON.parse(t);\n                    Ur(\"number\" == typeof n), e = n;\n                  } catch (t) {\n                    Pr(\"SharedClientState\", \"Failed to read sequence number from WebStorage\", t);\n                  }\n                  return e;\n                }(o.newValue)) !== Ar.o && this.sequenceNumberHandler(i);else if (o.key === this.Qs) return [2, this.syncEngine.ci()];\n              } else this.Os.push(o);\n\n              return [2];\n            });\n          });\n        }) : Pr(\"Received WebStorage notification for local change. Another client might have garbage-collected our state\"));\n      }, Object.defineProperty(ol.prototype, \"Js\", {\n        get: function get() {\n          return this.ks.get(this.Ns);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), ol.prototype.Ks = function () {\n        this.setItem(this.$s, this.Js.Ss());\n      }, ol.prototype.zs = function (t, e, n) {\n        n = new Bh(this.currentUser, t, e, n), t = Vh(this.persistenceKey, this.currentUser, t);\n        this.setItem(t, n.Ss());\n      }, ol.prototype.Hs = function (t) {\n        t = Vh(this.persistenceKey, this.currentUser, t);\n        this.removeItem(t);\n      }, ol.prototype.Xs = function (t) {\n        t = {\n          clientId: this.Ns,\n          onlineState: t\n        };\n        this.storage.setItem(this.Us, JSON.stringify(t));\n      }, ol.prototype.Ys = function (t, e, n) {\n        var r = Uh(this.persistenceKey, t),\n            n = new jh(t, e, n);\n        this.setItem(r, n.Ss());\n      }, ol.prototype.Zs = function () {\n        this.setItem(this.Qs, \"value-not-used\");\n      }, ol.prototype.ti = function (t) {\n        t = this.Ls.exec(t);\n        return t ? t[1] : null;\n      }, ol.prototype.ni = function (t, e) {\n        t = this.ti(t);\n        return Kh.Vs(t, e);\n      }, ol.prototype.si = function (t, e) {\n        var n = this.Bs.exec(t),\n            t = Number(n[1]),\n            n = void 0 !== n[2] ? n[2] : null;\n        return Bh.Vs(new Sh(n), t, e);\n      }, ol.prototype.ri = function (t, e) {\n        t = this.qs.exec(t), t = Number(t[1]);\n        return jh.Vs(t, e);\n      }, ol.prototype.js = function (t) {\n        return Gh.Vs(t);\n      }, ol.prototype.ii = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return e.user.uid === this.currentUser.uid ? [2, this.syncEngine.ui(e.batchId, e.state, e.error)] : (Lr(\"SharedClientState\", \"Ignoring mutation for non-active user \" + e.user.uid), [2]);\n          });\n        });\n      }, ol.prototype.oi = function (t) {\n        return this.syncEngine.ai(t.targetId, t.state, t.error);\n      }, ol.prototype.ei = function (t, e) {\n        var n = this,\n            r = e ? this.ks.insert(t, e) : this.ks.remove(t),\n            i = this.Gs(this.ks),\n            o = this.Gs(r),\n            s = [],\n            a = [];\n        return o.forEach(function (t) {\n          i.has(t) || s.push(t);\n        }), i.forEach(function (t) {\n          o.has(t) || a.push(t);\n        }), this.syncEngine.hi(s, a).then(function () {\n          n.ks = r;\n        });\n      }, ol.prototype.Ws = function (t) {\n        this.ks.get(t.clientId) && this.onlineStateHandler(t.onlineState);\n      }, ol.prototype.Gs = function (t) {\n        var n = Gs;\n        return t.forEach(function (t, e) {\n          n = n.unionWith(e.activeTargetIds);\n        }), n;\n      }, ol),\n          Hh = (il.prototype.addPendingMutation = function (t) {}, il.prototype.updateMutationState = function (t, e, n) {}, il.prototype.addLocalQueryTarget = function (t) {\n        return this.li.Ds(t), this.fi[t] || \"not-current\";\n      }, il.prototype.updateQueryState = function (t, e, n) {\n        this.fi[t] = e;\n      }, il.prototype.removeLocalQueryTarget = function (t) {\n        this.li.Cs(t);\n      }, il.prototype.isLocalQueryTarget = function (t) {\n        return this.li.activeTargetIds.has(t);\n      }, il.prototype.clearQueryState = function (t) {\n        delete this.fi[t];\n      }, il.prototype.getAllActiveQueryTargets = function () {\n        return this.li.activeTargetIds;\n      }, il.prototype.isActiveQueryTarget = function (t) {\n        return this.li.activeTargetIds.has(t);\n      }, il.prototype.start = function () {\n        return this.li = new Qh(), Promise.resolve();\n      }, il.prototype.handleUserChange = function (t, e, n) {}, il.prototype.setOnlineState = function (t) {}, il.prototype.shutdown = function () {}, il.prototype.writeSequenceNumber = function (t) {}, il.prototype.notifyBundleLoaded = function () {}, il),\n          Wh = (rl.prototype.di = function (t) {}, rl.prototype.shutdown = function () {}, rl),\n          Yh = (nl.prototype.di = function (t) {\n        this.gi.push(t);\n      }, nl.prototype.shutdown = function () {\n        window.removeEventListener(\"online\", this.wi), window.removeEventListener(\"offline\", this.mi);\n      }, nl.prototype.pi = function () {\n        window.addEventListener(\"online\", this.wi), window.addEventListener(\"offline\", this.mi);\n      }, nl.prototype._i = function () {\n        Lr(\"ConnectivityMonitor\", \"Network connectivity changed: AVAILABLE\");\n\n        for (var t = 0, e = this.gi; t < e.length; t++) {\n          (0, e[t])(0);\n        }\n      }, nl.prototype.yi = function () {\n        Lr(\"ConnectivityMonitor\", \"Network connectivity changed: UNAVAILABLE\");\n\n        for (var t = 0, e = this.gi; t < e.length; t++) {\n          (0, e[t])(1);\n        }\n      }, nl.yt = function () {\n        return \"undefined\" != typeof window && void 0 !== window.addEventListener && void 0 !== window.removeEventListener;\n      }, nl),\n          Xh = {\n        BatchGetDocuments: \"batchGet\",\n        Commit: \"commit\",\n        RunQuery: \"runQuery\"\n      },\n          Jh = (el.prototype.Ii = function (t) {\n        this.Ai = t;\n      }, el.prototype.Ri = function (t) {\n        this.bi = t;\n      }, el.prototype.onMessage = function (t) {\n        this.vi = t;\n      }, el.prototype.close = function () {\n        this.Ti();\n      }, el.prototype.send = function (t) {\n        this.Ei(t);\n      }, el.prototype.Pi = function () {\n        this.Ai();\n      }, el.prototype.Vi = function (t) {\n        this.bi(t);\n      }, el.prototype.Si = function (t) {\n        this.vi(t);\n      }, el),\n          $h = (tl.prototype.Ni = function (e, t, n, r) {\n        var i = this.xi(e, t);\n        Lr(\"RestConnection\", \"Sending: \", i, n);\n        t = {};\n        return this.Fi(t, r), this.ki(e, i, t, n).then(function (t) {\n          return Lr(\"RestConnection\", \"Received: \", t), t;\n        }, function (t) {\n          throw Mr(\"RestConnection\", e + \" failed with error: \", t, \"url: \", i, \"request:\", n), t;\n        });\n      }, tl.prototype.Oi = function (t, e, n, r) {\n        return this.Ni(t, e, n, r);\n      }, tl.prototype.Fi = function (t, e) {\n        if (t[\"X-Goog-Api-Client\"] = \"gl-js/ fire/8.6.0\", t[\"Content-Type\"] = \"text/plain\", this.databaseInfo.appId && (t[\"X-Firebase-GMPID\"] = this.databaseInfo.appId), e) for (var n in e.authHeaders) {\n          e.authHeaders.hasOwnProperty(n) && (t[n] = e.authHeaders[n]);\n        }\n      }, tl.prototype.xi = function (t, e) {\n        t = Xh[t];\n        return this.Di + \"/v1/\" + e + \":\" + t;\n      }, n(Zh, qh = tl), Zh.prototype.ki = function (o, e, s, a) {\n        return new Promise(function (n, r) {\n          var i = new Sr();\n          i.listenOnce(wr.COMPLETE, function () {\n            try {\n              switch (i.getLastErrorCode()) {\n                case br.NO_ERROR:\n                  var t = i.getResponseJson();\n                  Lr(\"Connection\", \"XHR received:\", JSON.stringify(t)), n(t);\n                  break;\n\n                case br.TIMEOUT:\n                  Lr(\"Connection\", 'RPC \"' + o + '\" timed out'), r(new kr(Cr.DEADLINE_EXCEEDED, \"Request time out\"));\n                  break;\n\n                case br.HTTP_ERROR:\n                  var e = i.getStatus();\n                  Lr(\"Connection\", 'RPC \"' + o + '\" failed with status:', e, \"response text:\", i.getResponseText()), 0 < e ? (t = i.getResponseJson().error) && t.status && t.message ? (e = t.status.toLowerCase().replace(/_/g, \"-\"), e = 0 <= Object.values(Cr).indexOf(e) ? e : Cr.UNKNOWN, r(new kr(e, t.message))) : r(new kr(Cr.UNKNOWN, \"Server responded with status \" + i.getStatus())) : r(new kr(Cr.UNAVAILABLE, \"Connection failed.\"));\n                  break;\n\n                default:\n                  Vr();\n              }\n            } finally {\n              Lr(\"Connection\", 'RPC \"' + o + '\" completed.');\n            }\n          });\n          var t = JSON.stringify(a);\n          i.send(e, \"POST\", t, s, 15);\n        });\n      }, Zh.prototype.$i = function (t, e) {\n        var n,\n            r = [this.Di, \"/\", \"google.firestore.v1.Firestore\", \"/\", t, \"/channel\"],\n            i = new dr(),\n            o = vr(),\n            t = {\n          httpSessionIdParam: \"gsessionid\",\n          initMessageHeaders: {},\n          messageUrlParams: {\n            database: \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database\n          },\n          sendRawJson: !0,\n          supportsCrossDomainXhr: !0,\n          internalChannelParams: {\n            forwardChannelRequestTimeoutMs: 6e5\n          },\n          forceLongPolling: this.forceLongPolling,\n          detectBufferingProxy: this.autoDetectLongPolling\n        };\n        this.Fi(t.initMessageHeaders, e), \"undefined\" != typeof window && (window.cordova || window.phonegap || window.PhoneGap) && /ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(h()) || \"object\" == typeof navigator && \"ReactNative\" === navigator.product || 0 <= h().indexOf(\"Electron/\") || 0 <= (n = h()).indexOf(\"MSIE \") || 0 <= n.indexOf(\"Trident/\") || 0 <= h().indexOf(\"MSAppHost/\") || \"object\" == typeof (n = \"object\" == typeof chrome ? chrome.runtime : \"object\" == typeof browser ? browser.runtime : void 0) && void 0 !== n.id || (t.httpHeadersOverwriteParam = \"$httpHeaders\");\n        r = r.join(\"\");\n        Lr(\"Connection\", \"Creating WebChannel: \" + r, t);\n\n        var s = i.createWebChannel(r, t),\n            a = !1,\n            u = !1,\n            c = new Jh({\n          Ei: function Ei(t) {\n            u ? Lr(\"Connection\", \"Not sending because WebChannel is closed:\", t) : (a || (Lr(\"Connection\", \"Opening WebChannel transport.\"), s.open(), a = !0), Lr(\"Connection\", \"WebChannel sending:\", t), s.send(t));\n          },\n          Ti: function Ti() {\n            return s.close();\n          }\n        }),\n            t = function t(_t2, e, n) {\n          _t2.listen(e, function (t) {\n            try {\n              n(t);\n            } catch (t) {\n              setTimeout(function () {\n                throw t;\n              }, 0);\n            }\n          });\n        };\n\n        return t(s, _r.EventType.OPEN, function () {\n          u || Lr(\"Connection\", \"WebChannel transport opened.\");\n        }), t(s, _r.EventType.CLOSE, function () {\n          u || (u = !0, Lr(\"Connection\", \"WebChannel transport closed\"), c.Vi());\n        }), t(s, _r.EventType.ERROR, function (t) {\n          u || (u = !0, Mr(\"Connection\", \"WebChannel transport errored:\", t), c.Vi(new kr(Cr.UNAVAILABLE, \"The operation could not be completed\")));\n        }), t(s, _r.EventType.MESSAGE, function (t) {\n          var e, n, r, i;\n          u || (Ur(!!(e = t.data[0])), (n = e.error || (null === (i = e[0]) || void 0 === i ? void 0 : i.error)) ? (Lr(\"Connection\", \"WebChannel received error:\", n), r = n.status, t = function () {\n            var t = bs[r];\n            if (void 0 !== t) return Ns(t);\n          }(), i = n.message, void 0 === t && (t = Cr.INTERNAL, i = \"Unknown error status: \" + r + \" with message \" + n.message), u = !0, c.Vi(new kr(t, i)), s.close()) : (Lr(\"Connection\", \"WebChannel received:\", e), c.Si(e)));\n        }), t(o, Er.STAT_EVENT, function (t) {\n          t.stat === Tr ? Lr(\"Connection\", \"Detected buffering proxy\") : t.stat === Ir && Lr(\"Connection\", \"Detected no buffering proxy\");\n        }), setTimeout(function () {\n          c.Pi();\n        }, 0), c;\n      }, Zh);\n\n      function Zh(t) {\n        var e = this;\n        return (e = qh.call(this, t) || this).forceLongPolling = t.forceLongPolling, e.autoDetectLongPolling = t.autoDetectLongPolling, e;\n      }\n\n      function tl(t) {\n        this.databaseInfo = t, this.databaseId = t.databaseId;\n        var e = t.ssl ? \"https\" : \"http\";\n        this.Di = e + \"://\" + t.host, this.Ci = \"projects/\" + this.databaseId.projectId + \"/databases/\" + this.databaseId.database + \"/documents\";\n      }\n\n      function el(t) {\n        this.Ei = t.Ei, this.Ti = t.Ti;\n      }\n\n      function nl() {\n        var t = this;\n        this.wi = function () {\n          return t._i();\n        }, this.mi = function () {\n          return t.yi();\n        }, this.gi = [], this.pi();\n      }\n\n      function rl() {}\n\n      function il() {\n        this.li = new Qh(), this.fi = {}, this.onlineStateHandler = null, this.sequenceNumberHandler = null;\n      }\n\n      function ol(t, e, n, r, i) {\n        this.window = t, this.Se = e, this.persistenceKey = n, this.Ns = r, this.syncEngine = null, this.onlineStateHandler = null, this.sequenceNumberHandler = null, this.xs = this.Fs.bind(this), this.ks = new Ds(jr), this.started = !1, this.Os = [];\n        n = n.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n        this.storage = this.window.localStorage, this.currentUser = i, this.$s = Fh(this.persistenceKey, this.Ns), this.Ms = \"firestore_sequence_number_\" + this.persistenceKey, this.ks = this.ks.insert(this.Ns, new Qh()), this.Ls = new RegExp(\"^firestore_clients_\" + n + \"_([^_]*)$\"), this.Bs = new RegExp(\"^firestore_mutations_\" + n + \"_(\\\\d+)(?:_(.*))?$\"), this.qs = new RegExp(\"^firestore_targets_\" + n + \"_(\\\\d+)$\"), this.Us = \"firestore_online_state_\" + this.persistenceKey, this.Qs = \"firestore_bundle_loaded_\" + this.persistenceKey, this.window.addEventListener(\"storage\", this.xs);\n      }\n\n      function sl() {\n        this.activeTargetIds = Gs;\n      }\n\n      function al(t, e) {\n        this.clientId = t, this.onlineState = e;\n      }\n\n      function ul(t, e) {\n        this.clientId = t, this.activeTargetIds = e;\n      }\n\n      function cl(t, e, n) {\n        this.targetId = t, this.state = e, this.error = n;\n      }\n\n      function hl(t, e, n, r) {\n        this.user = t, this.batchId = e, this.state = n, this.error = r;\n      }\n\n      function ll() {\n        return \"undefined\" != typeof window ? window : null;\n      }\n\n      function fl() {\n        return \"undefined\" != typeof document ? document : null;\n      }\n\n      function dl(t) {\n        return new sa(t, !0);\n      }\n\n      function pl(t, e, n, r, i) {\n        var o = this;\n        this.localStore = t, this.datastore = e, this.asyncQueue = n, this.remoteSyncer = {}, this.kr = [], this.Or = new Map(), this.$r = new Set(), this.Mr = [], this.Lr = i, this.Lr.di(function (t) {\n          n.enqueueAndForget(function () {\n            return y(o, void 0, void 0, function () {\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return Fl(this) ? (Lr(\"RemoteStore\", \"Restarting streams for network reachability change.\"), [4, function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return (e = n).$r.add(4), [4, kl(e)];\n\n                            case 1:\n                              return t.sent(), e.Br.set(\"Unknown\"), e.$r.delete(4), [4, Cl(e)];\n\n                            case 2:\n                              return t.sent(), [2];\n                          }\n                        });\n                      });\n                    }(this)]) : [3, 2];\n\n                  case 1:\n                    t.sent(), t.label = 2;\n\n                  case 2:\n                    return [2];\n                }\n              });\n            });\n          });\n        }), this.Br = new Tl(n, r);\n      }\n\n      var yl,\n          gl,\n          ml,\n          vl = (Dl.prototype.reset = function () {\n        this.qi = 0;\n      }, Dl.prototype.Ki = function () {\n        this.qi = this.Bi;\n      }, Dl.prototype.ji = function (t) {\n        var e = this;\n        this.cancel();\n        var n = Math.floor(this.qi + this.Wi()),\n            r = Math.max(0, Date.now() - this.Qi),\n            i = Math.max(0, n - r);\n        0 < i && Lr(\"ExponentialBackoff\", \"Backing off for \" + i + \" ms (base delay: \" + this.qi + \" ms, delay with jitter: \" + n + \" ms, last attempt: \" + r + \" ms ago)\"), this.Ui = this.Se.enqueueAfterDelay(this.timerId, i, function () {\n          return e.Qi = Date.now(), t();\n        }), this.qi *= this.Li, this.qi < this.Mi && (this.qi = this.Mi), this.qi > this.Bi && (this.qi = this.Bi);\n      }, Dl.prototype.Gi = function () {\n        null !== this.Ui && (this.Ui.skipDelay(), this.Ui = null);\n      }, Dl.prototype.cancel = function () {\n        null !== this.Ui && (this.Ui.cancel(), this.Ui = null);\n      }, Dl.prototype.Wi = function () {\n        return (Math.random() - .5) * this.qi;\n      }, Dl),\n          I = (Nl.prototype.tr = function () {\n        return 1 === this.state || 2 === this.state || 4 === this.state;\n      }, Nl.prototype.er = function () {\n        return 2 === this.state;\n      }, Nl.prototype.start = function () {\n        3 !== this.state ? this.auth() : this.nr();\n      }, Nl.prototype.stop = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.tr() ? [4, this.close(0)] : [3, 2];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, Nl.prototype.sr = function () {\n        this.state = 0, this.Zi.reset();\n      }, Nl.prototype.ir = function () {\n        var t = this;\n        this.er() && null === this.Xi && (this.Xi = this.Se.enqueueAfterDelay(this.zi, 6e4, function () {\n          return t.rr();\n        }));\n      }, Nl.prototype.cr = function (t) {\n        this.ur(), this.stream.send(t);\n      }, Nl.prototype.rr = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return this.er() ? [2, this.close(0)] : [2];\n          });\n        });\n      }, Nl.prototype.ur = function () {\n        this.Xi && (this.Xi.cancel(), this.Xi = null);\n      }, Nl.prototype.close = function (e, n) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.ur(), this.Zi.cancel(), this.Yi++, 3 !== e ? this.Zi.reset() : n && n.code === Cr.RESOURCE_EXHAUSTED ? (Pr(n.toString()), Pr(\"Using maximum backoff delay to prevent overloading the backend.\"), this.Zi.Ki()) : n && n.code === Cr.UNAUTHENTICATED && this.Ji.invalidateToken(), null !== this.stream && (this.ar(), this.stream.close(), this.stream = null), this.state = e, [4, this.listener.Ri(n)];\n\n              case 1:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, Nl.prototype.ar = function () {}, Nl.prototype.auth = function () {\n        var n = this;\n        this.state = 1;\n        var t = this.hr(this.Yi),\n            e = this.Yi;\n        this.Ji.getToken().then(function (t) {\n          n.Yi === e && n.lr(t);\n        }, function (e) {\n          t(function () {\n            var t = new kr(Cr.UNKNOWN, \"Fetching auth token failed: \" + e.message);\n            return n.dr(t);\n          });\n        });\n      }, Nl.prototype.lr = function (t) {\n        var e = this,\n            n = this.hr(this.Yi);\n        this.stream = this.wr(t), this.stream.Ii(function () {\n          n(function () {\n            return e.state = 2, e.listener.Ii();\n          });\n        }), this.stream.Ri(function (t) {\n          n(function () {\n            return e.dr(t);\n          });\n        }), this.stream.onMessage(function (t) {\n          n(function () {\n            return e.onMessage(t);\n          });\n        });\n      }, Nl.prototype.nr = function () {\n        var t = this;\n        this.state = 4, this.Zi.ji(function () {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              return this.state = 0, this.start(), [2];\n            });\n          });\n        });\n      }, Nl.prototype.dr = function (t) {\n        return Lr(\"PersistentStream\", \"close with error: \" + t), this.stream = null, this.close(3, t);\n      }, Nl.prototype.hr = function (e) {\n        var n = this;\n        return function (t) {\n          n.Se.enqueueAndForget(function () {\n            return n.Yi === e ? t() : (Lr(\"PersistentStream\", \"stream callback skipped by getCloseGuardedDispatcher.\"), Promise.resolve());\n          });\n        };\n      }, Nl),\n          bl = (n(Al, ml = I), Al.prototype.wr = function (t) {\n        return this.Hi.$i(\"Listen\", t);\n      }, Al.prototype.onMessage = function (t) {\n        this.Zi.reset();\n\n        var e = function (t, e) {\n          if (\"targetChange\" in e) {\n            e.targetChange;\n            var n = \"NO_CHANGE\" === (o = e.targetChange.targetChangeType || \"NO_CHANGE\") ? 0 : \"ADD\" === o ? 1 : \"REMOVE\" === o ? 2 : \"CURRENT\" === o ? 3 : \"RESET\" === o ? 4 : Vr(),\n                r = e.targetChange.targetIds || [],\n                i = (s = e.targetChange.resumeToken, t.I ? (Ur(void 0 === s || \"string\" == typeof s), ii.fromBase64String(s || \"\")) : (Ur(void 0 === s || s instanceof Uint8Array), ii.fromUint8Array(s || new Uint8Array()))),\n                o = (a = e.targetChange.cause) && (u = void 0 === (c = a).code ? Cr.UNKNOWN : Ns(c.code), new kr(u, c.message || \"\")),\n                s = new Ys(n, r, i, o || null);\n          } else if (\"documentChange\" in e) {\n            e.documentChange, (n = e.documentChange).document, n.document.name, n.document.updateTime;\n            var r = da(t, n.document.name),\n                i = ca(n.document.updateTime),\n                a = new Oi({\n              mapValue: {\n                fields: n.document.fields\n              }\n            }),\n                u = (o = Pi.newFoundDocument(r, i, a), n.targetIds || []),\n                c = n.removedTargetIds || [];\n            s = new Hs(u, c, o.key, o);\n          } else if (\"documentDelete\" in e) e.documentDelete, (n = e.documentDelete).document, r = da(t, n.document), i = n.readTime ? ca(n.readTime) : zr.min(), a = Pi.newNoDocument(r, i), o = n.removedTargetIds || [], s = new Hs([], o, a.key, a);else if (\"documentRemove\" in e) e.documentRemove, (n = e.documentRemove).document, r = da(t, n.document), i = n.removedTargetIds || [], s = new Hs([], i, r, null);else {\n            if (!(\"filter\" in e)) return Vr();\n            e.filter;\n            e = e.filter;\n            e.targetId, n = e.count || 0, r = new vs(n), i = e.targetId, s = new Ws(i, r);\n          }\n\n          return s;\n        }(this.R, t),\n            t = function (t) {\n          if (!(\"targetChange\" in t)) return zr.min();\n          t = t.targetChange;\n          return (!t.targetIds || !t.targetIds.length) && t.readTime ? ca(t.readTime) : zr.min();\n        }(t);\n\n        return this.listener._r(e, t);\n      }, Al.prototype.mr = function (t) {\n        var e,\n            n,\n            r,\n            i = {};\n        i.database = ga(this.R), i.addTarget = (e = this.R, (r = Bi(r = (n = t).target) ? {\n          documents: Ta(e, r)\n        } : {\n          query: Ia(e, r)\n        }).targetId = n.targetId, 0 < n.resumeToken.approximateByteSize() ? r.resumeToken = ua(e, n.resumeToken) : 0 < n.snapshotVersion.compareTo(zr.min()) && (r.readTime = aa(e, n.snapshotVersion.toTimestamp())), r);\n        var o,\n            t = (this.R, o = t, null == (t = function () {\n          switch (o.purpose) {\n            case 0:\n              return null;\n\n            case 1:\n              return \"existence-filter-mismatch\";\n\n            case 2:\n              return \"limbo-document\";\n\n            default:\n              return Vr();\n          }\n        }()) ? null : {\n          \"goog-listen-tags\": t\n        });\n        t && (i.labels = t), this.cr(i);\n      }, Al.prototype.yr = function (t) {\n        var e = {};\n        e.database = ga(this.R), e.removeTarget = t, this.cr(e);\n      }, Al),\n          wl = (n(Sl, gl = I), Object.defineProperty(Sl.prototype, \"pr\", {\n        get: function get() {\n          return this.gr;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Sl.prototype.start = function () {\n        this.gr = !1, this.lastStreamToken = void 0, gl.prototype.start.call(this);\n      }, Sl.prototype.ar = function () {\n        this.gr && this.Er([]);\n      }, Sl.prototype.wr = function (t) {\n        return this.Hi.$i(\"Write\", t);\n      }, Sl.prototype.onMessage = function (t) {\n        if (Ur(!!t.streamToken), this.lastStreamToken = t.streamToken, this.gr) {\n          this.Zi.reset();\n          var e = (n = t.writeResults, r = t.commitTime, n && 0 < n.length ? (Ur(void 0 !== r), n.map(function (t) {\n            return n = r, (t = (e = t).updateTime ? ca(e.updateTime) : ca(n)).isEqual(zr.min()) && (t = ca(n)), new es(t, e.transformResults || []);\n            var e, n;\n          })) : []),\n              n = ca(t.commitTime);\n          return this.listener.Tr(n, e);\n        }\n\n        var n, r;\n        return Ur(!t.writeResults || 0 === t.writeResults.length), this.gr = !0, this.listener.Ir();\n      }, Sl.prototype.Ar = function () {\n        var t = {};\n        t.database = ga(this.R), this.cr(t);\n      }, Sl.prototype.Er = function (t) {\n        var e = this,\n            t = {\n          streamToken: this.lastStreamToken,\n          writes: t.map(function (t) {\n            return wa(e.R, t);\n          })\n        };\n        this.cr(t);\n      }, Sl),\n          El = (n(_l, yl = function yl() {}), _l.prototype.br = function () {\n        if (this.Rr) throw new kr(Cr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, _l.prototype.Ni = function (e, n, r) {\n        var i = this;\n        return this.br(), this.credentials.getToken().then(function (t) {\n          return i.Hi.Ni(e, n, r, t);\n        }).catch(function (t) {\n          throw \"FirebaseError\" === t.name ? (t.code === Cr.UNAUTHENTICATED && i.credentials.invalidateToken(), t) : new kr(Cr.UNKNOWN, t.toString());\n        });\n      }, _l.prototype.Oi = function (e, n, r) {\n        var i = this;\n        return this.br(), this.credentials.getToken().then(function (t) {\n          return i.Hi.Oi(e, n, r, t);\n        }).catch(function (t) {\n          throw \"FirebaseError\" === t.name ? (t.code === Cr.UNAUTHENTICATED && i.credentials.invalidateToken(), t) : new kr(Cr.UNKNOWN, t.toString());\n        });\n      }, _l.prototype.terminate = function () {\n        this.Rr = !0;\n      }, _l),\n          Tl = (Il.prototype.Sr = function () {\n        var t = this;\n        0 === this.vr && (this.Dr(\"Unknown\"), this.Pr = this.asyncQueue.enqueueAfterDelay(\"online_state_timeout\", 1e4, function () {\n          return t.Pr = null, t.Cr(\"Backend didn't respond within 10 seconds.\"), t.Dr(\"Offline\"), Promise.resolve();\n        }));\n      }, Il.prototype.Nr = function (t) {\n        \"Online\" === this.state ? this.Dr(\"Unknown\") : (this.vr++, 1 <= this.vr && (this.Fr(), this.Cr(\"Connection failed 1 times. Most recent error: \" + t.toString()), this.Dr(\"Offline\")));\n      }, Il.prototype.set = function (t) {\n        this.Fr(), this.vr = 0, \"Online\" === t && (this.Vr = !1), this.Dr(t);\n      }, Il.prototype.Dr = function (t) {\n        t !== this.state && (this.state = t, this.onlineStateHandler(t));\n      }, Il.prototype.Cr = function (t) {\n        t = \"Could not reach Cloud Firestore backend. \" + t + \"\\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.\";\n        this.Vr ? (Pr(t), this.Vr = !1) : Lr(\"OnlineStateTracker\", t);\n      }, Il.prototype.Fr = function () {\n        null !== this.Pr && (this.Pr.cancel(), this.Pr = null);\n      }, Il);\n\n      function Il(t, e) {\n        this.asyncQueue = t, this.onlineStateHandler = e, this.state = \"Unknown\", this.vr = 0, this.Pr = null, this.Vr = !0;\n      }\n\n      function _l(t, e, n) {\n        var r = this;\n        return (r = yl.call(this) || this).credentials = t, r.Hi = e, r.R = n, r.Rr = !1, r;\n      }\n\n      function Sl(t, e, n, r, i) {\n        var o = this;\n        return (o = gl.call(this, t, \"write_stream_connection_backoff\", \"write_stream_idle\", e, n, i) || this).R = r, o.gr = !1, o;\n      }\n\n      function Al(t, e, n, r, i) {\n        var o = this;\n        return (o = ml.call(this, t, \"listen_stream_connection_backoff\", \"listen_stream_idle\", e, n, i) || this).R = r, o;\n      }\n\n      function Nl(t, e, n, r, i, o) {\n        this.Se = t, this.zi = n, this.Hi = r, this.Ji = i, this.listener = o, this.state = 0, this.Yi = 0, this.Xi = null, this.stream = null, this.Zi = new vl(t, e);\n      }\n\n      function Dl(t, e, n, r, i) {\n        void 0 === n && (n = 1e3), void 0 === r && (r = 1.5), void 0 === i && (i = 6e4), this.Se = t, this.timerId = e, this.Mi = n, this.Li = r, this.Bi = i, this.qi = 0, this.Ui = null, this.Qi = Date.now(), this.reset();\n      }\n\n      function Cl(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (!Fl(r)) return [3, 4];\n                e = 0, n = r.Mr, t.label = 1;\n\n              case 1:\n                return e < n.length ? [4, (0, n[e])(!0)] : [3, 4];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return e++, [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function kl(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = 0, n = r.Mr, t.label = 1;\n\n              case 1:\n                return e < n.length ? [4, (0, n[e])(!1)] : [3, 4];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return e++, [3, 1];\n\n              case 4:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Rl(t, e) {\n        t.Or.has(e.targetId) || (t.Or.set(e.targetId, e), Ml(t) ? Pl(t) : zl(t).er() && Ol(t, e));\n      }\n\n      function xl(t, e) {\n        var n = t,\n            t = zl(n);\n        n.Or.delete(e), t.er() && Ll(n, e), 0 === n.Or.size && (t.er() ? t.ir() : Fl(n) && n.Br.set(\"Unknown\"));\n      }\n\n      function Ol(t, e) {\n        t.qr.U(e.targetId), zl(t).mr(e);\n      }\n\n      function Ll(t, e) {\n        t.qr.U(e), zl(t).yr(e);\n      }\n\n      function Pl(e) {\n        e.qr = new Js({\n          getRemoteKeysForTarget: function getRemoteKeysForTarget(t) {\n            return e.remoteSyncer.getRemoteKeysForTarget(t);\n          },\n          lt: function lt(t) {\n            return e.Or.get(t) || null;\n          }\n        }), zl(e).start(), e.Br.Sr();\n      }\n\n      function Ml(t) {\n        return Fl(t) && !zl(t).tr() && 0 < t.Or.size;\n      }\n\n      function Fl(t) {\n        return 0 === t.$r.size;\n      }\n\n      function Vl(t) {\n        t.qr = void 0;\n      }\n\n      function Ul(s, a, u) {\n        return y(this, void 0, void 0, function () {\n          var n, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (s.Br.set(\"Online\"), !(a instanceof Ys && 2 === a.state && a.cause)) return [3, 6];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 5]), [4, function (o, s) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r, i;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          e = s.cause, n = 0, r = s.targetIds, t.label = 1;\n\n                        case 1:\n                          return n < r.length ? (i = r[n], o.Or.has(i) ? [4, o.remoteSyncer.rejectListen(i, e)] : [3, 3]) : [3, 5];\n\n                        case 2:\n                          t.sent(), o.Or.delete(i), o.qr.removeTarget(i), t.label = 3;\n\n                        case 3:\n                          t.label = 4;\n\n                        case 4:\n                          return n++, [3, 1];\n\n                        case 5:\n                          return [2];\n                      }\n                    });\n                  });\n                }(s, a)];\n\n              case 2:\n                return t.sent(), [3, 5];\n\n              case 3:\n                return n = t.sent(), Lr(\"RemoteStore\", \"Failed to remove targets %s: %s \", a.targetIds.join(\",\"), n), [4, ql(s, n)];\n\n              case 4:\n                return t.sent(), [3, 5];\n\n              case 5:\n                return [3, 13];\n\n              case 6:\n                if (a instanceof Hs ? s.qr.X(a) : a instanceof Ws ? s.qr.rt(a) : s.qr.et(a), u.isEqual(zr.min())) return [3, 13];\n                t.label = 7;\n\n              case 7:\n                return t.trys.push([7, 11,, 13]), [4, ih(s.localStore)];\n\n              case 8:\n                return o = t.sent(), 0 <= u.compareTo(o) ? [4, (i = u, (e = (r = s).qr.ut(i)).targetChanges.forEach(function (t, e) {\n                  var n;\n                  0 < t.resumeToken.approximateByteSize() && (n = r.Or.get(e)) && r.Or.set(e, n.withResumeToken(t.resumeToken, i));\n                }), e.targetMismatches.forEach(function (t) {\n                  var e = r.Or.get(t);\n                  e && (r.Or.set(t, e.withResumeToken(ii.EMPTY_BYTE_STRING, e.snapshotVersion)), Ll(r, t), e = new Su(e.target, t, 1, e.sequenceNumber), Ol(r, e));\n                }), r.remoteSyncer.applyRemoteEvent(e))] : [3, 10];\n\n              case 9:\n                t.sent(), t.label = 10;\n\n              case 10:\n                return [3, 13];\n\n              case 11:\n                return Lr(\"RemoteStore\", \"Failed to raise snapshot:\", o = t.sent()), [4, ql(s, o)];\n\n              case 12:\n                return t.sent(), [3, 13];\n\n              case 13:\n                return [2];\n            }\n\n            var r, i, e;\n          });\n        });\n      }\n\n      function ql(n, r, i) {\n        return y(this, void 0, void 0, function () {\n          var e = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (!du(r)) throw r;\n                return n.$r.add(1), [4, kl(n)];\n\n              case 1:\n                return t.sent(), n.Br.set(\"Offline\"), i = i || function () {\n                  return ih(n.localStore);\n                }, n.asyncQueue.enqueueRetryable(function () {\n                  return y(e, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return Lr(\"RemoteStore\", \"Retrying IndexedDB access\"), [4, i()];\n\n                        case 1:\n                          return t.sent(), n.$r.delete(1), [4, Cl(n)];\n\n                        case 2:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }), [2];\n            }\n          });\n        });\n      }\n\n      function Bl(e, n) {\n        return n().catch(function (t) {\n          return ql(e, t, n);\n        });\n      }\n\n      function jl(u) {\n        return y(this, void 0, void 0, function () {\n          var i, o, s, a;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                o = Hl(i = u), s = 0 < i.kr.length ? i.kr[i.kr.length - 1].batchId : -1, t.label = 1;\n\n              case 1:\n                if (!(Fl(i) && i.kr.length < 10)) return [3, 7];\n                t.label = 2;\n\n              case 2:\n                return t.trys.push([2, 4,, 6]), [4, (e = i.localStore, n = s, (r = e).persistence.runTransaction(\"Get next mutation batch\", \"readonly\", function (t) {\n                  return void 0 === n && (n = -1), r._n.getNextMutationBatchAfterBatchId(t, n);\n                }))];\n\n              case 3:\n                return null === (a = t.sent()) ? (0 === i.kr.length && o.ir(), [3, 7]) : (s = a.batchId, function (t, e) {\n                  t.kr.push(e);\n                  t = Hl(t);\n                  t.er() && t.pr && t.Er(e.mutations);\n                }(i, a), [3, 6]);\n\n              case 4:\n                return a = t.sent(), [4, ql(i, a)];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [3, 1];\n\n              case 7:\n                return Kl(i) && Gl(i), [2];\n            }\n\n            var e, n, r;\n          });\n        });\n      }\n\n      function Kl(t) {\n        return Fl(t) && !Hl(t).tr() && 0 < t.kr.length;\n      }\n\n      function Gl(t) {\n        Hl(t).start();\n      }\n\n      function Ql(n, r) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e = n, r ? (e.$r.delete(2), [4, Cl(e)]) : [3, 2];\n\n              case 1:\n                return t.sent(), [3, 5];\n\n              case 2:\n                return r ? [3, 4] : (e.$r.add(2), [4, kl(e)]);\n\n              case 3:\n                t.sent(), e.Br.set(\"Unknown\"), t.label = 4;\n\n              case 4:\n                t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function zl(n) {\n        var t,\n            e,\n            r,\n            i = this;\n        return n.Ur || (n.Ur = (t = n.datastore, e = n.asyncQueue, r = {\n          Ii: function (n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return n.Or.forEach(function (t, e) {\n                  Ol(n, t);\n                }), [2];\n              });\n            });\n          }.bind(null, n),\n          Ri: function (e, n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return Vl(e), Ml(e) ? (e.Br.Nr(n), Pl(e)) : e.Br.set(\"Unknown\"), [2];\n              });\n            });\n          }.bind(null, n),\n          _r: Ul.bind(null, n)\n        }, t.br(), new bl(e, t.Hi, t.credentials, t.R, r)), n.Mr.push(function (e) {\n          return y(i, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e ? (n.Ur.sr(), Ml(n) ? Pl(n) : n.Br.set(\"Unknown\"), [3, 3]) : [3, 1];\n\n                case 1:\n                  return [4, n.Ur.stop()];\n\n                case 2:\n                  t.sent(), Vl(n), t.label = 3;\n\n                case 3:\n                  return [2];\n              }\n            });\n          });\n        })), n.Ur;\n      }\n\n      function Hl(n) {\n        var t,\n            e,\n            r,\n            i = this;\n        return n.Qr || (n.Qr = (t = n.datastore, e = n.asyncQueue, r = {\n          Ii: function (e) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return Hl(e).Ar(), [2];\n              });\n            });\n          }.bind(null, n),\n          Ri: function (e, n) {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return n && Hl(e).pr ? [4, function (r, i) {\n                      return y(this, void 0, void 0, function () {\n                        var e, n;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return As(n = i.code) && n !== Cr.ABORTED ? (e = r.kr.shift(), Hl(r).sr(), [4, Bl(r, function () {\n                                return r.remoteSyncer.rejectFailedWrite(e.batchId, i);\n                              })]) : [3, 3];\n\n                            case 1:\n                              return t.sent(), [4, jl(r)];\n\n                            case 2:\n                              t.sent(), t.label = 3;\n\n                            case 3:\n                              return [2];\n                          }\n                        });\n                      });\n                    }(e, n)] : [3, 2];\n\n                  case 1:\n                    t.sent(), t.label = 2;\n\n                  case 2:\n                    return Kl(e) && Gl(e), [2];\n                }\n              });\n            });\n          }.bind(null, n),\n          Ir: function (o) {\n            return y(this, void 0, void 0, function () {\n              var e, n, r, i;\n              return g(this, function (t) {\n                for (e = Hl(o), n = 0, r = o.kr; n < r.length; n++) {\n                  i = r[n], e.Er(i.mutations);\n                }\n\n                return [2];\n              });\n            });\n          }.bind(null, n),\n          Tr: function (r, i, o) {\n            return y(this, void 0, void 0, function () {\n              var e, n;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = r.kr.shift(), n = _u.from(e, i, o), [4, Bl(r, function () {\n                      return r.remoteSyncer.applySuccessfulWrite(n);\n                    })];\n\n                  case 1:\n                    return t.sent(), [4, jl(r)];\n\n                  case 2:\n                    return t.sent(), [2];\n                }\n              });\n            });\n          }.bind(null, n)\n        }, t.br(), new wl(e, t.Hi, t.credentials, t.R, r)), n.Mr.push(function (e) {\n          return y(i, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e ? (n.Qr.sr(), [4, jl(n)]) : [3, 2];\n\n                case 1:\n                  return t.sent(), [3, 4];\n\n                case 2:\n                  return [4, n.Qr.stop()];\n\n                case 3:\n                  t.sent(), 0 < n.kr.length && (Lr(\"RemoteStore\", \"Stopping write stream with \" + n.kr.length + \" pending writes\"), n.kr = []), t.label = 4;\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        })), n.Qr;\n      }\n\n      var Wl = (Yl.createAndSchedule = function (t, e, n, r, i) {\n        i = new Yl(t, e, Date.now() + n, r, i);\n        return i.start(n), i;\n      }, Yl.prototype.start = function (t) {\n        var e = this;\n        this.timerHandle = setTimeout(function () {\n          return e.handleDelayElapsed();\n        }, t);\n      }, Yl.prototype.skipDelay = function () {\n        return this.handleDelayElapsed();\n      }, Yl.prototype.cancel = function (t) {\n        null !== this.timerHandle && (this.clearTimeout(), this.deferred.reject(new kr(Cr.CANCELLED, \"Operation cancelled\" + (t ? \": \" + t : \"\"))));\n      }, Yl.prototype.handleDelayElapsed = function () {\n        var e = this;\n        this.asyncQueue.enqueueAndForget(function () {\n          return null !== e.timerHandle ? (e.clearTimeout(), e.op().then(function (t) {\n            return e.deferred.resolve(t);\n          })) : Promise.resolve();\n        });\n      }, Yl.prototype.clearTimeout = function () {\n        null !== this.timerHandle && (this.removalCallback(this), clearTimeout(this.timerHandle), this.timerHandle = null);\n      }, Yl);\n\n      function Yl(t, e, n, r, i) {\n        this.asyncQueue = t, this.timerId = e, this.targetTimeMs = n, this.op = r, this.removalCallback = i, this.deferred = new eu(), this.then = this.deferred.promise.then.bind(this.deferred.promise), this.deferred.promise.catch(function (t) {});\n      }\n\n      function Xl(t, e) {\n        if (Pr(\"AsyncQueue\", e + \": \" + t), du(t)) return new kr(Cr.UNAVAILABLE, e + \": \" + t);\n        throw t;\n      }\n\n      function Jl() {\n        this.queries = new Nc(Ro, ko), this.onlineState = \"Unknown\", this.Gr = new Set();\n      }\n\n      var $l = (of.emptySet = function (t) {\n        return new of(t.comparator);\n      }, of.prototype.has = function (t) {\n        return null != this.keyedMap.get(t);\n      }, of.prototype.get = function (t) {\n        return this.keyedMap.get(t);\n      }, of.prototype.first = function () {\n        return this.sortedSet.minKey();\n      }, of.prototype.last = function () {\n        return this.sortedSet.maxKey();\n      }, of.prototype.isEmpty = function () {\n        return this.sortedSet.isEmpty();\n      }, of.prototype.indexOf = function (t) {\n        t = this.keyedMap.get(t);\n        return t ? this.sortedSet.indexOf(t) : -1;\n      }, Object.defineProperty(of.prototype, \"size\", {\n        get: function get() {\n          return this.sortedSet.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), of.prototype.forEach = function (n) {\n        this.sortedSet.inorderTraversal(function (t, e) {\n          return n(t), !1;\n        });\n      }, of.prototype.add = function (t) {\n        var e = this.delete(t.key);\n        return e.copy(e.keyedMap.insert(t.key, t), e.sortedSet.insert(t, null));\n      }, of.prototype.delete = function (t) {\n        var e = this.get(t);\n        return e ? this.copy(this.keyedMap.remove(t), this.sortedSet.remove(e)) : this;\n      }, of.prototype.isEqual = function (t) {\n        if (!(t instanceof of)) return !1;\n        if (this.size !== t.size) return !1;\n\n        for (var e = this.sortedSet.getIterator(), n = t.sortedSet.getIterator(); e.hasNext();) {\n          var r = e.getNext().key,\n              i = n.getNext().key;\n          if (!r.isEqual(i)) return !1;\n        }\n\n        return !0;\n      }, of.prototype.toString = function () {\n        var e = [];\n        return this.forEach(function (t) {\n          e.push(t.toString());\n        }), 0 === e.length ? \"DocumentSet ()\" : \"DocumentSet (\\n  \" + e.join(\"  \\n\") + \"\\n)\";\n      }, of.prototype.copy = function (t, e) {\n        var n = new of();\n        return n.comparator = this.comparator, n.keyedMap = t, n.sortedSet = e, n;\n      }, of),\n          Zl = (rf.prototype.track = function (t) {\n        var e = t.doc.key,\n            n = this.Kr.get(e);\n        !n || 0 !== t.type && 3 === n.type ? this.Kr = this.Kr.insert(e, t) : 3 === t.type && 1 !== n.type ? this.Kr = this.Kr.insert(e, {\n          type: n.type,\n          doc: t.doc\n        }) : 2 === t.type && 2 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 2,\n          doc: t.doc\n        }) : 2 === t.type && 0 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 0,\n          doc: t.doc\n        }) : 1 === t.type && 0 === n.type ? this.Kr = this.Kr.remove(e) : 1 === t.type && 2 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 1,\n          doc: n.doc\n        }) : 0 === t.type && 1 === n.type ? this.Kr = this.Kr.insert(e, {\n          type: 2,\n          doc: t.doc\n        }) : Vr();\n      }, rf.prototype.jr = function () {\n        var n = [];\n        return this.Kr.inorderTraversal(function (t, e) {\n          n.push(e);\n        }), n;\n      }, rf),\n          tf = (nf.fromInitialDocuments = function (t, e, n, r) {\n        var i = [];\n        return e.forEach(function (t) {\n          i.push({\n            type: 0,\n            doc: t\n          });\n        }), new nf(t, e, $l.emptySet(e), i, n, r, !0, !1);\n      }, Object.defineProperty(nf.prototype, \"hasPendingWrites\", {\n        get: function get() {\n          return !this.mutatedKeys.isEmpty();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), nf.prototype.isEqual = function (t) {\n        if (!(this.fromCache === t.fromCache && this.syncStateChanged === t.syncStateChanged && this.mutatedKeys.isEqual(t.mutatedKeys) && ko(this.query, t.query) && this.docs.isEqual(t.docs) && this.oldDocs.isEqual(t.oldDocs))) return !1;\n        var e = this.docChanges,\n            n = t.docChanges;\n        if (e.length !== n.length) return !1;\n\n        for (var r = 0; r < e.length; r++) {\n          if (e[r].type !== n[r].type || !e[r].doc.isEqual(n[r].doc)) return !1;\n        }\n\n        return !0;\n      }, nf),\n          ef = function ef() {\n        this.Wr = void 0, this.listeners = [];\n      };\n\n      function nf(t, e, n, r, i, o, s, a) {\n        this.query = t, this.docs = e, this.oldDocs = n, this.docChanges = r, this.mutatedKeys = i, this.fromCache = o, this.syncStateChanged = s, this.excludesMetadataChanges = a;\n      }\n\n      function rf() {\n        this.Kr = new Ds(bi.comparator);\n      }\n\n      function of(n) {\n        this.comparator = n ? function (t, e) {\n          return n(t, e) || bi.comparator(t.key, e.key);\n        } : function (t, e) {\n          return bi.comparator(t.key, e.key);\n        }, this.keyedMap = qs, this.sortedSet = new Ds(this.comparator);\n      }\n\n      function sf(s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (e = s, n = a.query, r = !1, (i = e.queries.get(n)) || (r = !0, i = new ef()), !r) return [3, 4];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), o = i, [4, e.onListen(n)];\n\n              case 2:\n                return o.Wr = t.sent(), [3, 4];\n\n              case 3:\n                return o = t.sent(), o = Xl(o, \"Initialization of query '\" + xo(a.query) + \"' failed\"), [2, void a.onError(o)];\n\n              case 4:\n                return e.queries.set(n, i), i.listeners.push(a), a.zr(e.onlineState), i.Wr && a.Hr(i.Wr) && uf(e), [2];\n            }\n          });\n        });\n      }\n\n      function af(s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o;\n          return g(this, function (t) {\n            return e = s, n = a.query, r = !1, (i = e.queries.get(n)) && 0 <= (o = i.listeners.indexOf(a)) && (i.listeners.splice(o, 1), r = 0 === i.listeners.length), r ? [2, (e.queries.delete(n), e.onUnlisten(n))] : [2];\n          });\n        });\n      }\n\n      function uf(t) {\n        t.Gr.forEach(function (t) {\n          t.next();\n        });\n      }\n\n      var cf = (gf.prototype.Hr = function (t) {\n        if (!this.options.includeMetadataChanges) {\n          for (var e = [], n = 0, r = t.docChanges; n < r.length; n++) {\n            var i = r[n];\n            3 !== i.type && e.push(i);\n          }\n\n          t = new tf(t.query, t.docs, t.oldDocs, e, t.mutatedKeys, t.fromCache, t.syncStateChanged, !0);\n        }\n\n        var o = !1;\n        return this.Yr ? this.Zr(t) && (this.Jr.next(t), o = !0) : this.eo(t, this.onlineState) && (this.no(t), o = !0), this.Xr = t, o;\n      }, gf.prototype.onError = function (t) {\n        this.Jr.error(t);\n      }, gf.prototype.zr = function (t) {\n        this.onlineState = t;\n        var e = !1;\n        return this.Xr && !this.Yr && this.eo(this.Xr, t) && (this.no(this.Xr), e = !0), e;\n      }, gf.prototype.eo = function (t, e) {\n        if (!t.fromCache) return !0;\n        var n = \"Offline\" !== e;\n        return !(this.options.so && n || t.docs.isEmpty() && \"Offline\" !== e);\n      }, gf.prototype.Zr = function (t) {\n        if (0 < t.docChanges.length) return !0;\n        var e = this.Xr && this.Xr.hasPendingWrites !== t.hasPendingWrites;\n        return !(!t.syncStateChanged && !e) && !0 === this.options.includeMetadataChanges;\n      }, gf.prototype.no = function (t) {\n        t = tf.fromInitialDocuments(t.query, t.docs, t.mutatedKeys, t.fromCache), this.Yr = !0, this.Jr.next(t);\n      }, gf),\n          hf = (yf.prototype.io = function () {\n        return \"metadata\" in this.payload;\n      }, yf),\n          lf = (pf.prototype.qn = function (t) {\n        return da(this.R, t);\n      }, pf.prototype.Un = function (t) {\n        return t.metadata.exists ? ba(this.R, t.document, !1) : Pi.newNoDocument(this.qn(t.metadata.name), this.Qn(t.metadata.readTime));\n      }, pf.prototype.Qn = ca, pf),\n          ff = (df.prototype.oo = function (t) {\n        this.progress.bytesLoaded += t.byteLength;\n        var e = this.progress.documentsLoaded;\n        return t.payload.namedQuery ? this.queries.push(t.payload.namedQuery) : t.payload.documentMetadata ? (this.documents.push({\n          metadata: t.payload.documentMetadata\n        }), t.payload.documentMetadata.exists || ++e) : t.payload.document && (this.documents[this.documents.length - 1].document = t.payload.document, ++e), e !== this.progress.documentsLoaded ? (this.progress.documentsLoaded = e, Object.assign({}, this.progress)) : null;\n      }, df.prototype.co = function (t) {\n        for (var e = new Map(), n = new lf(this.R), r = 0, i = t; r < i.length; r++) {\n          var o = i[r];\n          if (o.metadata.queries) for (var s = n.qn(o.metadata.name), a = 0, u = o.metadata.queries; a < u.length; a++) {\n            var c = u[a],\n                h = (e.get(c) || Ks()).add(s);\n            e.set(c, h);\n          }\n        }\n\n        return e;\n      }, df.prototype.complete = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, function (l, f, d, p) {\n                  return y(this, void 0, void 0, function () {\n                    var n, r, i, o, e, s, a, u, c, h;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          for (n = l, r = Ks(), i = Fs, o = Bs, e = 0, s = d; e < s.length; e++) {\n                            a = s[e], u = f.qn(a.metadata.name), a.document && (r = r.add(u)), i = i.insert(u, f.Un(a)), o = o.insert(u, f.Qn(a.metadata.readTime));\n                          }\n\n                          return c = n.$n.newChangeBuffer({\n                            trackRemovals: !0\n                          }), [4, ah(n, Do(Eo(ti.fromString(\"__bundle__/docs/\" + p))))];\n\n                        case 1:\n                          return h = t.sent(), [2, n.persistence.runTransaction(\"Apply bundle documents\", \"readwrite\", function (e) {\n                            return sh(e, c, i, zr.min(), o).next(function (t) {\n                              return c.apply(e), t;\n                            }).next(function (t) {\n                              return n.qe.removeMatchingKeysForTargetId(e, h.targetId).next(function () {\n                                return n.qe.addMatchingKeys(e, r, h.targetId);\n                              }).next(function () {\n                                return n.Mn.En(e, t);\n                              }).next(function () {\n                                return t;\n                              });\n                            });\n                          })];\n                      }\n                    });\n                  });\n                }(this.localStore, new lf(this.R), this.documents, this.ro.id)];\n\n              case 1:\n                e = t.sent(), n = this.co(this.documents), r = 0, i = this.queries, t.label = 2;\n\n              case 2:\n                return r < i.length ? (i = i[r], [4, function (e, i, o) {\n                  return void 0 === o && (o = Ks()), y(this, void 0, void 0, function () {\n                    var n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, ah(e, Do(Uu(i.bundledQuery)))];\n\n                        case 1:\n                          return n = t.sent(), [2, (r = e).persistence.runTransaction(\"Save named query\", \"readwrite\", function (t) {\n                            var e = ca(i.readTime);\n                            if (0 <= n.snapshotVersion.compareTo(e)) return r.Qe.saveNamedQuery(t, i);\n                            e = n.withResumeToken(ii.EMPTY_BYTE_STRING, e);\n                            return r.Fn = r.Fn.insert(e.targetId, e), r.qe.updateTargetData(t, e).next(function () {\n                              return r.qe.removeMatchingKeysForTargetId(t, n.targetId);\n                            }).next(function () {\n                              return r.qe.addMatchingKeys(t, o, n.targetId);\n                            }).next(function () {\n                              return r.Qe.saveNamedQuery(t, i);\n                            });\n                          })];\n                      }\n                    });\n                  });\n                }(this.localStore, i, n.get(i.name))]) : [3, 5];\n\n              case 3:\n                t.sent(), t.label = 4;\n\n              case 4:\n                return r++, [3, 2];\n\n              case 5:\n                return [2, (this.progress.taskState = \"Success\", new zc(Object.assign({}, this.progress), e))];\n            }\n          });\n        });\n      }, df);\n\n      function df(t, e, n) {\n        this.ro = t, this.localStore = e, this.R = n, this.queries = [], this.documents = [], this.progress = mf(t);\n      }\n\n      function pf(t) {\n        this.R = t;\n      }\n\n      function yf(t, e) {\n        this.payload = t, this.byteLength = e;\n      }\n\n      function gf(t, e, n) {\n        this.query = t, this.Jr = e, this.Yr = !1, this.Xr = null, this.onlineState = \"Unknown\", this.options = n || {};\n      }\n\n      function mf(t) {\n        return {\n          taskState: \"Running\",\n          documentsLoaded: 0,\n          bytesLoaded: 0,\n          totalDocuments: t.totalDocuments,\n          totalBytes: t.totalBytes\n        };\n      }\n\n      var vf = function vf(t) {\n        this.key = t;\n      },\n          bf = function bf(t) {\n        this.key = t;\n      },\n          wf = (Object.defineProperty(Sf.prototype, \"wo\", {\n        get: function get() {\n          return this.uo;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Sf.prototype._o = function (t, e) {\n        var s = this,\n            a = e ? e.mo : new Zl(),\n            u = (e || this).fo,\n            c = (e || this).mutatedKeys,\n            h = u,\n            l = !1,\n            f = To(this.query) && u.size === this.query.limit ? u.last() : null,\n            d = Io(this.query) && u.size === this.query.limit ? u.first() : null;\n        if (t.inorderTraversal(function (t, e) {\n          var n = u.get(t),\n              r = Oo(s.query, e) ? e : null,\n              i = !!n && s.mutatedKeys.has(n.key),\n              o = !!r && (r.hasLocalMutations || s.mutatedKeys.has(r.key) && r.hasCommittedMutations),\n              e = !1;\n          n && r ? n.data.isEqual(r.data) ? i !== o && (a.track({\n            type: 3,\n            doc: r\n          }), e = !0) : s.yo(n, r) || (a.track({\n            type: 2,\n            doc: r\n          }), e = !0, (f && 0 < s.lo(r, f) || d && s.lo(r, d) < 0) && (l = !0)) : !n && r ? (a.track({\n            type: 0,\n            doc: r\n          }), e = !0) : n && !r && (a.track({\n            type: 1,\n            doc: n\n          }), e = !0, (f || d) && (l = !0)), e && (c = r ? (h = h.add(r), o ? c.add(t) : c.delete(t)) : (h = h.delete(t), c.delete(t)));\n        }), To(this.query) || Io(this.query)) for (; h.size > this.query.limit;) {\n          var n = To(this.query) ? h.last() : h.first(),\n              h = h.delete(n.key),\n              c = c.delete(n.key);\n          a.track({\n            type: 1,\n            doc: n\n          });\n        }\n        return {\n          fo: h,\n          mo: a,\n          Nn: l,\n          mutatedKeys: c\n        };\n      }, Sf.prototype.yo = function (t, e) {\n        return t.hasLocalMutations && e.hasCommittedMutations && !e.hasLocalMutations;\n      }, Sf.prototype.applyChanges = function (t, e, n) {\n        var o = this,\n            r = this.fo;\n        this.fo = t.fo, this.mutatedKeys = t.mutatedKeys;\n        var i = t.mo.jr();\n        i.sort(function (t, e) {\n          return r = t.type, i = e.type, n(r) - n(i) || o.lo(t.doc, e.doc);\n\n          function n(t) {\n            switch (t) {\n              case 0:\n                return 1;\n\n              case 2:\n              case 3:\n                return 2;\n\n              case 1:\n                return 0;\n\n              default:\n                return Vr();\n            }\n          }\n\n          var r, i;\n        }), this.po(n);\n        var s = e ? this.Eo() : [],\n            n = 0 === this.ho.size && this.current ? 1 : 0,\n            e = n !== this.ao;\n        return this.ao = n, 0 !== i.length || e ? {\n          snapshot: new tf(this.query, t.fo, r, i, t.mutatedKeys, 0 == n, e, !1),\n          To: s\n        } : {\n          To: s\n        };\n      }, Sf.prototype.zr = function (t) {\n        return this.current && \"Offline\" === t ? (this.current = !1, this.applyChanges({\n          fo: this.fo,\n          mo: new Zl(),\n          mutatedKeys: this.mutatedKeys,\n          Nn: !1\n        }, !1)) : {\n          To: []\n        };\n      }, Sf.prototype.Io = function (t) {\n        return !this.uo.has(t) && !!this.fo.has(t) && !this.fo.get(t).hasLocalMutations;\n      }, Sf.prototype.po = function (t) {\n        var e = this;\n        t && (t.addedDocuments.forEach(function (t) {\n          return e.uo = e.uo.add(t);\n        }), t.modifiedDocuments.forEach(function (t) {}), t.removedDocuments.forEach(function (t) {\n          return e.uo = e.uo.delete(t);\n        }), this.current = t.current);\n      }, Sf.prototype.Eo = function () {\n        var e = this;\n        if (!this.current) return [];\n        var n = this.ho;\n        this.ho = Ks(), this.fo.forEach(function (t) {\n          e.Io(t.key) && (e.ho = e.ho.add(t.key));\n        });\n        var r = [];\n        return n.forEach(function (t) {\n          e.ho.has(t) || r.push(new bf(t));\n        }), this.ho.forEach(function (t) {\n          n.has(t) || r.push(new vf(t));\n        }), r;\n      }, Sf.prototype.Ao = function (t) {\n        this.uo = t.Bn, this.ho = Ks();\n        t = this._o(t.documents);\n        return this.applyChanges(t, !0);\n      }, Sf.prototype.Ro = function () {\n        return tf.fromInitialDocuments(this.query, this.fo, this.mutatedKeys, 0 === this.ao);\n      }, Sf),\n          Ef = function Ef(t, e, n) {\n        this.query = t, this.targetId = e, this.view = n;\n      },\n          Tf = function Tf(t) {\n        this.key = t, this.bo = !1;\n      },\n          If = (Object.defineProperty(_f.prototype, \"isPrimaryClient\", {\n        get: function get() {\n          return !0 === this.Oo;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), _f);\n\n      function _f(t, e, n, r, i, o) {\n        this.localStore = t, this.remoteStore = e, this.eventManager = n, this.sharedClientState = r, this.currentUser = i, this.maxConcurrentLimboResolutions = o, this.vo = {}, this.Po = new Nc(Ro, ko), this.Vo = new Map(), this.So = new Set(), this.Do = new Ds(bi.comparator), this.Co = new Map(), this.No = new gh(), this.xo = {}, this.Fo = new Map(), this.ko = uc.Yt(), this.onlineState = \"Unknown\", this.Oo = void 0;\n      }\n\n      function Sf(t, e) {\n        this.query = t, this.uo = e, this.ao = null, this.current = !1, this.ho = Ks(), this.mutatedKeys = Ks(), this.lo = Lo(t), this.fo = new $l(this.lo);\n      }\n\n      function Af(i, o, s, a) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return i.$o = function (t, e, n) {\n                  return function (r, i, o, s) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = i.view._o(o)).Nn ? [4, ch(r.localStore, i.query, !1).then(function (t) {\n                              t = t.documents;\n                              return i.view._o(t, e);\n                            })] : [3, 2];\n\n                          case 1:\n                            e = t.sent(), t.label = 2;\n\n                          case 2:\n                            return n = s && s.targetChanges.get(i.targetId), n = i.view.applyChanges(e, r.isPrimaryClient, n), [2, (Mf(r, i.targetId, n.To), n.snapshot)];\n                        }\n                      });\n                    });\n                  }(i, t, e, n);\n                }, [4, ch(i.localStore, o, !0)];\n\n              case 1:\n                return n = t.sent(), r = new wf(o, n.Bn), e = r._o(n.documents), n = zs.createSynthesizedTargetChangeForCurrentChange(s, a && \"Offline\" !== i.onlineState), n = r.applyChanges(e, i.isPrimaryClient, n), Mf(i, s, n.To), r = new Ef(o, s, r), [2, (i.Po.set(o, r), i.Vo.has(s) ? i.Vo.get(s).push(o) : i.Vo.set(s, [o]), n.snapshot)];\n            }\n          });\n        });\n      }\n\n      function Nf(f, d, p) {\n        return y(this, void 0, void 0, function () {\n          var s, l;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                l = Qf(f), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 5,, 6]), [4, (i = l.localStore, a = d, c = i, h = Qr.now(), o = a.reduce(function (t, e) {\n                  return t.add(e.key);\n                }, Ks()), c.persistence.runTransaction(\"Locally write mutations\", \"readwrite\", function (s) {\n                  return c.Mn.pn(s, o).next(function (t) {\n                    u = t;\n\n                    for (var e = [], n = 0, r = a; n < r.length; n++) {\n                      var i = r[n],\n                          o = function (t, e) {\n                        for (var n = null, r = 0, i = t.fieldTransforms; r < i.length; r++) {\n                          var o = i[r],\n                              s = e.data.field(o.field),\n                              s = Vo(o.transform, s || null);\n                          null != s && (n = null == n ? Oi.empty() : n).set(o.field, s);\n                        }\n\n                        return n || null;\n                      }(i, u.get(i.key));\n\n                      null != o && e.push(new fs(i.key, o, function s(t) {\n                        var a = [];\n                        return Xr(t.fields || {}, function (t, e) {\n                          var n = new ni([t]);\n                          if (xi(e)) {\n                            if (0 === (e = s(e.mapValue).fields).length) a.push(n);else for (var r = 0, i = e; r < i.length; r++) {\n                              var o = i[r];\n                              a.push(n.child(o));\n                            }\n                          } else a.push(n);\n                        }), new ri(a);\n                      }(o.toProto().mapValue), rs.exists(!0)));\n                    }\n\n                    return c._n.addMutationBatch(s, h, e, a);\n                  });\n                }).then(function (t) {\n                  return t.applyToLocalDocumentSet(u), {\n                    batchId: t.batchId,\n                    changes: u\n                  };\n                }))];\n\n              case 2:\n                return s = t.sent(), l.sharedClientState.addPendingMutation(s.batchId), e = l, n = s.batchId, r = p, i = (i = (i = e.xo[e.currentUser.toKey()]) || new Ds(jr)).insert(n, r), e.xo[e.currentUser.toKey()] = i, [4, Vf(l, s.changes)];\n\n              case 3:\n                return t.sent(), [4, jl(l.remoteStore)];\n\n              case 4:\n                return t.sent(), [3, 6];\n\n              case 5:\n                return l = t.sent(), l = Xl(l, \"Failed to persist write\"), p.reject(l), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, n, r, i, a, u, c, h, o;\n          });\n        });\n      }\n\n      function Df(r, i) {\n        return y(this, void 0, void 0, function () {\n          var n, e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = r, t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, oh(n.localStore, i)];\n\n              case 2:\n                return e = t.sent(), i.targetChanges.forEach(function (t, e) {\n                  e = n.Co.get(e);\n                  e && (Ur(t.addedDocuments.size + t.modifiedDocuments.size + t.removedDocuments.size <= 1), 0 < t.addedDocuments.size ? e.bo = !0 : 0 < t.modifiedDocuments.size ? Ur(e.bo) : 0 < t.removedDocuments.size && (Ur(e.bo), e.bo = !1));\n                }), [4, Vf(n, e, i)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, yc(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Cf(t, n, e) {\n        var r,\n            t = t;\n        (t.isPrimaryClient && 0 === e || !t.isPrimaryClient && 1 === e) && (r = [], t.Po.forEach(function (t, e) {\n          e = e.view.zr(n);\n          e.snapshot && r.push(e.snapshot);\n        }), function (t, i) {\n          t.onlineState = i;\n          var o = !1;\n          t.queries.forEach(function (t, e) {\n            for (var n = 0, r = e.listeners; n < r.length; n++) {\n              r[n].zr(i) && (o = !0);\n            }\n          }), o && uf(t);\n        }(t.eventManager, n), r.length && t.vo._r(r), t.onlineState = n, t.isPrimaryClient && t.sharedClientState.setOnlineState(n));\n      }\n\n      function kf(s, a, u) {\n        return y(this, void 0, void 0, function () {\n          var n, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                n = s, t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 4,, 6]), [4, (e = n.localStore, r = a, (i = e).persistence.runTransaction(\"Reject batch\", \"readwrite-primary\", function (e) {\n                  var n;\n                  return i._n.lookupMutationBatch(e, r).next(function (t) {\n                    return Ur(null !== t), n = t.keys(), i._n.removeMutationBatch(e, t);\n                  }).next(function () {\n                    return i._n.performConsistencyCheck(e);\n                  }).next(function () {\n                    return i.Mn.pn(e, n);\n                  });\n                }))];\n\n              case 2:\n                return o = t.sent(), Of(n, a, u), xf(n, a), n.sharedClientState.updateMutationState(a, \"rejected\", u), [4, Vf(n, o)];\n\n              case 3:\n                return t.sent(), [3, 6];\n\n              case 4:\n                return [4, yc(t.sent())];\n\n              case 5:\n                return t.sent(), [3, 6];\n\n              case 6:\n                return [2];\n            }\n\n            var e, r, i;\n          });\n        });\n      }\n\n      function Rf(o, s) {\n        return y(this, void 0, void 0, function () {\n          var n, r, i;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                Fl((n = o).remoteStore) || Lr(\"SyncEngine\", \"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.\"), t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, (e = n.localStore).persistence.runTransaction(\"Get highest unacknowledged batch id\", \"readonly\", function (t) {\n                  return e._n.getHighestUnacknowledgedBatchId(t);\n                })];\n\n              case 2:\n                return -1 === (r = t.sent()) ? [2, void s.resolve()] : ((i = n.Fo.get(r) || []).push(s), n.Fo.set(r, i), [3, 4]);\n\n              case 3:\n                return i = t.sent(), i = Xl(i, \"Initialization of waitForPendingWrites() operation failed\"), s.reject(i), [3, 4];\n\n              case 4:\n                return [2];\n            }\n\n            var e;\n          });\n        });\n      }\n\n      function xf(t, e) {\n        (t.Fo.get(e) || []).forEach(function (t) {\n          t.resolve();\n        }), t.Fo.delete(e);\n      }\n\n      function Of(t, e, n) {\n        var r = t,\n            i = r.xo[r.currentUser.toKey()];\n        i && ((t = i.get(e)) && (n ? t.reject(n) : t.resolve(), i = i.remove(e)), r.xo[r.currentUser.toKey()] = i);\n      }\n\n      function Lf(e, t, n) {\n        void 0 === n && (n = null), e.sharedClientState.removeLocalQueryTarget(t);\n\n        for (var r = 0, i = e.Vo.get(t); r < i.length; r++) {\n          var o = i[r];\n          e.Po.delete(o), n && e.vo.Mo(o, n);\n        }\n\n        e.Vo.delete(t), e.isPrimaryClient && e.No.Zn(t).forEach(function (t) {\n          e.No.containsKey(t) || Pf(e, t);\n        });\n      }\n\n      function Pf(t, e) {\n        t.So.delete(e.path.canonicalString());\n        var n = t.Do.get(e);\n        null !== n && (xl(t.remoteStore, n), t.Do = t.Do.remove(e), t.Co.delete(n), Ff(t));\n      }\n\n      function Mf(t, e, n) {\n        for (var r, i, o, s = 0, a = n; s < a.length; s++) {\n          var u = a[s];\n          u instanceof vf ? (t.No.addReference(u.key, e), r = t, o = void 0, i = (o = (i = u).key).path.canonicalString(), r.Do.get(o) || r.So.has(i) || (Lr(\"SyncEngine\", \"New document in limbo: \" + o), r.So.add(i), Ff(r))) : u instanceof bf ? (Lr(\"SyncEngine\", \"Document no longer in limbo: \" + u.key), t.No.removeReference(u.key, e), t.No.containsKey(u.key) || Pf(t, u.key)) : Vr();\n        }\n      }\n\n      function Ff(t) {\n        for (; 0 < t.So.size && t.Do.size < t.maxConcurrentLimboResolutions;) {\n          var e = t.So.values().next().value;\n          t.So.delete(e);\n          var n = new bi(ti.fromString(e)),\n              e = t.ko.next();\n          t.Co.set(e, new Tf(n)), t.Do = t.Do.insert(n, e), Rl(t.remoteStore, new Su(Do(Eo(n.path)), e, 2, Ar.o));\n        }\n      }\n\n      function Vf(e, s, a) {\n        return y(this, void 0, void 0, function () {\n          var n, r, i, o;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return r = [], i = [], o = [], (n = e).Po.isEmpty() ? [3, 3] : (n.Po.forEach(function (t, e) {\n                  o.push(n.$o(e, s, a).then(function (t) {\n                    t && (n.isPrimaryClient && n.sharedClientState.updateQueryState(e.targetId, t.fromCache ? \"not-current\" : \"current\"), r.push(t), t = Wc.Pn(e.targetId, t), i.push(t));\n                  }));\n                }), [4, Promise.all(o)]);\n\n              case 1:\n                return t.sent(), n.vo._r(r), [4, function (u, c) {\n                  return y(this, void 0, void 0, function () {\n                    var r, e, n, i, o, s, a;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          r = u, t.label = 1;\n\n                        case 1:\n                          return t.trys.push([1, 3,, 4]), [4, r.persistence.runTransaction(\"notifyLocalViewChanges\", \"readwrite\", function (n) {\n                            return nu.forEach(c, function (e) {\n                              return nu.forEach(e.bn, function (t) {\n                                return r.persistence.referenceDelegate.addReference(n, e.targetId, t);\n                              }).next(function () {\n                                return nu.forEach(e.vn, function (t) {\n                                  return r.persistence.referenceDelegate.removeReference(n, e.targetId, t);\n                                });\n                              });\n                            });\n                          })];\n\n                        case 2:\n                          return t.sent(), [3, 4];\n\n                        case 3:\n                          if (!du(e = t.sent())) throw e;\n                          return Lr(\"LocalStore\", \"Failed to update sequence numbers: \" + e), [3, 4];\n\n                        case 4:\n                          for (n = 0, i = c; n < i.length; n++) {\n                            a = i[n], o = a.targetId, a.fromCache || (s = r.Fn.get(o), a = s.snapshotVersion, a = s.withLastLimboFreeSnapshotVersion(a), r.Fn = r.Fn.insert(o, a));\n                          }\n\n                          return [2];\n                      }\n                    });\n                  });\n                }(n.localStore, i)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }\n\n      function Uf(i, o) {\n        return y(this, void 0, void 0, function () {\n          var n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return (n = i).currentUser.isEqual(o) ? [3, 3] : (Lr(\"SyncEngine\", \"User change. New user:\", o.toKey()), [4, nh(n.localStore, o)]);\n\n              case 1:\n                return r = t.sent(), n.currentUser = o, (e = n).Fo.forEach(function (t) {\n                  t.forEach(function (t) {\n                    t.reject(new kr(Cr.CANCELLED, \"'waitForPendingWrites' promise is rejected due to a user change.\"));\n                  });\n                }), e.Fo.clear(), n.sharedClientState.handleUserChange(o, r.removedBatchIds, r.addedBatchIds), [4, Vf(n, r.Ln)];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [2];\n            }\n\n            var e;\n          });\n        });\n      }\n\n      function qf(a, u, c, h) {\n        return y(this, void 0, void 0, function () {\n          var o, s;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, (e = (o = a).localStore, n = u, i = (r = e)._n, r.persistence.runTransaction(\"Lookup mutation documents\", \"readonly\", function (e) {\n                  return i.jt(e, n).next(function (t) {\n                    return t ? r.Mn.pn(e, t) : nu.resolve(null);\n                  });\n                }))];\n\n              case 1:\n                return null === (s = t.sent()) ? [3, 6] : \"pending\" !== c ? [3, 3] : [4, jl(o.remoteStore)];\n\n              case 2:\n                return t.sent(), [3, 4];\n\n              case 3:\n                \"acknowledged\" === c || \"rejected\" === c ? (Of(o, u, h || null), xf(o, u), o.localStore._n.Gt(u)) : Vr(), t.label = 4;\n\n              case 4:\n                return [4, Vf(o, s)];\n\n              case 5:\n                return t.sent(), [3, 7];\n\n              case 6:\n                Lr(\"SyncEngine\", \"Cannot apply mutation batch with id: \" + u), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var e, n, r, i;\n          });\n        });\n      }\n\n      function Bf(h, l) {\n        return y(this, void 0, void 0, function () {\n          var r, e, i, o, s, a, u, c;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return Gf(r = h), Qf(r), !0 !== l || !0 === r.Oo ? [3, 3] : (e = r.sharedClientState.getAllActiveQueryTargets(), [4, jf(r, e.toArray())]);\n\n              case 1:\n                return i = t.sent(), r.Oo = !0, [4, Ql(r.remoteStore, !0)];\n\n              case 2:\n                for (t.sent(), o = 0, s = i; o < s.length; o++) {\n                  a = s[o], Rl(r.remoteStore, a);\n                }\n\n                return [3, 7];\n\n              case 3:\n                return !1 !== l || !1 === r.Oo ? [3, 7] : (u = [], c = Promise.resolve(), r.Vo.forEach(function (t, e) {\n                  r.sharedClientState.isLocalQueryTarget(e) ? u.push(e) : c = c.then(function () {\n                    return Lf(r, e), uh(r.localStore, e, !0);\n                  }), xl(r.remoteStore, e);\n                }), [4, c]);\n\n              case 4:\n                return t.sent(), [4, jf(r, u)];\n\n              case 5:\n                return t.sent(), (n = r).Co.forEach(function (t, e) {\n                  xl(n.remoteStore, e);\n                }), n.No.ts(), n.Co = new Map(), n.Do = new Ds(bi.comparator), r.Oo = !1, [4, Ql(r.remoteStore, !1)];\n\n              case 6:\n                t.sent(), t.label = 7;\n\n              case 7:\n                return [2];\n            }\n\n            var n;\n          });\n        });\n      }\n\n      function jf(d, p) {\n        return y(this, void 0, void 0, function () {\n          var e, n, r, i, o, s, a, u, c, h, l, f;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                e = d, n = [], r = [], i = 0, o = p, t.label = 1;\n\n              case 1:\n                return i < o.length ? (s = o[i], a = void 0, (u = e.Vo.get(s)) && 0 !== u.length ? [4, ah(e.localStore, Do(u[0]))] : [3, 7]) : [3, 13];\n\n              case 2:\n                a = t.sent(), c = 0, h = u, t.label = 3;\n\n              case 3:\n                return c < h.length ? (l = h[c], l = e.Po.get(l), [4, function (r, i) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, ch((e = r).localStore, i.query, !0)];\n\n                        case 1:\n                          return n = t.sent(), n = i.view.Ao(n), [2, (e.isPrimaryClient && Mf(e, i.targetId, n.To), n)];\n                      }\n                    });\n                  });\n                }(e, l)]) : [3, 6];\n\n              case 4:\n                (l = t.sent()).snapshot && r.push(l.snapshot), t.label = 5;\n\n              case 5:\n                return c++, [3, 3];\n\n              case 6:\n                return [3, 11];\n\n              case 7:\n                return [4, hh(e.localStore, s)];\n\n              case 8:\n                return f = t.sent(), [4, ah(e.localStore, f)];\n\n              case 9:\n                return a = t.sent(), [4, Af(e, Kf(f), s, !1)];\n\n              case 10:\n                t.sent(), t.label = 11;\n\n              case 11:\n                n.push(a), t.label = 12;\n\n              case 12:\n                return i++, [3, 1];\n\n              case 13:\n                return [2, (e.vo._r(r), n)];\n            }\n          });\n        });\n      }\n\n      function Kf(t) {\n        return wo(t.path, t.collectionGroup, t.orderBy, t.filters, t.limit, \"F\", t.startAt, t.endAt);\n      }\n\n      function Gf(t) {\n        return t.remoteStore.remoteSyncer.applyRemoteEvent = Df.bind(null, t), t.remoteStore.remoteSyncer.getRemoteKeysForTarget = function (t, e) {\n          var n = t;\n          if ((t = n.Co.get(e)) && t.bo) return Ks().add(t.key);\n          var r = Ks();\n          if (!(e = n.Vo.get(e))) return r;\n\n          for (var i = 0, o = e; i < o.length; i++) {\n            var s = o[i],\n                s = n.Po.get(s),\n                r = r.unionWith(s.view.wo);\n          }\n\n          return r;\n        }.bind(null, t), t.remoteStore.remoteSyncer.rejectListen = function (o, s, a) {\n          return y(this, void 0, void 0, function () {\n            var e, n, r, i;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return (e = o).sharedClientState.updateQueryState(s, \"rejected\", a), i = e.Co.get(s), (n = i && i.key) ? (r = (r = new Ds(bi.comparator)).insert(n, Pi.newNoDocument(n, zr.min())), i = Ks().add(n), i = new Qs(zr.min(), new Map(), new Ps(jr), r, i), [4, Df(e, i)]) : [3, 2];\n\n                case 1:\n                  return t.sent(), e.Do = e.Do.remove(n), e.Co.delete(s), Ff(e), [3, 4];\n\n                case 2:\n                  return [4, uh(e.localStore, s, !1).then(function () {\n                    return Lf(e, s, a);\n                  }).catch(yc)];\n\n                case 3:\n                  t.sent(), t.label = 4;\n\n                case 4:\n                  return [2];\n              }\n            });\n          });\n        }.bind(null, t), t.vo._r = function (t, e) {\n          for (var n = t, r = !1, i = 0, o = e; i < o.length; i++) {\n            var s = o[i],\n                a = s.query,\n                a = n.queries.get(a);\n\n            if (a) {\n              for (var u = 0, c = a.listeners; u < c.length; u++) {\n                c[u].Hr(s) && (r = !0);\n              }\n\n              a.Wr = s;\n            }\n          }\n\n          r && uf(n);\n        }.bind(null, t.eventManager), t.vo.Mo = function (t, e, n) {\n          var r = t;\n          if (t = r.queries.get(e)) for (var i = 0, o = t.listeners; i < o.length; i++) {\n            o[i].onError(n);\n          }\n          r.queries.delete(e);\n        }.bind(null, t.eventManager), t;\n      }\n\n      function Qf(t) {\n        return t.remoteStore.remoteSyncer.applySuccessfulWrite = function (i, o) {\n          return y(this, void 0, void 0, function () {\n            var e, n, r;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  e = i, n = o.batch.batchId, t.label = 1;\n\n                case 1:\n                  return t.trys.push([1, 4,, 6]), [4, rh(e.localStore, o)];\n\n                case 2:\n                  return r = t.sent(), Of(e, n, null), xf(e, n), e.sharedClientState.updateMutationState(n, \"acknowledged\"), [4, Vf(e, r)];\n\n                case 3:\n                  return t.sent(), [3, 6];\n\n                case 4:\n                  return [4, yc(t.sent())];\n\n                case 5:\n                  return t.sent(), [3, 6];\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }.bind(null, t), t.remoteStore.remoteSyncer.rejectFailedWrite = kf.bind(null, t), t;\n      }\n\n      function zf(t, e, n) {\n        var r = t;\n        !function (f, d, p) {\n          return y(this, void 0, void 0, function () {\n            var a, u, c, h, l;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 14,, 15]), [4, d.getMetadata()];\n\n                case 1:\n                  return a = t.sent(), [4, (r = f.localStore, o = r, s = ca((i = a).createTime), o.persistence.runTransaction(\"hasNewerBundle\", \"readonly\", function (t) {\n                    return o.Qe.getBundleMetadata(t, i.id);\n                  }).then(function (t) {\n                    return !!t && 0 <= t.createTime.compareTo(s);\n                  }))];\n\n                case 2:\n                  return t.sent() ? [4, d.close()] : [3, 4];\n\n                case 3:\n                  return [2, (t.sent(), void p._completeWith({\n                    taskState: \"Success\",\n                    documentsLoaded: a.totalDocuments,\n                    bytesLoaded: a.totalBytes,\n                    totalDocuments: a.totalDocuments,\n                    totalBytes: a.totalBytes\n                  }))];\n\n                case 4:\n                  return p._updateProgress(mf(a)), u = new ff(a, f.localStore, d.R), [4, d.Lo()];\n\n                case 5:\n                  c = t.sent(), t.label = 6;\n\n                case 6:\n                  return c ? [4, u.oo(c)] : [3, 10];\n\n                case 7:\n                  return (h = t.sent()) && p._updateProgress(h), [4, d.Lo()];\n\n                case 8:\n                  c = t.sent(), t.label = 9;\n\n                case 9:\n                  return [3, 6];\n\n                case 10:\n                  return [4, u.complete()];\n\n                case 11:\n                  return l = t.sent(), [4, Vf(f, l.wn, void 0)];\n\n                case 12:\n                  return t.sent(), [4, (r = f.localStore, e = a, (n = r).persistence.runTransaction(\"Save bundle\", \"readwrite\", function (t) {\n                    return n.Qe.saveBundleMetadata(t, e);\n                  }))];\n\n                case 13:\n                  return t.sent(), p._completeWith(l.progress), [3, 15];\n\n                case 14:\n                  return Mr(\"SyncEngine\", \"Loading bundle failed with \" + (l = t.sent())), p._failWith(l), [3, 15];\n\n                case 15:\n                  return [2];\n              }\n\n              var e, n, r, i, o, s;\n            });\n          });\n        }(r, e, n).then(function () {\n          r.sharedClientState.notifyBundleLoaded();\n        });\n      }\n\n      var Hf,\n          Wf,\n          Yf = (nd.prototype.initialize = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.R = dl(e.databaseInfo.databaseId), this.sharedClientState = this.Bo(e), this.persistence = this.qo(e), [4, this.persistence.start()];\n\n              case 1:\n                return t.sent(), this.gcScheduler = this.Uo(e), this.localStore = this.Qo(e), [2];\n            }\n          });\n        });\n      }, nd.prototype.Uo = function (t) {\n        return null;\n      }, nd.prototype.Qo = function (t) {\n        return eh(this.persistence, new Yc(), t.initialUser, this.R);\n      }, nd.prototype.qo = function (t) {\n        return new Th(_h.bs, this.R);\n      }, nd.prototype.Bo = function (t) {\n        return new Hh();\n      }, nd.prototype.terminate = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.gcScheduler && this.gcScheduler.stop(), [4, this.sharedClientState.shutdown()];\n\n              case 1:\n                return t.sent(), [4, this.persistence.shutdown()];\n\n              case 2:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, nd),\n          Xf = (n(ed, Wf = Yf), ed.prototype.initialize = function (e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, Wf.prototype.initialize.call(this, e)];\n\n              case 1:\n                return t.sent(), [4, fh(this.localStore)];\n\n              case 2:\n                return t.sent(), [4, this.Ko.initialize(this, e)];\n\n              case 3:\n                return t.sent(), [4, Qf(this.Ko.syncEngine)];\n\n              case 4:\n                return t.sent(), [4, jl(this.Ko.remoteStore)];\n\n              case 5:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, ed.prototype.Qo = function (t) {\n        return eh(this.persistence, new Yc(), t.initialUser, this.R);\n      }, ed.prototype.Uo = function (t) {\n        var e = this.persistence.referenceDelegate.garbageCollector;\n        return new vc(e, t.asyncQueue);\n      }, ed.prototype.qo = function (t) {\n        var e = Qc(t.databaseInfo.databaseId, t.databaseInfo.persistenceKey),\n            n = void 0 !== this.cacheSizeBytes ? $u.withCacheSize(this.cacheSizeBytes) : $u.DEFAULT;\n        return new Bc(this.synchronizeTabs, e, t.clientId, n, t.asyncQueue, ll(), fl(), this.R, this.sharedClientState, !!this.forceOwnership);\n      }, ed.prototype.Bo = function (t) {\n        return new Hh();\n      }, ed),\n          Jf = (n(td, Hf = Xf), td.prototype.initialize = function (r) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, Hf.prototype.initialize.call(this, r)];\n\n              case 1:\n                return t.sent(), e = this.Ko.syncEngine, this.sharedClientState instanceof zh ? (this.sharedClientState.syncEngine = {\n                  ui: qf.bind(null, e),\n                  ai: function (i, o, s, a) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n, r;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = i).Oo ? (Lr(\"SyncEngine\", \"Ignoring unexpected query state notification.\"), [3, 8]) : [3, 1];\n\n                          case 1:\n                            if (!e.Vo.has(o)) return [3, 8];\n\n                            switch (s) {\n                              case \"current\":\n                              case \"not-current\":\n                                return [3, 2];\n\n                              case \"rejected\":\n                                return [3, 5];\n                            }\n\n                            return [3, 7];\n\n                          case 2:\n                            return [4, lh(e.localStore)];\n\n                          case 3:\n                            return n = t.sent(), r = Qs.createSynthesizedRemoteEventForCurrentChange(o, \"current\" === s), [4, Vf(e, n, r)];\n\n                          case 4:\n                            return t.sent(), [3, 8];\n\n                          case 5:\n                            return [4, uh(e.localStore, o, !0)];\n\n                          case 6:\n                            return t.sent(), Lf(e, o, a), [3, 8];\n\n                          case 7:\n                            Vr(), t.label = 8;\n\n                          case 8:\n                            return [2];\n                        }\n                      });\n                    });\n                  }.bind(null, e),\n                  hi: function (c, h, l) {\n                    return y(this, void 0, void 0, function () {\n                      var n, e, r, i, o, s, a, u;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            if (!(n = Gf(c)).Oo) return [3, 10];\n                            e = 0, r = h, t.label = 1;\n\n                          case 1:\n                            return e < r.length ? (r = r[e], n.Vo.has(r) ? (Lr(\"SyncEngine\", \"Adding an already active target \" + r), [3, 5]) : [4, hh(n.localStore, r)]) : [3, 6];\n\n                          case 2:\n                            return i = t.sent(), [4, ah(n.localStore, i)];\n\n                          case 3:\n                            return o = t.sent(), [4, Af(n, Kf(i), o.targetId, !1)];\n\n                          case 4:\n                            t.sent(), Rl(n.remoteStore, o), t.label = 5;\n\n                          case 5:\n                            return e++, [3, 1];\n\n                          case 6:\n                            s = function s(e) {\n                              return g(this, function (t) {\n                                switch (t.label) {\n                                  case 0:\n                                    return n.Vo.has(e) ? [4, uh(n.localStore, e, !1).then(function () {\n                                      xl(n.remoteStore, e), Lf(n, e);\n                                    }).catch(yc)] : [3, 2];\n\n                                  case 1:\n                                    t.sent(), t.label = 2;\n\n                                  case 2:\n                                    return [2];\n                                }\n                              });\n                            }, a = 0, u = l, t.label = 7;\n\n                          case 7:\n                            return a < u.length ? (u = u[a], [5, s(u)]) : [3, 10];\n\n                          case 8:\n                            t.sent(), t.label = 9;\n\n                          case 9:\n                            return a++, [3, 7];\n\n                          case 10:\n                            return [2];\n                        }\n                      });\n                    });\n                  }.bind(null, e),\n                  fn: function (t) {\n                    return t.localStore.persistence.fn();\n                  }.bind(null, e),\n                  ci: function (n) {\n                    return y(this, void 0, void 0, function () {\n                      var e;\n                      return g(this, function (t) {\n                        return [2, lh((e = n).localStore).then(function (t) {\n                          return Vf(e, t);\n                        })];\n                      });\n                    });\n                  }.bind(null, e)\n                }, [4, this.sharedClientState.start()]) : [3, 3];\n\n              case 2:\n                t.sent(), t.label = 3;\n\n              case 3:\n                return [4, this.persistence.He(function (e) {\n                  return y(n, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return [4, Bf(this.Ko.syncEngine, e)];\n\n                        case 1:\n                          return t.sent(), this.gcScheduler && (e && !this.gcScheduler.started ? this.gcScheduler.start(this.localStore) : e || this.gcScheduler.stop()), [2];\n                      }\n                    });\n                  });\n                })];\n\n              case 4:\n                return t.sent(), [2];\n            }\n          });\n        });\n      }, td.prototype.Bo = function (t) {\n        var e = ll();\n        if (!zh.yt(e)) throw new kr(Cr.UNIMPLEMENTED, \"IndexedDB persistence is only available on platforms that support LocalStorage.\");\n        var n = Qc(t.databaseInfo.databaseId, t.databaseInfo.persistenceKey);\n        return new zh(e, t.asyncQueue, n, t.clientId, t.initialUser);\n      }, td),\n          $f = (Zf.prototype.initialize = function (n, r) {\n        return y(this, void 0, void 0, function () {\n          var e = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.localStore ? [3, 2] : (this.localStore = n.localStore, this.sharedClientState = n.sharedClientState, this.datastore = this.createDatastore(r), this.remoteStore = this.createRemoteStore(r), this.eventManager = this.createEventManager(r), this.syncEngine = this.createSyncEngine(r, !n.synchronizeTabs), this.sharedClientState.onlineStateHandler = function (t) {\n                  return Cf(e.syncEngine, t, 1);\n                }, this.remoteStore.remoteSyncer.handleCredentialChange = Uf.bind(null, this.syncEngine), [4, Ql(this.remoteStore, this.syncEngine.isPrimaryClient)]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2];\n            }\n          });\n        });\n      }, Zf.prototype.createEventManager = function (t) {\n        return new Jl();\n      }, Zf.prototype.createDatastore = function (t) {\n        var e = dl(t.databaseInfo.databaseId),\n            n = (n = t.databaseInfo, new $h(n));\n        return t = t.credentials, new El(t, n, e);\n      }, Zf.prototype.createRemoteStore = function (t) {\n        var e = this,\n            n = this.localStore,\n            r = this.datastore,\n            i = t.asyncQueue,\n            o = function o(t) {\n          return Cf(e.syncEngine, t, 0);\n        },\n            t = new (Yh.yt() ? Yh : Wh)();\n\n        return new pl(n, r, i, o, t);\n      }, Zf.prototype.createSyncEngine = function (t, e) {\n        return function (t, e, n, r, i, o, s) {\n          o = new If(t, e, n, r, i, o);\n          return s && (o.Oo = !0), o;\n        }(this.localStore, this.remoteStore, this.eventManager, this.sharedClientState, t.initialUser, t.maxConcurrentLimboResolutions, e);\n      }, Zf.prototype.terminate = function () {\n        return function (n) {\n          return y(this, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = n, Lr(\"RemoteStore\", \"RemoteStore shutting down.\"), e.$r.add(5), [4, kl(e)];\n\n                case 1:\n                  return t.sent(), e.Lr.shutdown(), e.Br.set(\"Unknown\"), [2];\n              }\n            });\n          });\n        }(this.remoteStore);\n      }, Zf);\n\n      function Zf() {}\n\n      function td(t, e) {\n        var n = this;\n        return (n = Hf.call(this, t, e, !1) || this).Ko = t, n.cacheSizeBytes = e, n.synchronizeTabs = !0, n;\n      }\n\n      function ed(t, e, n) {\n        var r = this;\n        return (r = Wf.call(this) || this).Ko = t, r.cacheSizeBytes = e, r.forceOwnership = n, r.synchronizeTabs = !1, r;\n      }\n\n      function nd() {\n        this.synchronizeTabs = !1;\n      }\n\n      function rd(n, r) {\n        void 0 === r && (r = 10240);\n        var i = 0;\n        return {\n          read: function read() {\n            return y(this, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                return i < n.byteLength ? (e = {\n                  value: n.slice(i, i + r),\n                  done: !1\n                }, [2, (i += r, e)]) : [2, {\n                  done: !0\n                }];\n              });\n            });\n          },\n          cancel: function cancel() {\n            return y(this, void 0, void 0, function () {\n              return g(this, function (t) {\n                return [2];\n              });\n            });\n          },\n          releaseLock: function releaseLock() {},\n          closed: Promise.reject(\"unimplemented\")\n        };\n      }\n\n      var id = (dd.prototype.next = function (t) {\n        this.observer.next && this.jo(this.observer.next, t);\n      }, dd.prototype.error = function (t) {\n        this.observer.error ? this.jo(this.observer.error, t) : console.error(\"Uncaught Error in snapshot listener:\", t);\n      }, dd.prototype.Wo = function () {\n        this.muted = !0;\n      }, dd.prototype.jo = function (t, e) {\n        var n = this;\n        this.muted || setTimeout(function () {\n          n.muted || t(e);\n        }, 0);\n      }, dd),\n          od = (fd.prototype.close = function () {\n        return this.Go.cancel();\n      }, fd.prototype.getMetadata = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return [2, this.metadata.promise];\n          });\n        });\n      }, fd.prototype.Lo = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.getMetadata()];\n\n              case 1:\n                return [2, (t.sent(), this.Ho())];\n            }\n          });\n        });\n      }, fd.prototype.Ho = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n, r;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.Jo()];\n\n              case 1:\n                return null === (e = t.sent()) ? [2, null] : (r = this.zo.decode(e), n = Number(r), isNaN(n) && this.Yo(\"length string (\" + r + \") is not valid number\"), [4, this.Xo(n)]);\n\n              case 2:\n                return r = t.sent(), [2, new hf(JSON.parse(r), e.length + n)];\n            }\n          });\n        });\n      }, fd.prototype.Zo = function () {\n        return this.buffer.findIndex(function (t) {\n          return t === \"{\".charCodeAt(0);\n        });\n      }, fd.prototype.Jo = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.Zo() < 0 ? [4, this.tc()] : [3, 3];\n\n              case 1:\n                if (t.sent()) return [3, 3];\n                t.label = 2;\n\n              case 2:\n                return [3, 0];\n\n              case 3:\n                return 0 === this.buffer.length ? [2, null] : ((e = this.Zo()) < 0 && this.Yo(\"Reached the end of bundle when a length string is expected.\"), n = this.buffer.slice(0, e), [2, (this.buffer = this.buffer.slice(e), n)]);\n            }\n          });\n        });\n      }, fd.prototype.Xo = function (n) {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return this.buffer.length < n ? [4, this.tc()] : [3, 3];\n\n              case 1:\n                t.sent() && this.Yo(\"Reached the end of bundle when more is expected.\"), t.label = 2;\n\n              case 2:\n                return [3, 0];\n\n              case 3:\n                return e = this.zo.decode(this.buffer.slice(0, n)), [2, (this.buffer = this.buffer.slice(n), e)];\n            }\n          });\n        });\n      }, fd.prototype.Yo = function (t) {\n        throw this.Go.cancel(), new Error(\"Invalid bundle format: \" + t);\n      }, fd.prototype.tc = function () {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, this.Go.read()];\n\n              case 1:\n                return (e = t.sent()).done || ((n = new Uint8Array(this.buffer.length + e.value.length)).set(this.buffer), n.set(e.value, this.buffer.length), this.buffer = n), [2, e.done];\n            }\n          });\n        });\n      }, fd),\n          sd = (ld.prototype.lookup = function (r) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.ensureCommitNotCalled(), 0 < this.mutations.length) throw new kr(Cr.INVALID_ARGUMENT, \"Firestore transactions require all reads to be executed before all writes.\");\n                return [4, function (s, a) {\n                  return y(this, void 0, void 0, function () {\n                    var n, e, r, i, o;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return e = ga((n = s).R) + \"/documents\", r = {\n                            documents: a.map(function (t) {\n                              return fa(n.R, t);\n                            })\n                          }, [4, n.Oi(\"BatchGetDocuments\", e, r)];\n\n                        case 1:\n                          return r = t.sent(), i = new Map(), r.forEach(function (t) {\n                            var e,\n                                t = (e = n.R, \"found\" in (t = t) ? function (t, e) {\n                              Ur(!!e.found), e.found.name, e.found.updateTime;\n                              var n = da(t, e.found.name),\n                                  t = ca(e.found.updateTime),\n                                  e = new Oi({\n                                mapValue: {\n                                  fields: e.found.fields\n                                }\n                              });\n                              return Pi.newFoundDocument(n, t, e);\n                            }(e, t) : \"missing\" in t ? function (t, e) {\n                              Ur(!!e.missing), Ur(!!e.readTime);\n                              t = da(t, e.missing), e = ca(e.readTime);\n                              return Pi.newNoDocument(t, e);\n                            }(e, t) : Vr());\n                            i.set(t.key.toString(), t);\n                          }), o = [], [2, (a.forEach(function (t) {\n                            t = i.get(t.toString());\n                            Ur(!!t), o.push(t);\n                          }), o)];\n                      }\n                    });\n                  });\n                }(this.datastore, r)];\n\n              case 1:\n                return [2, ((e = t.sent()).forEach(function (t) {\n                  return n.recordVersion(t);\n                }), e)];\n            }\n          });\n        });\n      }, ld.prototype.set = function (t, e) {\n        this.write(e.toMutation(t, this.precondition(t))), this.writtenDocs.add(t.toString());\n      }, ld.prototype.update = function (t, e) {\n        try {\n          this.write(e.toMutation(t, this.preconditionForUpdate(t)));\n        } catch (t) {\n          this.lastWriteError = t;\n        }\n\n        this.writtenDocs.add(t.toString());\n      }, ld.prototype.delete = function (t) {\n        this.write(new Ts(t, this.precondition(t))), this.writtenDocs.add(t.toString());\n      }, ld.prototype.commit = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (this.ensureCommitNotCalled(), this.lastWriteError) throw this.lastWriteError;\n                return e = this.readVersions, this.mutations.forEach(function (t) {\n                  e.delete(t.key.toString());\n                }), e.forEach(function (t, e) {\n                  e = bi.fromPath(e);\n                  n.mutations.push(new Is(e, n.precondition(e)));\n                }), [4, function (i, o) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = ga((e = i).R) + \"/documents\", r = {\n                            writes: o.map(function (t) {\n                              return wa(e.R, t);\n                            })\n                          }, [4, e.Ni(\"Commit\", n, r)];\n\n                        case 1:\n                          return t.sent(), [2];\n                      }\n                    });\n                  });\n                }(this.datastore, this.mutations)];\n\n              case 1:\n                return t.sent(), this.committed = !0, [2];\n            }\n          });\n        });\n      }, ld.prototype.recordVersion = function (t) {\n        var e;\n        if (t.isFoundDocument()) e = t.version;else {\n          if (!t.isNoDocument()) throw Vr();\n          e = zr.min();\n        }\n        var n = this.readVersions.get(t.key.toString());\n\n        if (n) {\n          if (!e.isEqual(n)) throw new kr(Cr.ABORTED, \"Document version changed between two reads.\");\n        } else this.readVersions.set(t.key.toString(), e);\n      }, ld.prototype.precondition = function (t) {\n        var e = this.readVersions.get(t.toString());\n        return !this.writtenDocs.has(t.toString()) && e ? rs.updateTime(e) : rs.none();\n      }, ld.prototype.preconditionForUpdate = function (t) {\n        var e = this.readVersions.get(t.toString());\n        if (this.writtenDocs.has(t.toString()) || !e) return rs.exists(!0);\n        if (e.isEqual(zr.min())) throw new kr(Cr.INVALID_ARGUMENT, \"Can't update a document that doesn't exist.\");\n        return rs.updateTime(e);\n      }, ld.prototype.write = function (t) {\n        this.ensureCommitNotCalled(), this.mutations.push(t);\n      }, ld.prototype.ensureCommitNotCalled = function () {}, ld),\n          ad = (hd.prototype.run = function () {\n        this.nc();\n      }, hd.prototype.nc = function () {\n        var t = this;\n        this.Zi.ji(function () {\n          return y(t, void 0, void 0, function () {\n            var e,\n                n,\n                r = this;\n            return g(this, function (t) {\n              return e = new sd(this.datastore), (n = this.sc(e)) && n.then(function (t) {\n                r.asyncQueue.enqueueAndForget(function () {\n                  return e.commit().then(function () {\n                    r.deferred.resolve(t);\n                  }).catch(function (t) {\n                    r.ic(t);\n                  });\n                });\n              }).catch(function (t) {\n                r.ic(t);\n              }), [2];\n            });\n          });\n        });\n      }, hd.prototype.sc = function (t) {\n        try {\n          var e = this.updateFunction(t);\n          return !gi(e) && e.catch && e.then ? e : (this.deferred.reject(Error(\"Transaction callback must return a Promise\")), null);\n        } catch (t) {\n          return this.deferred.reject(t), null;\n        }\n      }, hd.prototype.ic = function (t) {\n        var e = this;\n        0 < this.ec && this.rc(t) ? (--this.ec, this.asyncQueue.enqueueAndForget(function () {\n          return e.nc(), Promise.resolve();\n        })) : this.deferred.reject(t);\n      }, hd.prototype.rc = function (t) {\n        if (\"FirebaseError\" !== t.name) return !1;\n        t = t.code;\n        return \"aborted\" === t || \"failed-precondition\" === t || !As(t);\n      }, hd),\n          ud = (cd.prototype.getConfiguration = function () {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            return [2, {\n              asyncQueue: this.asyncQueue,\n              databaseInfo: this.databaseInfo,\n              clientId: this.clientId,\n              credentials: this.credentials,\n              initialUser: this.user,\n              maxConcurrentLimboResolutions: 100\n            }];\n          });\n        });\n      }, cd.prototype.setCredentialChangeListener = function (t) {\n        this.credentialListener = t;\n      }, cd.prototype.verifyNotTerminated = function () {\n        if (this.asyncQueue.isShuttingDown) throw new kr(Cr.FAILED_PRECONDITION, \"The client has already been terminated.\");\n      }, cd.prototype.terminate = function () {\n        var t = this;\n        this.asyncQueue.enterRestrictedMode();\n        var n = new eu();\n        return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 5,, 6]), this.onlineComponents ? [4, this.onlineComponents.terminate()] : [3, 2];\n\n                case 1:\n                  t.sent(), t.label = 2;\n\n                case 2:\n                  return this.offlineComponents ? [4, this.offlineComponents.terminate()] : [3, 4];\n\n                case 3:\n                  t.sent(), t.label = 4;\n\n                case 4:\n                  return this.credentials.removeChangeListener(), n.resolve(), [3, 6];\n\n                case 5:\n                  return e = t.sent(), e = Xl(e, \"Failed to shutdown persistence\"), n.reject(e), [3, 6];\n\n                case 6:\n                  return [2];\n              }\n            });\n          });\n        }), n.promise;\n      }, cd);\n\n      function cd(t, e, n) {\n        var r = this;\n        this.credentials = t, this.asyncQueue = e, this.databaseInfo = n, this.user = Sh.UNAUTHENTICATED, this.clientId = qr.u(), this.credentialListener = function () {\n          return Promise.resolve();\n        }, this.credentials.setChangeListener(e, function (e) {\n          return y(r, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return Lr(\"FirestoreClient\", \"Received user=\", e.uid), [4, this.credentialListener(e)];\n\n                case 1:\n                  return t.sent(), this.user = e, [2];\n              }\n            });\n          });\n        });\n      }\n\n      function hd(t, e, n, r) {\n        this.asyncQueue = t, this.datastore = e, this.updateFunction = n, this.deferred = r, this.ec = 5, this.Zi = new vl(this.asyncQueue, \"transaction_retry\");\n      }\n\n      function ld(t) {\n        this.datastore = t, this.readVersions = new Map(), this.mutations = [], this.committed = !1, this.lastWriteError = null, this.writtenDocs = new Set();\n      }\n\n      function fd(t, e) {\n        var n = this;\n        this.Go = t, this.R = e, this.metadata = new eu(), this.buffer = new Uint8Array(), this.zo = new TextDecoder(\"utf-8\"), this.Ho().then(function (t) {\n          t && t.io() ? n.metadata.resolve(t.payload.metadata) : n.metadata.reject(new Error(\"The first element of the bundle is not a metadata, it is\\n             \" + JSON.stringify(null == t ? void 0 : t.payload)));\n        }, function (t) {\n          return n.metadata.reject(t);\n        });\n      }\n\n      function dd(t) {\n        this.observer = t, this.muted = !1;\n      }\n\n      function pd(i, o) {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n,\n              r = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return i.asyncQueue.verifyOperationInProgress(), Lr(\"FirestoreClient\", \"Initializing OfflineComponentProvider\"), [4, i.getConfiguration()];\n\n              case 1:\n                return e = t.sent(), [4, o.initialize(e)];\n\n              case 2:\n                return t.sent(), n = e.initialUser, i.setCredentialChangeListener(function (e) {\n                  return y(r, void 0, void 0, function () {\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n.isEqual(e) ? [3, 2] : [4, nh(o.localStore, e)];\n\n                        case 1:\n                          t.sent(), n = e, t.label = 2;\n\n                        case 2:\n                          return [2];\n                      }\n                    });\n                  });\n                }), o.persistence.setDatabaseDeletedListener(function () {\n                  return i.terminate();\n                }), i.offlineComponents = o, [2];\n            }\n          });\n        });\n      }\n\n      function yd(r, i) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return r.asyncQueue.verifyOperationInProgress(), [4, gd(r)];\n\n              case 1:\n                return e = t.sent(), Lr(\"FirestoreClient\", \"Initializing OnlineComponentProvider\"), [4, r.getConfiguration()];\n\n              case 2:\n                return n = t.sent(), [4, i.initialize(e, n)];\n\n              case 3:\n                return t.sent(), r.setCredentialChangeListener(function (t) {\n                  return function (r, i) {\n                    return y(this, void 0, void 0, function () {\n                      var e, n;\n                      return g(this, function (t) {\n                        switch (t.label) {\n                          case 0:\n                            return (e = r).asyncQueue.verifyOperationInProgress(), Lr(\"RemoteStore\", \"RemoteStore received new credentials\"), n = Fl(e), e.$r.add(3), [4, kl(e)];\n\n                          case 1:\n                            return t.sent(), n && e.Br.set(\"Unknown\"), [4, e.remoteSyncer.handleCredentialChange(i)];\n\n                          case 2:\n                            return t.sent(), e.$r.delete(3), [4, Cl(e)];\n\n                          case 3:\n                            return t.sent(), [2];\n                        }\n                      });\n                    });\n                  }(i.remoteStore, t);\n                }), r.onlineComponents = i, [2];\n            }\n          });\n        });\n      }\n\n      function gd(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e.offlineComponents ? [3, 2] : (Lr(\"FirestoreClient\", \"Using default OfflineComponentProvider\"), [4, pd(e, new Yf())]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2, e.offlineComponents];\n            }\n          });\n        });\n      }\n\n      function md(e) {\n        return y(this, void 0, void 0, function () {\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return e.onlineComponents ? [3, 2] : (Lr(\"FirestoreClient\", \"Using default OnlineComponentProvider\"), [4, yd(e, new $f())]);\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                return [2, e.onlineComponents];\n            }\n          });\n        });\n      }\n\n      function vd(t) {\n        return gd(t).then(function (t) {\n          return t.persistence;\n        });\n      }\n\n      function bd(t) {\n        return gd(t).then(function (t) {\n          return t.localStore;\n        });\n      }\n\n      function wd(t) {\n        return md(t).then(function (t) {\n          return t.remoteStore;\n        });\n      }\n\n      function Ed(t) {\n        return md(t).then(function (t) {\n          return t.syncEngine;\n        });\n      }\n\n      function Td(r) {\n        return y(this, void 0, void 0, function () {\n          var e, n;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, md(r)];\n\n              case 1:\n                return e = t.sent(), [2, ((n = e.eventManager).onListen = function (s, a) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r, i, o;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return e = Gf(s), (o = e.Po.get(a)) ? (n = o.targetId, e.sharedClientState.addLocalQueryTarget(n), r = o.view.Ro(), [3, 4]) : [3, 1];\n\n                        case 1:\n                          return [4, ah(e.localStore, Do(a))];\n\n                        case 2:\n                          return i = t.sent(), o = e.sharedClientState.addLocalQueryTarget(i.targetId), n = i.targetId, [4, Af(e, a, n, \"current\" === o)];\n\n                        case 3:\n                          r = t.sent(), e.isPrimaryClient && Rl(e.remoteStore, i), t.label = 4;\n\n                        case 4:\n                          return [2, r];\n                      }\n                    });\n                  });\n                }.bind(null, e.syncEngine), n.onUnlisten = function (i, o) {\n                  return y(this, void 0, void 0, function () {\n                    var e, n, r;\n                    return g(this, function (t) {\n                      switch (t.label) {\n                        case 0:\n                          return n = (e = i).Po.get(o), 1 < (r = e.Vo.get(n.targetId)).length ? [2, (e.Vo.set(n.targetId, r.filter(function (t) {\n                            return !ko(t, o);\n                          })), void e.Po.delete(o))] : e.isPrimaryClient ? (e.sharedClientState.removeLocalQueryTarget(n.targetId), e.sharedClientState.isActiveQueryTarget(n.targetId) ? [3, 2] : [4, uh(e.localStore, n.targetId, !1).then(function () {\n                            e.sharedClientState.clearQueryState(n.targetId), xl(e.remoteStore, n.targetId), Lf(e, n.targetId);\n                          }).catch(yc)]) : [3, 3];\n\n                        case 1:\n                          t.sent(), t.label = 2;\n\n                        case 2:\n                          return [3, 5];\n\n                        case 3:\n                          return Lf(e, n.targetId), [4, uh(e.localStore, n.targetId, !0)];\n\n                        case 4:\n                          t.sent(), t.label = 5;\n\n                        case 5:\n                          return [2];\n                      }\n                    });\n                  });\n                }.bind(null, e.syncEngine), n)];\n            }\n          });\n        });\n      }\n\n      function Id(n, r, i) {\n        var t = this;\n        void 0 === i && (i = {});\n        var o = new eu();\n        return n.asyncQueue.enqueueAndForget(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = function e(n, r, i, o, s) {\n                    var t = new id({\n                      next: function next(t) {\n                        r.enqueueAndForget(function () {\n                          return af(n, a);\n                        });\n                        var e = t.docs.has(i);\n                        !e && t.fromCache ? s.reject(new kr(Cr.UNAVAILABLE, \"Failed to get document because the client is offline.\")) : e && t.fromCache && o && \"server\" === o.source ? s.reject(new kr(Cr.UNAVAILABLE, 'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to \"server\" to retrieve the cached document.)')) : s.resolve(t);\n                      },\n                      error: function error(t) {\n                        return s.reject(t);\n                      }\n                    }),\n                        a = new cf(Eo(i.path), t, {\n                      includeMetadataChanges: !0,\n                      so: !0\n                    });\n                    return sf(n, a);\n                  }, [4, Td(n)];\n\n                case 1:\n                  return [2, e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o])];\n              }\n            });\n          });\n        }), o.promise;\n      }\n\n      function _d(n, r, i) {\n        var t = this;\n        void 0 === i && (i = {});\n        var o = new eu();\n        return n.asyncQueue.enqueueAndForget(function () {\n          return y(t, void 0, void 0, function () {\n            var e;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return e = function e(_e2, n, t, r, i) {\n                    var o = new id({\n                      next: function next(t) {\n                        n.enqueueAndForget(function () {\n                          return af(_e2, s);\n                        }), t.fromCache && \"server\" === r.source ? i.reject(new kr(Cr.UNAVAILABLE, 'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to \"server\" to retrieve the cached documents.)')) : i.resolve(t);\n                      },\n                      error: function error(t) {\n                        return i.reject(t);\n                      }\n                    }),\n                        s = new cf(t, o, {\n                      includeMetadataChanges: !0,\n                      so: !0\n                    });\n                    return sf(_e2, s);\n                  }, [4, Td(n)];\n\n                case 1:\n                  return [2, e.apply(void 0, [t.sent(), n.asyncQueue, r, i, o])];\n              }\n            });\n          });\n        }), o.promise;\n      }\n\n      function Sd(t, e) {\n        this.user = e, this.type = \"OAuth\", this.authHeaders = {}, this.authHeaders.Authorization = \"Bearer \" + t;\n      }\n\n      var Ad = function Ad(t, e, n, r, i, o, s) {\n        this.databaseId = t, this.appId = e, this.persistenceKey = n, this.host = r, this.ssl = i, this.forceLongPolling = o, this.autoDetectLongPolling = s;\n      },\n          Nd = (Object.defineProperty(Ud.prototype, \"isDefaultDatabase\", {\n        get: function get() {\n          return \"(default)\" === this.database;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ud.prototype.isEqual = function (t) {\n        return t instanceof Ud && t.projectId === this.projectId && t.database === this.database;\n      }, Ud),\n          Dd = new Map(),\n          Cd = (Vd.prototype.getToken = function () {\n        return Promise.resolve(null);\n      }, Vd.prototype.invalidateToken = function () {}, Vd.prototype.setChangeListener = function (t, e) {\n        this.changeListener = e, t.enqueueRetryable(function () {\n          return e(Sh.UNAUTHENTICATED);\n        });\n      }, Vd.prototype.removeChangeListener = function () {\n        this.changeListener = null;\n      }, Vd),\n          kd = (Fd.prototype.getToken = function () {\n        return Promise.resolve(this.token);\n      }, Fd.prototype.invalidateToken = function () {}, Fd.prototype.setChangeListener = function (t, e) {\n        var n = this;\n        this.changeListener = e, t.enqueueRetryable(function () {\n          return e(n.token.user);\n        });\n      }, Fd.prototype.removeChangeListener = function () {\n        this.changeListener = null;\n      }, Fd),\n          Rd = (Md.prototype.getToken = function () {\n        var e = this,\n            n = this.cc,\n            t = this.forceRefresh;\n        return this.forceRefresh = !1, this.auth ? this.auth.getToken(t).then(function (t) {\n          return e.cc !== n ? (Lr(\"FirebaseCredentialsProvider\", \"getToken aborted due to token change.\"), e.getToken()) : t ? (Ur(\"string\" == typeof t.accessToken), new Sd(t.accessToken, e.currentUser)) : null;\n        }) : Promise.resolve(null);\n      }, Md.prototype.invalidateToken = function () {\n        this.forceRefresh = !0;\n      }, Md.prototype.setChangeListener = function (t, e) {\n        this.uc = !0, this.asyncQueue = t, this.changeListener = e;\n      }, Md.prototype.removeChangeListener = function () {\n        this.auth && this.auth.removeAuthTokenListener(this.ac), this.changeListener = function () {\n          return Promise.resolve();\n        };\n      }, Md.prototype.hc = function () {\n        var t = this.auth && this.auth.getUid();\n        return Ur(null === t || \"string\" == typeof t), new Sh(t);\n      }, Md.prototype.lc = function () {\n        var t = this;\n        this.uc && (this.uc = !1, this.asyncQueue.enqueueRetryable(function () {\n          return y(t, void 0, void 0, function () {\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return [4, this.oc.promise];\n\n                case 1:\n                  return t.sent(), [4, this.changeListener(this.currentUser)];\n\n                case 2:\n                  return t.sent(), this.uc = !0, [2];\n              }\n            });\n          });\n        }));\n      }, Md),\n          xd = (Object.defineProperty(Pd.prototype, \"authHeaders\", {\n        get: function get() {\n          var t = {\n            \"X-Goog-AuthUser\": this.dc\n          },\n              e = this.fc.auth.getAuthHeaderValueForFirstParty([]);\n          return e && (t.Authorization = e), this.wc && (t[\"X-Goog-Iam-Authorization-Token\"] = this.wc), t;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Pd),\n          Od = (Ld.prototype.getToken = function () {\n        return Promise.resolve(new xd(this.fc, this.dc, this.wc));\n      }, Ld.prototype.setChangeListener = function (t, e) {\n        t.enqueueRetryable(function () {\n          return e(Sh.FIRST_PARTY);\n        });\n      }, Ld.prototype.removeChangeListener = function () {}, Ld.prototype.invalidateToken = function () {}, Ld);\n\n      function Ld(t, e, n) {\n        this.fc = t, this.dc = e, this.wc = n;\n      }\n\n      function Pd(t, e, n) {\n        this.fc = t, this.dc = e, this.wc = n, this.type = \"FirstParty\", this.user = Sh.FIRST_PARTY;\n      }\n\n      function Md(e) {\n        var n = this;\n        this.currentUser = Sh.UNAUTHENTICATED, this.oc = new eu(), this.cc = 0, this.changeListener = function () {\n          return Promise.resolve();\n        }, this.uc = !1, this.forceRefresh = !1, this.auth = null, this.asyncQueue = null, this.ac = function () {\n          n.cc++, n.currentUser = n.hc(), n.oc.resolve(), n.uc && n.asyncQueue.enqueueRetryable(function () {\n            return n.changeListener(n.currentUser);\n          });\n        };\n\n        function r(t) {\n          Lr(\"FirebaseCredentialsProvider\", \"Auth detected\"), n.auth = t, n.lc(), n.auth.addAuthTokenListener(n.ac);\n        }\n\n        e.onInit(r), setTimeout(function () {\n          var t;\n          n.auth || ((t = e.getImmediate({\n            optional: !0\n          })) ? r(t) : n.uc && (Lr(\"FirebaseCredentialsProvider\", \"Auth not yet detected\"), n.asyncQueue.enqueueRetryable(function () {\n            return n.changeListener(n.currentUser);\n          })));\n        }, 0);\n      }\n\n      function Fd(t) {\n        this.token = t, this.changeListener = null;\n      }\n\n      function Vd() {\n        this.changeListener = null;\n      }\n\n      function Ud(t, e) {\n        this.projectId = t, this.database = e || \"(default)\";\n      }\n\n      function qd(t, e, n) {\n        if (!n) throw new kr(Cr.INVALID_ARGUMENT, \"Function \" + t + \"() cannot be called with an empty \" + e + \".\");\n      }\n\n      function Bd(t, e) {\n        if (void 0 === e) return {\n          merge: !1\n        };\n        if (void 0 !== e.mergeFields && void 0 !== e.merge) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid options passed to function \" + t + '(): You cannot specify both \"merge\" and \"mergeFields\".');\n        return e;\n      }\n\n      function jd(t, e, n, r) {\n        if (!0 === e && !0 === r) throw new kr(Cr.INVALID_ARGUMENT, t + \" and \" + n + \" cannot be used together.\");\n      }\n\n      function Kd(t) {\n        if (!bi.isDocumentKey(t)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t + \" has \" + t.length + \".\");\n      }\n\n      function Gd(t) {\n        if (bi.isDocumentKey(t)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid collection reference. Collection references must have an odd number of segments, but \" + t + \" has \" + t.length + \".\");\n      }\n\n      function Qd(e) {\n        if (void 0 === e) return \"undefined\";\n        if (null === e) return \"null\";\n        if (\"string\" == typeof e) return 20 < e.length && (e = e.substring(0, 20) + \"...\"), JSON.stringify(e);\n        if (\"number\" == typeof e || \"boolean\" == typeof e) return \"\" + e;\n        if (\"object\" != typeof e) return \"function\" == typeof e ? \"a function\" : Vr();\n        if (e instanceof Array) return \"an array\";\n\n        var t = function () {\n          if (e.constructor) {\n            var t = /function\\s+([^\\s(]+)\\s*\\(/.exec(e.constructor.toString());\n            if (t && 1 < t.length) return t[1];\n          }\n\n          return null;\n        }();\n\n        return t ? \"a custom \" + t + \" object\" : \"an object\";\n      }\n\n      function zd(t, e) {\n        if ((t = \"_delegate\" in t ? t._delegate : t) instanceof e) return t;\n        if (e.name === t.constructor.name) throw new kr(Cr.INVALID_ARGUMENT, \"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?\");\n        t = Qd(t);\n        throw new kr(Cr.INVALID_ARGUMENT, \"Expected type '\" + e.name + \"', but it was: \" + t);\n      }\n\n      function Hd(t, e) {\n        if (e <= 0) throw new kr(Cr.INVALID_ARGUMENT, \"Function \" + t + \"() requires a positive number, but it was: \" + e + \".\");\n      }\n\n      var Wd,\n          Yd = (ip.prototype.isEqual = function (t) {\n        return this.host === t.host && this.ssl === t.ssl && this.credentials === t.credentials && this.cacheSizeBytes === t.cacheSizeBytes && this.experimentalForceLongPolling === t.experimentalForceLongPolling && this.experimentalAutoDetectLongPolling === t.experimentalAutoDetectLongPolling && this.ignoreUndefinedProperties === t.ignoreUndefinedProperties;\n      }, ip),\n          Xd = (Object.defineProperty(rp.prototype, \"app\", {\n        get: function get() {\n          if (!this._app) throw new kr(Cr.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n          return this._app;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rp.prototype, \"_initialized\", {\n        get: function get() {\n          return this._settingsFrozen;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(rp.prototype, \"_terminated\", {\n        get: function get() {\n          return void 0 !== this._terminateTask;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), rp.prototype._setSettings = function (t) {\n        if (this._settingsFrozen) throw new kr(Cr.FAILED_PRECONDITION, \"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.\");\n        this._settings = new Yd(t), void 0 !== t.credentials && (this._credentials = function (t) {\n          if (!t) return new Cd();\n\n          switch (t.type) {\n            case \"gapi\":\n              var e = t.client;\n              return Ur(!(\"object\" != typeof e || null === e || !e.auth || !e.auth.getAuthHeaderValueForFirstParty)), new Od(e, t.sessionIndex || \"0\", t.iamToken || null);\n\n            case \"provider\":\n              return t.client;\n\n            default:\n              throw new kr(Cr.INVALID_ARGUMENT, \"makeCredentialsProvider failed due to invalid credential type\");\n          }\n        }(t.credentials));\n      }, rp.prototype._getSettings = function () {\n        return this._settings;\n      }, rp.prototype._freezeSettings = function () {\n        return this._settingsFrozen = !0, this._settings;\n      }, rp.prototype._delete = function () {\n        return this._terminateTask || (this._terminateTask = this._terminate()), this._terminateTask;\n      }, rp.prototype.toJSON = function () {\n        return {\n          app: this._app,\n          databaseId: this._databaseId,\n          settings: this._settings\n        };\n      }, rp.prototype._terminate = function () {\n        return (t = Dd.get(this)) && (Lr(\"ComponentProvider\", \"Removing Datastore\"), Dd.delete(this), t.terminate()), Promise.resolve();\n        var t;\n      }, rp),\n          Jd = (Object.defineProperty(np.prototype, \"_path\", {\n        get: function get() {\n          return this._key.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(np.prototype, \"id\", {\n        get: function get() {\n          return this._key.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(np.prototype, \"path\", {\n        get: function get() {\n          return this._key.path.canonicalString();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(np.prototype, \"parent\", {\n        get: function get() {\n          return new Zd(this.firestore, this.converter, this._key.path.popLast());\n        },\n        enumerable: !1,\n        configurable: !0\n      }), np.prototype.withConverter = function (t) {\n        return new np(this.firestore, t, this._key);\n      }, np),\n          $d = (ep.prototype.withConverter = function (t) {\n        return new ep(this.firestore, t, this._query);\n      }, ep),\n          Zd = (n(tp, Wd = $d), Object.defineProperty(tp.prototype, \"id\", {\n        get: function get() {\n          return this._query.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(tp.prototype, \"path\", {\n        get: function get() {\n          return this._query.path.canonicalString();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(tp.prototype, \"parent\", {\n        get: function get() {\n          var t = this._path.popLast();\n\n          return t.isEmpty() ? null : new Jd(this.firestore, null, new bi(t));\n        },\n        enumerable: !1,\n        configurable: !0\n      }), tp.prototype.withConverter = function (t) {\n        return new tp(this.firestore, t, this._path);\n      }, tp);\n\n      function tp(t, e, n) {\n        var r = this;\n        return (r = Wd.call(this, t, e, Eo(n)) || this)._path = n, r.type = \"collection\", r;\n      }\n\n      function ep(t, e, n) {\n        this.converter = e, this._query = n, this.type = \"query\", this.firestore = t;\n      }\n\n      function np(t, e, n) {\n        this.converter = e, this._key = n, this.type = \"document\", this.firestore = t;\n      }\n\n      function rp(t, e) {\n        this.type = \"firestore-lite\", this._persistenceKey = \"(lite)\", this._settings = new Yd({}), this._settingsFrozen = !1, t instanceof Nd ? (this._databaseId = t, this._credentials = new Cd()) : (this._app = t, this._databaseId = function (t) {\n          if (!Object.prototype.hasOwnProperty.apply(t.options, [\"projectId\"])) throw new kr(Cr.INVALID_ARGUMENT, '\"projectId\" not provided in firebase.initializeApp.');\n          return new Nd(t.options.projectId);\n        }(t), this._credentials = new Rd(e));\n      }\n\n      function ip(t) {\n        var e;\n\n        if (void 0 === t.host) {\n          if (void 0 !== t.ssl) throw new kr(Cr.INVALID_ARGUMENT, \"Can't provide ssl option if host option is not set\");\n          this.host = \"firestore.googleapis.com\", this.ssl = !0;\n        } else this.host = t.host, this.ssl = null === (e = t.ssl) || void 0 === e || e;\n\n        if (this.credentials = t.credentials, this.ignoreUndefinedProperties = !!t.ignoreUndefinedProperties, void 0 === t.cacheSizeBytes) this.cacheSizeBytes = 41943040;else {\n          if (-1 !== t.cacheSizeBytes && t.cacheSizeBytes < 1048576) throw new kr(Cr.INVALID_ARGUMENT, \"cacheSizeBytes must be at least 1048576\");\n          this.cacheSizeBytes = t.cacheSizeBytes;\n        }\n        this.experimentalForceLongPolling = !!t.experimentalForceLongPolling, this.experimentalAutoDetectLongPolling = !!t.experimentalAutoDetectLongPolling, jd(\"experimentalForceLongPolling\", t.experimentalForceLongPolling, \"experimentalAutoDetectLongPolling\", t.experimentalAutoDetectLongPolling);\n      }\n\n      function op(t, e) {\n        for (var n, r = [], i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        if (t = v(t), qd(\"collection\", \"path\", e), t instanceof Xd) return Gd(n = ti.fromString.apply(ti, s([e], r))), new Zd(t, null, n);\n        if (!(t instanceof Jd || t instanceof Zd)) throw new kr(Cr.INVALID_ARGUMENT, \"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore\");\n        return Gd(n = ti.fromString.apply(ti, s([t.path], r)).child(ti.fromString(e))), new Zd(t.firestore, null, n);\n      }\n\n      function sp(t, e) {\n        for (var n, r = [], i = 2; i < arguments.length; i++) {\n          r[i - 2] = arguments[i];\n        }\n\n        if (t = v(t), qd(\"doc\", \"path\", e = 1 === arguments.length ? qr.u() : e), t instanceof Xd) return Kd(n = ti.fromString.apply(ti, s([e], r))), new Jd(t, null, new bi(n));\n        if (!(t instanceof Jd || t instanceof Zd)) throw new kr(Cr.INVALID_ARGUMENT, \"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore\");\n        return Kd(n = t._path.child(ti.fromString.apply(ti, s([e], r)))), new Jd(t.firestore, t instanceof Zd ? t.converter : null, new bi(n));\n      }\n\n      function ap(t, e) {\n        return t = v(t), e = v(e), (t instanceof Jd || t instanceof Zd) && (e instanceof Jd || e instanceof Zd) && t.firestore === e.firestore && t.path === e.path && t.converter === e.converter;\n      }\n\n      function up(t, e) {\n        return t = v(t), e = v(e), t instanceof $d && e instanceof $d && t.firestore === e.firestore && ko(t._query, e._query) && t.converter === e.converter;\n      }\n\n      var cp = (Object.defineProperty(hp.prototype, \"isShuttingDown\", {\n        get: function get() {\n          return this.yc;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), hp.prototype.enqueueAndForget = function (t) {\n        this.enqueue(t);\n      }, hp.prototype.enqueueAndForgetEvenWhileRestricted = function (t) {\n        this.Rc(), this.bc(t);\n      }, hp.prototype.enterRestrictedMode = function () {\n        var t;\n        this.yc || (this.yc = !0, (t = fl()) && \"function\" == typeof t.removeEventListener && t.removeEventListener(\"visibilitychange\", this.Ac));\n      }, hp.prototype.enqueue = function (t) {\n        return this.Rc(), this.yc ? new Promise(function (t) {}) : this.bc(t);\n      }, hp.prototype.enqueueRetryable = function (t) {\n        var e = this;\n        this.enqueueAndForget(function () {\n          return e.mc.push(t), e.vc();\n        });\n      }, hp.prototype.vc = function () {\n        return y(this, void 0, void 0, function () {\n          var e,\n              n = this;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                if (0 === this.mc.length) return [3, 5];\n                t.label = 1;\n\n              case 1:\n                return t.trys.push([1, 3,, 4]), [4, this.mc[0]()];\n\n              case 2:\n                return t.sent(), this.mc.shift(), this.Zi.reset(), [3, 4];\n\n              case 3:\n                if (!du(e = t.sent())) throw e;\n                return Lr(\"AsyncQueue\", \"Operation failed with retryable error: \" + e), [3, 4];\n\n              case 4:\n                0 < this.mc.length && this.Zi.ji(function () {\n                  return n.vc();\n                }), t.label = 5;\n\n              case 5:\n                return [2];\n            }\n          });\n        });\n      }, hp.prototype.bc = function (t) {\n        var r = this,\n            e = this._c.then(function () {\n          return r.Tc = !0, t().catch(function (t) {\n            throw r.Ec = t, r.Tc = !1, Pr(\"INTERNAL UNHANDLED ERROR: \", (n = (e = t).message || \"\", n = e.stack ? e.stack.includes(e.message) ? e.stack : e.message + \"\\n\" + e.stack : n)), t;\n            var e, n;\n          }).then(function (t) {\n            return r.Tc = !1, t;\n          });\n        });\n\n        return this._c = e;\n      }, hp.prototype.enqueueAfterDelay = function (t, e, n) {\n        var r = this;\n        this.Rc(), -1 < this.Ic.indexOf(t) && (e = 0);\n        n = Wl.createAndSchedule(this, t, e, n, function (t) {\n          return r.Pc(t);\n        });\n        return this.gc.push(n), n;\n      }, hp.prototype.Rc = function () {\n        this.Ec && Vr();\n      }, hp.prototype.verifyOperationInProgress = function () {}, hp.prototype.Vc = function () {\n        return y(this, void 0, void 0, function () {\n          var e;\n          return g(this, function (t) {\n            switch (t.label) {\n              case 0:\n                return [4, e = this._c];\n\n              case 1:\n                t.sent(), t.label = 2;\n\n              case 2:\n                if (e !== this._c) return [3, 0];\n                t.label = 3;\n\n              case 3:\n                return [2];\n            }\n          });\n        });\n      }, hp.prototype.Sc = function (t) {\n        for (var e = 0, n = this.gc; e < n.length; e++) {\n          if (n[e].timerId === t) return !0;\n        }\n\n        return !1;\n      }, hp.prototype.Dc = function (r) {\n        var i = this;\n        return this.Vc().then(function () {\n          i.gc.sort(function (t, e) {\n            return t.targetTimeMs - e.targetTimeMs;\n          });\n\n          for (var t = 0, e = i.gc; t < e.length; t++) {\n            var n = e[t];\n            if (n.skipDelay(), \"all\" !== r && n.timerId === r) break;\n          }\n\n          return i.Vc();\n        });\n      }, hp.prototype.Cc = function (t) {\n        this.Ic.push(t);\n      }, hp.prototype.Pc = function (t) {\n        t = this.gc.indexOf(t);\n        this.gc.splice(t, 1);\n      }, hp);\n\n      function hp() {\n        var e = this;\n        this._c = Promise.resolve(), this.mc = [], this.yc = !1, this.gc = [], this.Ec = null, this.Tc = !1, this.Ic = [], this.Zi = new vl(this, \"async_queue_retry\"), this.Ac = function () {\n          var t = fl();\n          t && Lr(\"AsyncQueue\", \"Visibility state changed to \" + t.visibilityState), e.Zi.Gi();\n        };\n        var t = fl();\n        t && \"function\" == typeof t.addEventListener && t.addEventListener(\"visibilitychange\", this.Ac);\n      }\n\n      function lp(i) {\n        return function () {\n          if (\"object\" == typeof i && null !== i) for (var t = i, e = 0, n = [\"next\", \"error\", \"complete\"]; e < n.length; e++) {\n            var r = n[e];\n            if (r in t && \"function\" == typeof t[r]) return 1;\n          }\n        }();\n      }\n\n      var fp,\n          dp = (gp.prototype.onProgress = function (t, e, n) {\n        this._progressObserver = {\n          next: t,\n          error: e,\n          complete: n\n        };\n      }, gp.prototype.catch = function (t) {\n        return this._taskCompletionResolver.promise.catch(t);\n      }, gp.prototype.then = function (t, e) {\n        return this._taskCompletionResolver.promise.then(t, e);\n      }, gp.prototype._completeWith = function (t) {\n        this._updateProgress(t), this._progressObserver.complete && this._progressObserver.complete(), this._taskCompletionResolver.resolve(t);\n      }, gp.prototype._failWith = function (t) {\n        this._lastProgress.taskState = \"Error\", this._progressObserver.next && this._progressObserver.next(this._lastProgress), this._progressObserver.error && this._progressObserver.error(t), this._taskCompletionResolver.reject(t);\n      }, gp.prototype._updateProgress = function (t) {\n        this._lastProgress = t, this._progressObserver.next && this._progressObserver.next(t);\n      }, gp),\n          pp = (n(yp, fp = Xd), yp.prototype._terminate = function () {\n        return this._firestoreClient || vp(this), this._firestoreClient.terminate();\n      }, yp);\n\n      function yp(t, e) {\n        var n = this;\n        return (n = fp.call(this, t, e) || this).type = \"firestore\", n._queue = new cp(), n._persistenceKey = \"name\" in t ? t.name : \"[DEFAULT]\", n;\n      }\n\n      function gp() {\n        this._progressObserver = {}, this._taskCompletionResolver = new eu(), this._lastProgress = {\n          taskState: \"Running\",\n          totalBytes: 0,\n          totalDocuments: 0,\n          bytesLoaded: 0,\n          documentsLoaded: 0\n        };\n      }\n\n      function mp(t) {\n        return t._firestoreClient || vp(t), t._firestoreClient.verifyNotTerminated(), t._firestoreClient;\n      }\n\n      function vp(t) {\n        var e,\n            n,\n            r,\n            i = t._freezeSettings(),\n            i = (e = t._databaseId, n = (null === (r = t._app) || void 0 === r ? void 0 : r.options.appId) || \"\", r = t._persistenceKey, new Ad(e, n, r, i.host, i.ssl, i.experimentalForceLongPolling, i.experimentalAutoDetectLongPolling));\n\n        t._firestoreClient = new ud(t._credentials, t._queue, i);\n      }\n\n      function bp(r, i, o) {\n        var t = this,\n            s = new eu();\n        return r.asyncQueue.enqueue(function () {\n          return y(t, void 0, void 0, function () {\n            var n;\n            return g(this, function (t) {\n              switch (t.label) {\n                case 0:\n                  return t.trys.push([0, 3,, 4]), [4, pd(r, o)];\n\n                case 1:\n                  return t.sent(), [4, yd(r, i)];\n\n                case 2:\n                  return t.sent(), s.resolve(), [3, 4];\n\n                case 3:\n                  if (!(\"FirebaseError\" === (e = n = t.sent()).name ? e.code === Cr.FAILED_PRECONDITION || e.code === Cr.UNIMPLEMENTED : !(\"undefined\" != typeof DOMException && e instanceof DOMException) || 22 === e.code || 20 === e.code || 11 === e.code)) throw n;\n                  return console.warn(\"Error enabling offline persistence. Falling back to persistence disabled: \" + n), s.reject(n), [3, 4];\n\n                case 4:\n                  return [2];\n              }\n\n              var e;\n            });\n          });\n        }).then(function () {\n          return s.promise;\n        });\n      }\n\n      function wp(t) {\n        if (t._initialized || t._terminated) throw new kr(Cr.FAILED_PRECONDITION, \"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.\");\n      }\n\n      var Ep = (xp.prototype.isEqual = function (t) {\n        return this._internalPath.isEqual(t._internalPath);\n      }, xp),\n          Tp = (Rp.fromBase64String = function (t) {\n        try {\n          return new Rp(ii.fromBase64String(t));\n        } catch (t) {\n          throw new kr(Cr.INVALID_ARGUMENT, \"Failed to construct data from Base64 string: \" + t);\n        }\n      }, Rp.fromUint8Array = function (t) {\n        return new Rp(ii.fromUint8Array(t));\n      }, Rp.prototype.toBase64 = function () {\n        return this._byteString.toBase64();\n      }, Rp.prototype.toUint8Array = function () {\n        return this._byteString.toUint8Array();\n      }, Rp.prototype.toString = function () {\n        return \"Bytes(base64: \" + this.toBase64() + \")\";\n      }, Rp.prototype.isEqual = function (t) {\n        return this._byteString.isEqual(t._byteString);\n      }, Rp),\n          Ip = function Ip(t) {\n        this._methodName = t;\n      },\n          _p = (Object.defineProperty(kp.prototype, \"latitude\", {\n        get: function get() {\n          return this._lat;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(kp.prototype, \"longitude\", {\n        get: function get() {\n          return this._long;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), kp.prototype.isEqual = function (t) {\n        return this._lat === t._lat && this._long === t._long;\n      }, kp.prototype.toJSON = function () {\n        return {\n          latitude: this._lat,\n          longitude: this._long\n        };\n      }, kp.prototype._compareTo = function (t) {\n        return jr(this._lat, t._lat) || jr(this._long, t._long);\n      }, kp),\n          Sp = /^__.*__$/,\n          Ap = (Cp.prototype.toMutation = function (t, e) {\n        return null !== this.fieldMask ? new fs(t, this.data, this.fieldMask, e, this.fieldTransforms) : new ls(t, this.data, e, this.fieldTransforms);\n      }, Cp),\n          Np = (Dp.prototype.toMutation = function (t, e) {\n        return new fs(t, this.data, this.fieldMask, e, this.fieldTransforms);\n      }, Dp);\n\n      function Dp(t, e, n) {\n        this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n      }\n\n      function Cp(t, e, n) {\n        this.data = t, this.fieldMask = e, this.fieldTransforms = n;\n      }\n\n      function kp(t, e) {\n        if (!isFinite(t) || t < -90 || 90 < t) throw new kr(Cr.INVALID_ARGUMENT, \"Latitude must be a number between -90 and 90, but was: \" + t);\n        if (!isFinite(e) || e < -180 || 180 < e) throw new kr(Cr.INVALID_ARGUMENT, \"Longitude must be a number between -180 and 180, but was: \" + e);\n        this._lat = t, this._long = e;\n      }\n\n      function Rp(t) {\n        this._byteString = t;\n      }\n\n      function xp() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        for (var n = 0; n < t.length; ++n) {\n          if (0 === t[n].length) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid field name at argument $(i + 1). Field names must not be empty.\");\n        }\n\n        this._internalPath = new ni(t);\n      }\n\n      function Op(t) {\n        switch (t) {\n          case 0:\n          case 2:\n          case 1:\n            return 1;\n\n          case 3:\n          case 4:\n            return;\n\n          default:\n            throw Vr();\n        }\n      }\n\n      var Lp = (Object.defineProperty(Fp.prototype, \"path\", {\n        get: function get() {\n          return this.settings.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Fp.prototype, \"xc\", {\n        get: function get() {\n          return this.settings.xc;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Fp.prototype.Fc = function (t) {\n        return new Fp(Object.assign(Object.assign({}, this.settings), t), this.databaseId, this.R, this.ignoreUndefinedProperties, this.fieldTransforms, this.fieldMask);\n      }, Fp.prototype.kc = function (t) {\n        var e = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            e = this.Fc({\n          path: e,\n          Oc: !1\n        });\n        return e.$c(t), e;\n      }, Fp.prototype.Mc = function (t) {\n        var e,\n            t = null === (e = this.path) || void 0 === e ? void 0 : e.child(t),\n            t = this.Fc({\n          path: t,\n          Oc: !1\n        });\n        return t.Nc(), t;\n      }, Fp.prototype.Lc = function (t) {\n        return this.Fc({\n          path: void 0,\n          Oc: !0\n        });\n      }, Fp.prototype.Bc = function (t) {\n        return fy(t, this.settings.methodName, this.settings.qc || !1, this.path, this.settings.Uc);\n      }, Fp.prototype.contains = function (e) {\n        return void 0 !== this.fieldMask.find(function (t) {\n          return e.isPrefixOf(t);\n        }) || void 0 !== this.fieldTransforms.find(function (t) {\n          return e.isPrefixOf(t.field);\n        });\n      }, Fp.prototype.Nc = function () {\n        if (this.path) for (var t = 0; t < this.path.length; t++) {\n          this.$c(this.path.get(t));\n        }\n      }, Fp.prototype.$c = function (t) {\n        if (0 === t.length) throw this.Bc(\"Document fields must not be empty\");\n        if (Op(this.xc) && Sp.test(t)) throw this.Bc('Document fields cannot begin and end with \"__\"');\n      }, Fp),\n          Pp = (Mp.prototype.Qc = function (t, e, n, r) {\n        return void 0 === r && (r = !1), new Lp({\n          xc: t,\n          methodName: e,\n          Uc: n,\n          path: ni.emptyPath(),\n          Oc: !1,\n          qc: r\n        }, this.databaseId, this.R, this.ignoreUndefinedProperties);\n      }, Mp);\n\n      function Mp(t, e, n) {\n        this.databaseId = t, this.ignoreUndefinedProperties = e, this.R = n || dl(t);\n      }\n\n      function Fp(t, e, n, r, i, o) {\n        this.settings = t, this.databaseId = e, this.R = n, this.ignoreUndefinedProperties = r, void 0 === i && this.Nc(), this.fieldTransforms = i || [], this.fieldMask = o || [];\n      }\n\n      function Vp(t) {\n        var e = t._freezeSettings(),\n            n = dl(t._databaseId);\n\n        return new Pp(t._databaseId, !!e.ignoreUndefinedProperties, n);\n      }\n\n      function Up(t, e, n, r, i, o) {\n        void 0 === o && (o = {});\n        var s = t.Qc(o.merge || o.mergeFields ? 2 : 0, e, n, i);\n        uy(\"Data must be an object, but it was:\", s, r);\n        var a,\n            u,\n            r = sy(r, s);\n        if (o.merge) a = new ri(s.fieldMask), u = s.fieldTransforms;else if (o.mergeFields) {\n          for (var c = [], h = 0, l = o.mergeFields; h < l.length; h++) {\n            var f = cy(e, l[h], n);\n            if (!s.contains(f)) throw new kr(Cr.INVALID_ARGUMENT, \"Field '\" + f + \"' is specified in your field mask but missing from your input data.\");\n            dy(c, f) || c.push(f);\n          }\n\n          a = new ri(c), u = s.fieldTransforms.filter(function (t) {\n            return a.covers(t.field);\n          });\n        } else a = null, u = s.fieldTransforms;\n        return new Ap(new Oi(r), a, u);\n      }\n\n      var qp,\n          Bp = (n(jp, qp = Ip), jp.prototype._toFieldTransform = function (t) {\n        if (2 !== t.xc) throw 1 === t.xc ? t.Bc(this._methodName + \"() can only appear at the top level of your update data\") : t.Bc(this._methodName + \"() cannot be used with set() unless you pass {merge:true}\");\n        return t.fieldMask.push(t.path), null;\n      }, jp.prototype.isEqual = function (t) {\n        return t instanceof jp;\n      }, jp);\n\n      function jp() {\n        return null !== qp && qp.apply(this, arguments) || this;\n      }\n\n      function Kp(t, e, n) {\n        return new Lp({\n          xc: 3,\n          Uc: e.settings.Uc,\n          methodName: t._methodName,\n          Oc: n\n        }, e.databaseId, e.R, e.ignoreUndefinedProperties);\n      }\n\n      var Gp,\n          Qp,\n          zp,\n          Hp,\n          Wp = (n(ey, Hp = Ip), ey.prototype._toFieldTransform = function (t) {\n        return new ns(t.path, new Bo());\n      }, ey.prototype.isEqual = function (t) {\n        return t instanceof ey;\n      }, ey),\n          Yp = (n(ty, zp = Ip), ty.prototype._toFieldTransform = function (t) {\n        var e = Kp(this, t, !0),\n            n = this.Kc.map(function (t) {\n          return oy(t, e);\n        }),\n            n = new jo(n);\n        return new ns(t.path, n);\n      }, ty.prototype.isEqual = function (t) {\n        return this === t;\n      }, ty),\n          Xp = (n(Zp, Qp = Ip), Zp.prototype._toFieldTransform = function (t) {\n        var e = Kp(this, t, !0),\n            n = this.Kc.map(function (t) {\n          return oy(t, e);\n        }),\n            n = new Ho(n);\n        return new ns(t.path, n);\n      }, Zp.prototype.isEqual = function (t) {\n        return this === t;\n      }, Zp),\n          Jp = (n($p, Gp = Ip), $p.prototype._toFieldTransform = function (t) {\n        var e = new Jo(t.R, Fo(t.R, this.jc));\n        return new ns(t.path, e);\n      }, $p.prototype.isEqual = function (t) {\n        return this === t;\n      }, $p);\n\n      function $p(t, e) {\n        var n = this;\n        return (n = Gp.call(this, t) || this).jc = e, n;\n      }\n\n      function Zp(t, e) {\n        var n = this;\n        return (n = Qp.call(this, t) || this).Kc = e, n;\n      }\n\n      function ty(t, e) {\n        var n = this;\n        return (n = zp.call(this, t) || this).Kc = e, n;\n      }\n\n      function ey() {\n        return null !== Hp && Hp.apply(this, arguments) || this;\n      }\n\n      function ny(t, r, i, e) {\n        var o = t.Qc(1, r, i);\n        uy(\"Data must be an object, but it was:\", o, e);\n        var s = [],\n            a = Oi.empty();\n        Xr(e, function (t, e) {\n          var n = ly(r, t, i);\n          e = v(e);\n          t = o.Mc(n);\n          e instanceof Bp ? s.push(n) : null != (t = oy(e, t)) && (s.push(n), a.set(n, t));\n        });\n        e = new ri(s);\n        return new Np(a, e, o.fieldTransforms);\n      }\n\n      function ry(t, e, n, r, i, o) {\n        var s = t.Qc(1, e, n),\n            a = [cy(e, r, n)],\n            u = [i];\n        if (o.length % 2 != 0) throw new kr(Cr.INVALID_ARGUMENT, \"Function \" + e + \"() needs to be called with an even number of arguments that alternate between field names and values.\");\n\n        for (var c = 0; c < o.length; c += 2) {\n          a.push(cy(e, o[c])), u.push(o[c + 1]);\n        }\n\n        for (var h, l, f, d = [], p = Oi.empty(), y = a.length - 1; 0 <= y; --y) {\n          dy(d, a[y]) || (h = a[y], l = v(l = u[y]), f = s.Mc(h), l instanceof Bp ? d.push(h) : null != (f = oy(l, f)) && (d.push(h), p.set(h, f)));\n        }\n\n        i = new ri(d);\n        return new Np(p, i, s.fieldTransforms);\n      }\n\n      function iy(t, e, n, r) {\n        return void 0 === r && (r = !1), oy(n, t.Qc(r ? 4 : 3, e));\n      }\n\n      function oy(s, t) {\n        if (ay(s = v(s))) return uy(\"Unsupported field value:\", t, s), sy(s, t);\n        if (s instanceof Ip) return function (t, e) {\n          if (!Op(e.xc)) throw e.Bc(t._methodName + \"() can only be used with update() and set()\");\n          if (!e.path) throw e.Bc(t._methodName + \"() is not currently supported inside arrays\");\n          t = t._toFieldTransform(e);\n          t && e.fieldTransforms.push(t);\n        }(s, t), null;\n        if (void 0 === s && t.ignoreUndefinedProperties) return null;\n\n        if (t.path && t.fieldMask.push(t.path), s instanceof Array) {\n          if (t.settings.Oc && 4 !== t.xc) throw t.Bc(\"Nested arrays are not supported\");\n          return function (t) {\n            for (var e = [], n = 0, r = 0, i = s; r < i.length; r++) {\n              var o = oy(i[r], t.Lc(n));\n              null == o && (o = {\n                nullValue: \"NULL_VALUE\"\n              }), e.push(o), n++;\n            }\n\n            return {\n              arrayValue: {\n                values: e\n              }\n            };\n          }(t);\n        }\n\n        return function (t, e) {\n          if (null === (t = v(t))) return {\n            nullValue: \"NULL_VALUE\"\n          };\n          if (\"number\" == typeof t) return Fo(e.R, t);\n          if (\"boolean\" == typeof t) return {\n            booleanValue: t\n          };\n          if (\"string\" == typeof t) return {\n            stringValue: t\n          };\n\n          if (t instanceof Date) {\n            var n = Qr.fromDate(t);\n            return {\n              timestampValue: aa(e.R, n)\n            };\n          }\n\n          if (t instanceof Qr) return n = new Qr(t.seconds, 1e3 * Math.floor(t.nanoseconds / 1e3)), {\n            timestampValue: aa(e.R, n)\n          };\n          if (t instanceof _p) return {\n            geoPointValue: {\n              latitude: t.latitude,\n              longitude: t.longitude\n            }\n          };\n          if (t instanceof Tp) return {\n            bytesValue: ua(e.R, t._byteString)\n          };\n\n          if (t instanceof Jd) {\n            var n = e.databaseId,\n                r = t.firestore._databaseId;\n            if (!r.isEqual(n)) throw e.Bc(\"Document reference is for database \" + r.projectId + \"/\" + r.database + \" but should be for database \" + n.projectId + \"/\" + n.database);\n            return {\n              referenceValue: ha(t.firestore._databaseId || e.databaseId, t._key.path)\n            };\n          }\n\n          throw e.Bc(\"Unsupported field value: \" + Qd(t));\n        }(s, t);\n      }\n\n      function sy(t, n) {\n        var r = {};\n        return Jr(t) ? n.path && 0 < n.path.length && n.fieldMask.push(n.path) : Xr(t, function (t, e) {\n          e = oy(e, n.kc(t));\n          null != e && (r[t] = e);\n        }), {\n          mapValue: {\n            fields: r\n          }\n        };\n      }\n\n      function ay(t) {\n        return !(\"object\" != typeof t || null === t || t instanceof Array || t instanceof Date || t instanceof Qr || t instanceof _p || t instanceof Tp || t instanceof Jd || t instanceof Ip);\n      }\n\n      function uy(t, e, n) {\n        if (!ay(n) || \"object\" != typeof (r = n) || null === r || Object.getPrototypeOf(r) !== Object.prototype && null !== Object.getPrototypeOf(r)) {\n          n = Qd(n);\n          throw \"an object\" === n ? e.Bc(t + \" a custom object\") : e.Bc(t + \" \" + n);\n        }\n\n        var r;\n      }\n\n      function cy(t, e, n) {\n        if ((e = v(e)) instanceof Ep) return e._internalPath;\n        if (\"string\" == typeof e) return ly(t, e);\n        throw fy(\"Field path arguments must be of type string or FieldPath.\", t, !1, void 0, n);\n      }\n\n      var hy = new RegExp(\"[~\\\\*/\\\\[\\\\]]\");\n\n      function ly(e, n, r) {\n        if (0 <= n.search(hy)) throw fy(\"Invalid field path (\" + n + \"). Paths must not contain '~', '*', '/', '[', or ']'\", e, !1, void 0, r);\n\n        try {\n          return new (Ep.bind.apply(Ep, s([void 0], n.split(\".\"))))()._internalPath;\n        } catch (t) {\n          throw fy(\"Invalid field path (\" + n + \"). Paths must not be empty, begin with '.', end with '.', or contain '..'\", e, !1, void 0, r);\n        }\n      }\n\n      function fy(t, e, n, r, i) {\n        var o = r && !r.isEmpty(),\n            s = void 0 !== i,\n            e = \"Function \" + e + \"() called with invalid data\";\n        n && (e += \" (via `toFirestore()`)\");\n        n = \"\";\n        return (o || s) && (n += \" (found\", o && (n += \" in field \" + r), s && (n += \" in document \" + i), n += \")\"), new kr(Cr.INVALID_ARGUMENT, (e += \". \") + t + n);\n      }\n\n      function dy(t, e) {\n        return t.some(function (t) {\n          return t.isEqual(e);\n        });\n      }\n\n      var py,\n          yy = (Object.defineProperty(vy.prototype, \"id\", {\n        get: function get() {\n          return this._key.path.lastSegment();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(vy.prototype, \"ref\", {\n        get: function get() {\n          return new Jd(this._firestore, this._converter, this._key);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), vy.prototype.exists = function () {\n        return null !== this._document;\n      }, vy.prototype.data = function () {\n        if (this._document) {\n          if (this._converter) {\n            var t = new gy(this._firestore, this._userDataWriter, this._key, this._document, null);\n            return this._converter.fromFirestore(t);\n          }\n\n          return this._userDataWriter.convertValue(this._document.data.toProto());\n        }\n      }, vy.prototype.get = function (t) {\n        if (this._document) {\n          t = this._document.data.field(by(\"DocumentSnapshot.get\", t));\n          if (null !== t) return this._userDataWriter.convertValue(t);\n        }\n      }, vy),\n          gy = (n(my, py = yy), my.prototype.data = function () {\n        return py.prototype.data.call(this);\n      }, my);\n\n      function my() {\n        return null !== py && py.apply(this, arguments) || this;\n      }\n\n      function vy(t, e, n, r, i) {\n        this._firestore = t, this._userDataWriter = e, this._key = n, this._document = r, this._converter = i;\n      }\n\n      function by(t, e) {\n        return \"string\" == typeof e ? ly(t, e) : (e instanceof Ep ? e : e._delegate)._internalPath;\n      }\n\n      var wy,\n          Ey,\n          Ty = (Cy.prototype.isEqual = function (t) {\n        return this.hasPendingWrites === t.hasPendingWrites && this.fromCache === t.fromCache;\n      }, Cy),\n          Iy = (n(Dy, Ey = yy), Dy.prototype.exists = function () {\n        return Ey.prototype.exists.call(this);\n      }, Dy.prototype.data = function (t) {\n        if (void 0 === t && (t = {}), this._document) {\n          if (this._converter) {\n            var e = new _y(this._firestore, this._userDataWriter, this._key, this._document, this.metadata, null);\n            return this._converter.fromFirestore(e, t);\n          }\n\n          return this._userDataWriter.convertValue(this._document.data.toProto(), t.serverTimestamps);\n        }\n      }, Dy.prototype.get = function (t, e) {\n        if (void 0 === e && (e = {}), this._document) {\n          t = this._document.data.field(by(\"DocumentSnapshot.get\", t));\n          if (null !== t) return this._userDataWriter.convertValue(t, e.serverTimestamps);\n        }\n      }, Dy),\n          _y = (n(Ny, wy = Iy), Ny.prototype.data = function (t) {\n        return void 0 === t && (t = {}), wy.prototype.data.call(this, t);\n      }, Ny),\n          Sy = (Object.defineProperty(Ay.prototype, \"docs\", {\n        get: function get() {\n          var e = [];\n          return this.forEach(function (t) {\n            return e.push(t);\n          }), e;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ay.prototype, \"size\", {\n        get: function get() {\n          return this._snapshot.docs.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Ay.prototype, \"empty\", {\n        get: function get() {\n          return 0 === this.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Ay.prototype.forEach = function (e, n) {\n        var r = this;\n\n        this._snapshot.docs.forEach(function (t) {\n          e.call(n, new _y(r._firestore, r._userDataWriter, t.key, t, new Ty(r._snapshot.mutatedKeys.has(t.key), r._snapshot.fromCache), r.query.converter));\n        });\n      }, Ay.prototype.docChanges = function (t) {\n        t = !!(t = void 0 === t ? {} : t).includeMetadataChanges;\n        if (t && this._snapshot.excludesMetadataChanges) throw new kr(Cr.INVALID_ARGUMENT, \"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().\");\n        return this._cachedChanges && this._cachedChangesIncludeMetadataChanges === t || (this._cachedChanges = function (i, e) {\n          if (i._snapshot.oldDocs.isEmpty()) {\n            var n = 0;\n            return i._snapshot.docChanges.map(function (t) {\n              var e = new _y(i._firestore, i._userDataWriter, t.doc.key, t.doc, new Ty(i._snapshot.mutatedKeys.has(t.doc.key), i._snapshot.fromCache), i.query.converter);\n              return t.doc, {\n                type: \"added\",\n                doc: e,\n                oldIndex: -1,\n                newIndex: n++\n              };\n            });\n          }\n\n          var o = i._snapshot.oldDocs;\n          return i._snapshot.docChanges.filter(function (t) {\n            return e || 3 !== t.type;\n          }).map(function (t) {\n            var e = new _y(i._firestore, i._userDataWriter, t.doc.key, t.doc, new Ty(i._snapshot.mutatedKeys.has(t.doc.key), i._snapshot.fromCache), i.query.converter),\n                n = -1,\n                r = -1;\n            return 0 !== t.type && (n = o.indexOf(t.doc.key), o = o.delete(t.doc.key)), 1 !== t.type && (r = (o = o.add(t.doc)).indexOf(t.doc.key)), {\n              type: function (t) {\n                switch (t) {\n                  case 0:\n                    return \"added\";\n\n                  case 2:\n                  case 3:\n                    return \"modified\";\n\n                  case 1:\n                    return \"removed\";\n\n                  default:\n                    return Vr();\n                }\n              }(t.type),\n              doc: e,\n              oldIndex: n,\n              newIndex: r\n            };\n          });\n        }(this, t), this._cachedChangesIncludeMetadataChanges = t), this._cachedChanges;\n      }, Ay);\n\n      function Ay(t, e, n, r) {\n        this._firestore = t, this._userDataWriter = e, this._snapshot = r, this.metadata = new Ty(r.hasPendingWrites, r.fromCache), this.query = n;\n      }\n\n      function Ny() {\n        return null !== wy && wy.apply(this, arguments) || this;\n      }\n\n      function Dy(t, e, n, r, i, o) {\n        var s = this;\n        return (s = Ey.call(this, t, e, n, r, o) || this)._firestore = t, s._firestoreImpl = t, s.metadata = i, s;\n      }\n\n      function Cy(t, e) {\n        this.hasPendingWrites = t, this.fromCache = e;\n      }\n\n      function ky(t, e) {\n        return t instanceof Iy && e instanceof Iy ? t._firestore === e._firestore && t._key.isEqual(e._key) && (null === t._document ? null === e._document : t._document.isEqual(e._document)) && t._converter === e._converter : t instanceof Sy && e instanceof Sy && t._firestore === e._firestore && up(t.query, e.query) && t.metadata.isEqual(e.metadata) && t._snapshot.isEqual(e._snapshot);\n      }\n\n      function Ry(t) {\n        if (Io(t) && 0 === t.explicitOrderBy.length) throw new kr(Cr.UNIMPLEMENTED, \"limitToLast() queries require specifying at least one orderBy() clause\");\n      }\n\n      Se = function Se() {};\n\n      function xy(t) {\n        for (var e = [], n = 1; n < arguments.length; n++) {\n          e[n - 1] = arguments[n];\n        }\n\n        for (var r = 0, i = e; r < i.length; r++) {\n          t = i[r]._apply(t);\n        }\n\n        return t;\n      }\n\n      var Oy,\n          Ly,\n          Py,\n          My,\n          Fy,\n          Vy = (n(Hy, Fy = Se), Hy.prototype._apply = function (t) {\n        var e = Vp(t.firestore),\n            e = function (t, e, n, r, i, o) {\n          if (r.isKeyField()) {\n            if (\"array-contains\" === i || \"array-contains-any\" === i) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid Query. You can't perform '\" + i + \"' queries on FieldPath.documentId().\");\n\n            if (\"in\" === i || \"not-in\" === i) {\n              Xy(o, i);\n\n              for (var s = [], a = 0, u = o; a < u.length; a++) {\n                var c = u[a];\n                s.push(Yy(n, t, c));\n              }\n\n              h = {\n                arrayValue: {\n                  values: s\n                }\n              };\n            } else h = Yy(n, t, o);\n          } else \"in\" !== i && \"not-in\" !== i && \"array-contains-any\" !== i || Xy(o, i), h = iy(e, \"where\", o, \"in\" === i || \"not-in\" === i);\n\n          var h = Ki.create(r, i, h);\n          return function (t, e) {\n            if (e.g()) {\n              var n = So(t);\n              if (null !== n && !n.isEqual(e.field)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '\" + n.toString() + \"' and '\" + e.field.toString() + \"'\");\n              n = _o(t);\n              null !== n && Jy(0, e.field, n);\n            }\n\n            t = function (t, e) {\n              for (var n = 0, r = t.filters; n < r.length; n++) {\n                var i = r[n];\n                if (0 <= e.indexOf(i.op)) return i.op;\n              }\n\n              return null;\n            }(t, function () {\n              switch (e.op) {\n                case \"!=\":\n                  return [\"!=\", \"not-in\"];\n\n                case \"array-contains\":\n                  return [\"array-contains\", \"array-contains-any\", \"not-in\"];\n\n                case \"in\":\n                  return [\"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"array-contains-any\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\"];\n\n                case \"not-in\":\n                  return [\"array-contains\", \"array-contains-any\", \"in\", \"not-in\", \"!=\"];\n\n                default:\n                  return [];\n              }\n            }());\n\n            if (null !== t) throw t === e.op ? new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You cannot use more than one '\" + e.op.toString() + \"' filter.\") : new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You cannot use '\" + e.op.toString() + \"' filters with '\" + t.toString() + \"' filters.\");\n          }(t, h), h;\n        }(t._query, e, t.firestore._databaseId, this.Wc, this.Gc, this.zc);\n\n        return new $d(t.firestore, t.converter, (t = t._query, e = t.filters.concat([e]), new bo(t.path, t.collectionGroup, t.explicitOrderBy.slice(), e, t.limit, t.limitType, t.startAt, t.endAt)));\n      }, Hy),\n          Uy = (n(zy, My = Se), zy.prototype._apply = function (t) {\n        var e = function (t, e, n) {\n          if (null !== t.startAt) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You must not call startAt() or startAfter() before calling orderBy().\");\n          if (null !== t.endAt) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You must not call endAt() or endBefore() before calling orderBy().\");\n          var r = new go(e, n);\n          return e = r, null !== _o(n = t) || null !== (t = So(n)) && Jy(0, t, e.field), r;\n        }(t._query, this.Wc, this.Hc);\n\n        return new $d(t.firestore, t.converter, (t = t._query, e = t.explicitOrderBy.concat([e]), new bo(t.path, t.collectionGroup, e, t.filters.slice(), t.limit, t.limitType, t.startAt, t.endAt)));\n      }, zy),\n          qy = (n(Qy, Py = Se), Qy.prototype._apply = function (t) {\n        return new $d(t.firestore, t.converter, Co(t._query, this.Jc, this.Yc));\n      }, Qy),\n          By = (n(Gy, Ly = Se), Gy.prototype._apply = function (t) {\n        var e = Wy(t, this.type, this.Xc, this.Zc);\n        return new $d(t.firestore, t.converter, (t = t._query, e = e, new bo(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), t.limit, t.limitType, e, t.endAt)));\n      }, Gy),\n          jy = (n(Ky, Oy = Se), Ky.prototype._apply = function (t) {\n        var e = Wy(t, this.type, this.Xc, this.Zc);\n        return new $d(t.firestore, t.converter, (t = t._query, e = e, new bo(t.path, t.collectionGroup, t.explicitOrderBy.slice(), t.filters.slice(), t.limit, t.limitType, t.startAt, e)));\n      }, Ky);\n\n      function Ky(t, e, n) {\n        var r = this;\n        return (r = Oy.call(this) || this).type = t, r.Xc = e, r.Zc = n, r;\n      }\n\n      function Gy(t, e, n) {\n        var r = this;\n        return (r = Ly.call(this) || this).type = t, r.Xc = e, r.Zc = n, r;\n      }\n\n      function Qy(t, e, n) {\n        var r = this;\n        return (r = Py.call(this) || this).type = t, r.Jc = e, r.Yc = n, r;\n      }\n\n      function zy(t, e) {\n        var n = this;\n        return (n = My.call(this) || this).Wc = t, n.Hc = e, n.type = \"orderBy\", n;\n      }\n\n      function Hy(t, e, n) {\n        var r = this;\n        return (r = Fy.call(this) || this).Wc = t, r.Gc = e, r.zc = n, r.type = \"where\", r;\n      }\n\n      function Wy(t, c, e, n) {\n        if (e[0] = v(e[0]), e[0] instanceof yy) return function (t, e, n, r) {\n          if (!n) throw new kr(Cr.NOT_FOUND, \"Can't use a DocumentSnapshot that doesn't exist for \" + c + \"().\");\n\n          for (var i = [], o = 0, s = No(t); o < s.length; o++) {\n            var a = s[o];\n            if (a.field.isKeyField()) i.push(Ni(e, n.key));else {\n              var u = n.data.field(a.field);\n              if (pi(u)) throw new kr(Cr.INVALID_ARGUMENT, 'Invalid query. You are trying to start or end a query using a document for which the field \"' + a.field + '\" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');\n\n              if (null === u) {\n                a = a.field.canonicalString();\n                throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You are trying to start or end a query using a document for which the field '\" + a + \"' (used as the orderBy) does not exist.\");\n              }\n\n              i.push(u);\n            }\n          }\n\n          return new co(i, r);\n        }(t._query, t.firestore._databaseId, e[0]._document, n);\n        var r = Vp(t.firestore);\n        return function (t, e, n, r, i, o) {\n          var s = t.explicitOrderBy;\n          if (i.length > s.length) throw new kr(Cr.INVALID_ARGUMENT, \"Too many arguments provided to \" + r + \"(). The number of arguments must be less than or equal to the number of orderBy() clauses\");\n\n          for (var a = [], u = 0; u < i.length; u++) {\n            var c = i[u];\n\n            if (s[u].field.isKeyField()) {\n              if (\"string\" != typeof c) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. Expected a string for document ID in \" + r + \"(), but got a \" + typeof c);\n              if (!Ao(t) && -1 !== c.indexOf(\"/\")) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must be a plain document ID, but '\" + c + \"' contains a slash.\");\n              var h = t.path.child(ti.fromString(c));\n              if (!bi.isDocumentKey(h)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to \" + r + \"() must result in a valid document path, but '\" + h + \"' is not because it contains an odd number of segments.\");\n              h = new bi(h);\n              a.push(Ni(e, h));\n            } else {\n              c = iy(n, r, c);\n              a.push(c);\n            }\n          }\n\n          return new co(a, o);\n        }(t._query, t.firestore._databaseId, r, c, e, n);\n      }\n\n      function Yy(t, e, n) {\n        if (\"string\" == typeof (n = v(n))) {\n          if (\"\" === n) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.\");\n          if (!Ao(e) && -1 !== n.indexOf(\"/\")) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '\" + n + \"' contains a '/' character.\");\n          e = e.path.child(ti.fromString(n));\n          if (!bi.isDocumentKey(e)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '\" + e + \"' is not because it has an odd number of segments (\" + e.length + \").\");\n          return Ni(t, new bi(e));\n        }\n\n        if (n instanceof Jd) return Ni(t, n._key);\n        throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: \" + Qd(n) + \".\");\n      }\n\n      function Xy(t, e) {\n        if (!Array.isArray(t) || 0 === t.length) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid Query. A non-empty array is required for '\" + e.toString() + \"' filters.\");\n        if (10 < t.length) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid Query. '\" + e.toString() + \"' filters support a maximum of 10 elements in the value array.\");\n      }\n\n      function Jy(t, e, n) {\n        if (!n.isEqual(e)) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '\" + e.toString() + \"' and so you must also use '\" + e.toString() + \"' as your first argument to orderBy(), but your first orderBy() is on field '\" + n.toString() + \"' instead.\");\n      }\n\n      $y.prototype.convertValue = function (t, e) {\n        switch (void 0 === e && (e = \"none\"), Ei(t)) {\n          case 0:\n            return null;\n\n          case 1:\n            return t.booleanValue;\n\n          case 2:\n            return fi(t.integerValue || t.doubleValue);\n\n          case 3:\n            return this.convertTimestamp(t.timestampValue);\n\n          case 4:\n            return this.convertServerTimestamp(t, e);\n\n          case 5:\n            return t.stringValue;\n\n          case 6:\n            return this.convertBytes(di(t.bytesValue));\n\n          case 7:\n            return this.convertReference(t.referenceValue);\n\n          case 8:\n            return this.convertGeoPoint(t.geoPointValue);\n\n          case 9:\n            return this.convertArray(t.arrayValue, e);\n\n          case 10:\n            return this.convertObject(t.mapValue, e);\n\n          default:\n            throw Vr();\n        }\n      }, $y.prototype.convertObject = function (t, n) {\n        var r = this,\n            i = {};\n        return Xr(t.fields || {}, function (t, e) {\n          i[t] = r.convertValue(e, n);\n        }), i;\n      }, $y.prototype.convertGeoPoint = function (t) {\n        return new _p(fi(t.latitude), fi(t.longitude));\n      }, $y.prototype.convertArray = function (t, e) {\n        var n = this;\n        return (t.values || []).map(function (t) {\n          return n.convertValue(t, e);\n        });\n      }, $y.prototype.convertServerTimestamp = function (t, e) {\n        switch (e) {\n          case \"previous\":\n            var n = function t(e) {\n              e = e.mapValue.fields.__previous_value__;\n              return pi(e) ? t(e) : e;\n            }(t);\n\n            return null == n ? null : this.convertValue(n, e);\n\n          case \"estimate\":\n            return this.convertTimestamp(yi(t));\n\n          default:\n            return null;\n        }\n      }, $y.prototype.convertTimestamp = function (t) {\n        t = li(t);\n        return new Qr(t.seconds, t.nanos);\n      }, $y.prototype.convertDocumentKey = function (t, e) {\n        var n = ti.fromString(t);\n        Ur(Ra(n));\n        t = new Nd(n.get(1), n.get(3)), n = new bi(n.popFirst(5));\n        return t.isEqual(e) || Pr(\"Document \" + n + \" contains a document reference within a different database (\" + t.projectId + \"/\" + t.database + \") which is not supported. It will be treated as a reference in the current database (\" + e.projectId + \"/\" + e.database + \") instead.\"), n;\n      }, I = $y;\n\n      function $y() {}\n\n      function Zy(t, e, n) {\n        return t ? n && (n.merge || n.mergeFields) ? t.toFirestore(e, n) : t.toFirestore(e) : e;\n      }\n\n      var tg,\n          eg = (n(ig, tg = I), ig.prototype.convertBytes = function (t) {\n        return new Tp(t);\n      }, ig.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return new Jd(this.firestore, null, t);\n      }, ig),\n          ng = (rg.prototype.set = function (t, e, n) {\n        this._verifyNotCommitted();\n\n        t = og(t, this._firestore), e = Zy(t.converter, e, n), n = Up(this._dataReader, \"WriteBatch.set\", t._key, e, null !== t.converter, n);\n        return this._mutations.push(n.toMutation(t._key, rs.none())), this;\n      }, rg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        this._verifyNotCommitted();\n\n        t = og(t, this._firestore), e = \"string\" == typeof (e = v(e)) || e instanceof Ep ? ry(this._dataReader, \"WriteBatch.update\", t._key, e, n, r) : ny(this._dataReader, \"WriteBatch.update\", t._key, e);\n        return this._mutations.push(e.toMutation(t._key, rs.exists(!0))), this;\n      }, rg.prototype.delete = function (t) {\n        this._verifyNotCommitted();\n\n        t = og(t, this._firestore);\n        return this._mutations = this._mutations.concat(new Ts(t._key, rs.none())), this;\n      }, rg.prototype.commit = function () {\n        return this._verifyNotCommitted(), this._committed = !0, 0 < this._mutations.length ? this._commitHandler(this._mutations) : Promise.resolve();\n      }, rg.prototype._verifyNotCommitted = function () {\n        if (this._committed) throw new kr(Cr.FAILED_PRECONDITION, \"A write batch can no longer be used after commit() has been called.\");\n      }, rg);\n\n      function rg(t, e) {\n        this._firestore = t, this._commitHandler = e, this._mutations = [], this._committed = !1, this._dataReader = Vp(t);\n      }\n\n      function ig(t) {\n        var e = this;\n        return (e = tg.call(this) || this).firestore = t, e;\n      }\n\n      function og(t, e) {\n        if ((t = v(t)).firestore !== e) throw new kr(Cr.INVALID_ARGUMENT, \"Provided document reference is from a different Firestore instance.\");\n        return t;\n      }\n\n      var sg,\n          ag = (n(ug, sg = I), ug.prototype.convertBytes = function (t) {\n        return new Tp(t);\n      }, ug.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return new Jd(this.firestore, null, t);\n      }, ug);\n\n      function ug(t) {\n        var e = this;\n        return (e = sg.call(this) || this).firestore = t, e;\n      }\n\n      function cg(t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        t = zd(t, Jd);\n        var o = zd(t.firestore, pp),\n            s = Vp(o);\n        return lg(o, [(\"string\" == typeof (e = v(e)) || e instanceof Ep ? ry(s, \"updateDoc\", t._key, e, n, r) : ny(s, \"updateDoc\", t._key, e)).toMutation(t._key, rs.exists(!0))]);\n      }\n\n      function hg(e) {\n        for (var n = [], t = 1; t < arguments.length; t++) {\n          n[t - 1] = arguments[t];\n        }\n\n        e = v(e);\n        var r = {\n          includeMetadataChanges: !1\n        },\n            i = 0;\n        \"object\" != typeof n[i] || lp(n[i]) || (r = n[i], i++);\n        var o,\n            s,\n            a,\n            u,\n            c,\n            h,\n            l = {\n          includeMetadataChanges: r.includeMetadataChanges\n        };\n        return lp(n[i]) && (o = n[i], n[i] = null === (r = o.next) || void 0 === r ? void 0 : r.bind(o), n[i + 1] = null === (r = o.error) || void 0 === r ? void 0 : r.bind(o), n[i + 2] = null === (r = o.complete) || void 0 === r ? void 0 : r.bind(o)), e instanceof Jd ? (a = zd(e.firestore, pp), u = Eo(e._key.path), h = {\n          next: function next(t) {\n            n[i] && n[i](fg(a, e, t));\n          },\n          error: n[i + 1],\n          complete: n[i + 2]\n        }) : (s = zd(e, $d), a = zd(s.firestore, pp), u = s._query, c = new ag(a), h = {\n          next: function next(t) {\n            n[i] && n[i](new Sy(a, c, s, t));\n          },\n          error: n[i + 1],\n          complete: n[i + 2]\n        }, Ry(e._query)), function (n, t, e) {\n          var r = this,\n              i = new id(h),\n              o = new cf(t, i, e);\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(r, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = sf, [4, Td(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), o])];\n                }\n              });\n            });\n          }), function () {\n            i.Wo(), n.asyncQueue.enqueueAndForget(function () {\n              return y(r, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = af, [4, Td(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), o])];\n                  }\n                });\n              });\n            });\n          };\n        }(mp(a), u, l);\n      }\n\n      function lg(t, e) {\n        return function (n, r) {\n          var t = this,\n              i = new eu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = Nf, [4, Ed(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r, i])];\n                }\n              });\n            });\n          }), i.promise;\n        }(mp(t), e);\n      }\n\n      function fg(t, e, n) {\n        var r = n.docs.get(e._key),\n            i = new ag(t);\n        return new Iy(t, i, e._key, r, new Ty(n.hasPendingWrites, n.fromCache), e.converter);\n      }\n\n      var dg,\n          pg = (gg.prototype.get = function (t) {\n        var e = this,\n            n = og(t, this._firestore),\n            r = new eg(this._firestore);\n        return this._transaction.lookup([n._key]).then(function (t) {\n          if (!t || 1 !== t.length) return Vr();\n          t = t[0];\n          if (t.isFoundDocument()) return new yy(e._firestore, r, t.key, t, n.converter);\n          if (t.isNoDocument()) return new yy(e._firestore, r, n._key, null, n.converter);\n          throw Vr();\n        });\n      }, gg.prototype.set = function (t, e, n) {\n        t = og(t, this._firestore), e = Zy(t.converter, e, n), n = Up(this._dataReader, \"Transaction.set\", t._key, e, null !== t.converter, n);\n        return this._transaction.set(t._key, n), this;\n      }, gg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        t = og(t, this._firestore), e = \"string\" == typeof (e = v(e)) || e instanceof Ep ? ry(this._dataReader, \"Transaction.update\", t._key, e, n, r) : ny(this._dataReader, \"Transaction.update\", t._key, e);\n        return this._transaction.update(t._key, e), this;\n      }, gg.prototype.delete = function (t) {\n        t = og(t, this._firestore);\n        return this._transaction.delete(t._key), this;\n      }, n(yg, dg = gg), yg.prototype.get = function (t) {\n        var e = this,\n            n = og(t, this._firestore),\n            r = new ag(this._firestore);\n        return dg.prototype.get.call(this, t).then(function (t) {\n          return new Iy(e._firestore, r, n._key, t._document, new Ty(!1, !1), n.converter);\n        });\n      }, yg);\n\n      function yg(t, e) {\n        var n = this;\n        return (n = dg.call(this, t, e) || this)._firestore = t, n;\n      }\n\n      function gg(t, e) {\n        this._firestore = t, this._transaction = e, this._dataReader = Vp(t);\n      }\n\n      function mg() {\n        if (\"undefined\" == typeof Uint8Array) throw new kr(Cr.UNIMPLEMENTED, \"Uint8Arrays are not available in this environment.\");\n      }\n\n      function vg() {\n        if (\"undefined\" == typeof atob) throw new kr(Cr.UNIMPLEMENTED, \"Blobs are unavailable in Firestore in this environment.\");\n      }\n\n      var bg,\n          wg = (Ng.fromBase64String = function (t) {\n        return vg(), new Ng(Tp.fromBase64String(t));\n      }, Ng.fromUint8Array = function (t) {\n        return mg(), new Ng(Tp.fromUint8Array(t));\n      }, Ng.prototype.toBase64 = function () {\n        return vg(), this._delegate.toBase64();\n      }, Ng.prototype.toUint8Array = function () {\n        return mg(), this._delegate.toUint8Array();\n      }, Ng.prototype.isEqual = function (t) {\n        return this._delegate.isEqual(t._delegate);\n      }, Ng.prototype.toString = function () {\n        return \"Blob(base64: \" + this.toBase64() + \")\";\n      }, Ng),\n          Eg = (Ag.prototype.enableIndexedDbPersistence = function (t, e) {\n        return function (t, e) {\n          wp(t = zd(t, pp));\n\n          var n = mp(t),\n              r = t._freezeSettings(),\n              t = new $f();\n\n          return bp(n, t, new Xf(t, r.cacheSizeBytes, null == e ? void 0 : e.forceOwnership));\n        }(t._delegate, {\n          forceOwnership: e\n        });\n      }, Ag.prototype.enableMultiTabIndexedDbPersistence = function (t) {\n        return function (t) {\n          wp(t = zd(t, pp));\n\n          var e = mp(t),\n              n = t._freezeSettings(),\n              t = new $f();\n\n          return bp(e, t, new Jf(t, n.cacheSizeBytes));\n        }(t._delegate);\n      }, Ag.prototype.clearIndexedDbPersistence = function (t) {\n        return function (n) {\n          var t = this;\n          if (n._initialized && !n._terminated) throw new kr(Cr.FAILED_PRECONDITION, \"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.\");\n          var r = new eu();\n          return n._queue.enqueueAndForgetEvenWhileRestricted(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return t.trys.push([0, 2,, 3]), [4, function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return iu.yt() ? (e = n + \"main\", [4, iu.delete(e)]) : [2, Promise.resolve()];\n\n                            case 1:\n                              return t.sent(), [2];\n                          }\n                        });\n                      });\n                    }(Qc(n._databaseId, n._persistenceKey))];\n\n                  case 1:\n                    return t.sent(), r.resolve(), [3, 3];\n\n                  case 2:\n                    return e = t.sent(), r.reject(e), [3, 3];\n\n                  case 3:\n                    return [2];\n                }\n              });\n            });\n          }), r.promise;\n        }(t._delegate);\n      }, Ag),\n          Tg = (Object.defineProperty(Sg.prototype, \"_databaseId\", {\n        get: function get() {\n          return this._delegate._databaseId;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Sg.prototype.settings = function (t) {\n        t.merge && delete (t = Object.assign(Object.assign({}, this._delegate._getSettings()), t)).merge, this._delegate._setSettings(t);\n      }, Sg.prototype.useEmulator = function (t, e, n) {\n        void 0 === n && (n = {}), function (t, e, n, r) {\n          void 0 === r && (r = {});\n\n          var i = (t = zd(t, Xd))._getSettings();\n\n          if (\"firestore.googleapis.com\" !== i.host && i.host !== e && Mr(\"Host has been set in both settings() and useEmulator(), emulator host will be used\"), t._setSettings(Object.assign(Object.assign({}, i), {\n            host: e + \":\" + n,\n            ssl: !1\n          })), r.mockUserToken) {\n            n = function (t, e) {\n              if (t.uid) throw new Error('The \"uid\" field is no longer supported by mockUserToken. Please use \"sub\" instead for Firebase Auth User ID.');\n              var n = e || \"demo-project\",\n                  r = t.iat || 0;\n              if (!(e = t.sub || t.user_id)) throw new Error(\"mockUserToken must contain 'sub' or 'user_id' field!\");\n              return t = _o2({\n                iss: \"https://securetoken.google.com/\" + n,\n                aud: n,\n                iat: r,\n                exp: r + 3600,\n                auth_time: r,\n                sub: e,\n                user_id: e,\n                firebase: {\n                  sign_in_provider: \"custom\",\n                  identities: {}\n                }\n              }, t), [a.encodeString(JSON.stringify({\n                alg: \"none\",\n                type: \"JWT\"\n              }), !1), a.encodeString(JSON.stringify(t), !1), \"\"].join(\".\");\n            }(r.mockUserToken), r = r.mockUserToken.sub || r.mockUserToken.user_id;\n            if (!r) throw new kr(Cr.INVALID_ARGUMENT, \"mockUserToken must contain 'sub' or 'user_id' field!\");\n            t._credentials = new kd(new Sd(n, new Sh(r)));\n          }\n        }(this._delegate, t, e, n);\n      }, Sg.prototype.enableNetwork = function () {\n        return function (i) {\n          var t = this;\n          return i.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var n, r;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, vd(i)];\n\n                  case 1:\n                    return n = t.sent(), [4, wd(i)];\n\n                  case 2:\n                    return r = t.sent(), [2, (n.setNetworkEnabled(!0), (e = r).$r.delete(0), Cl(e))];\n                }\n\n                var e;\n              });\n            });\n          });\n        }(mp(zd(this._delegate, pp)));\n      }, Sg.prototype.disableNetwork = function () {\n        return function (r) {\n          var t = this;\n          return r.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var e, n;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, vd(r)];\n\n                  case 1:\n                    return e = t.sent(), [4, wd(r)];\n\n                  case 2:\n                    return n = t.sent(), [2, (e.setNetworkEnabled(!1), function (n) {\n                      return y(this, void 0, void 0, function () {\n                        var e;\n                        return g(this, function (t) {\n                          switch (t.label) {\n                            case 0:\n                              return (e = n).$r.add(0), [4, kl(e)];\n\n                            case 1:\n                              return t.sent(), e.Br.set(\"Offline\"), [2];\n                          }\n                        });\n                      });\n                    }(n))];\n                }\n              });\n            });\n          });\n        }(mp(zd(this._delegate, pp)));\n      }, Sg.prototype.enablePersistence = function (t) {\n        var e = !1,\n            n = !1;\n        return t && jd(\"synchronizeTabs\", e = !!t.synchronizeTabs, \"experimentalForceOwningTab\", n = !!t.experimentalForceOwningTab), e ? this.tu.enableMultiTabIndexedDbPersistence(this) : this.tu.enableIndexedDbPersistence(this, n);\n      }, Sg.prototype.clearPersistence = function () {\n        return this.tu.clearIndexedDbPersistence(this);\n      }, Sg.prototype.terminate = function () {\n        return this.eu && (this.eu._removeServiceInstance(\"firestore\"), this.eu._removeServiceInstance(\"firestore-exp\")), this._delegate._delete();\n      }, Sg.prototype.waitForPendingWrites = function () {\n        return function (n) {\n          var t = this,\n              r = new eu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = Rf, [4, Ed(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          }), r.promise;\n        }(mp(zd(this._delegate, pp)));\n      }, Sg.prototype.onSnapshotsInSync = function (t) {\n        return e = this._delegate, t = t, function (n, t) {\n          var e = this,\n              r = new id(t);\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(e, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = function e(t, _e3) {\n                      t.Gr.add(_e3), _e3.next();\n                    }, [4, Td(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          }), function () {\n            r.Wo(), n.asyncQueue.enqueueAndForget(function () {\n              return y(e, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(t, _e4) {\n                        t.Gr.delete(_e4);\n                      }, [4, Td(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r])];\n                  }\n                });\n              });\n            });\n          };\n        }(mp(zd(e, pp)), lp(t) ? t : {\n          next: t\n        });\n        var e;\n      }, Object.defineProperty(Sg.prototype, \"app\", {\n        get: function get() {\n          if (!this.eu) throw new kr(Cr.FAILED_PRECONDITION, \"Firestore was not initialized using the Firebase SDK. 'app' is not available\");\n          return this.eu;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Sg.prototype.collection = function (t) {\n        try {\n          return new zg(this, op(this._delegate, t));\n        } catch (t) {\n          throw Mg(t, \"collection()\", \"Firestore.collection()\");\n        }\n      }, Sg.prototype.doc = function (t) {\n        try {\n          return new Lg(this, sp(this._delegate, t));\n        } catch (t) {\n          throw Mg(t, \"doc()\", \"Firestore.doc()\");\n        }\n      }, Sg.prototype.collectionGroup = function (t) {\n        try {\n          return new Kg(this, function (t, e) {\n            if (t = zd(t, Xd), qd(\"collectionGroup\", \"collection id\", e), 0 <= e.indexOf(\"/\")) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid collection ID '\" + e + \"' passed to function collectionGroup(). Collection IDs must not contain '/'.\");\n            return new $d(t, null, (e = e, new bo(ti.emptyPath(), e)));\n          }(this._delegate, t));\n        } catch (t) {\n          throw Mg(t, \"collectionGroup()\", \"Firestore.collectionGroup()\");\n        }\n      }, Sg.prototype.runTransaction = function (e) {\n        var n,\n            r = this;\n        return function (n, r) {\n          var t = this,\n              i = new eu();\n          return n.asyncQueue.enqueueAndForget(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return [4, md(n).then(function (t) {\n                      return t.datastore;\n                    })];\n\n                  case 1:\n                    return e = t.sent(), new ad(n.asyncQueue, e, r, i).run(), [2];\n                }\n              });\n            });\n          }), i.promise;\n        }(mp(n = this._delegate), function (t) {\n          return t = new pg(n, t), e(new Dg(r, t));\n        });\n      }, Sg.prototype.batch = function () {\n        var e = this;\n        return mp(this._delegate), new Cg(new ng(this._delegate, function (t) {\n          return lg(e._delegate, t);\n        }));\n      }, Sg.prototype.loadBundle = function (t) {\n        throw new kr(Cr.FAILED_PRECONDITION, '\"loadBundle()\" does not exist, have you imported \"firebase/firestore/bundle\"?');\n      }, Sg.prototype.namedQuery = function (t) {\n        throw new kr(Cr.FAILED_PRECONDITION, '\"namedQuery()\" does not exist, have you imported \"firebase/firestore/bundle\"?');\n      }, Sg),\n          Ig = (n(_g, bg = I), _g.prototype.convertBytes = function (t) {\n        return new wg(new Tp(t));\n      }, _g.prototype.convertReference = function (t) {\n        t = this.convertDocumentKey(t, this.firestore._databaseId);\n        return Lg.nu(t, this.firestore, null);\n      }, _g);\n\n      function _g(t) {\n        var e = this;\n        return (e = bg.call(this) || this).firestore = t, e;\n      }\n\n      function Sg(t, e, n) {\n        var r = this;\n        this._delegate = e, this.tu = n, this.INTERNAL = {\n          delete: function _delete() {\n            return r.terminate();\n          }\n        }, t instanceof Nd || (this.eu = t);\n      }\n\n      function Ag() {}\n\n      function Ng(t) {\n        this._delegate = t;\n      }\n\n      var Dg = (Og.prototype.get = function (t) {\n        var e = this,\n            n = Zg(t);\n        return this._delegate.get(n).then(function (t) {\n          return new Bg(e._firestore, new Iy(e._firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, n.converter));\n        });\n      }, Og.prototype.set = function (t, e, n) {\n        t = Zg(t);\n        return n ? (Bd(\"Transaction.set\", n), this._delegate.set(t, e, n)) : this._delegate.set(t, e), this;\n      }, Og.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        var o = Zg(t);\n        return 2 === arguments.length ? this._delegate.update(o, e) : (t = this._delegate).update.apply(t, s([o, e, n], r)), this;\n      }, Og.prototype.delete = function (t) {\n        t = Zg(t);\n        return this._delegate.delete(t), this;\n      }, Og),\n          Cg = (xg.prototype.set = function (t, e, n) {\n        t = Zg(t);\n        return n ? (Bd(\"WriteBatch.set\", n), this._delegate.set(t, e, n)) : this._delegate.set(t, e), this;\n      }, xg.prototype.update = function (t, e, n) {\n        for (var r = [], i = 3; i < arguments.length; i++) {\n          r[i - 3] = arguments[i];\n        }\n\n        var o = Zg(t);\n        return 2 === arguments.length ? this._delegate.update(o, e) : (t = this._delegate).update.apply(t, s([o, e, n], r)), this;\n      }, xg.prototype.delete = function (t) {\n        t = Zg(t);\n        return this._delegate.delete(t), this;\n      }, xg.prototype.commit = function () {\n        return this._delegate.commit();\n      }, xg),\n          kg = (Rg.prototype.fromFirestore = function (t, e) {\n        t = new _y(this._firestore._delegate, this._userDataWriter, t._key, t._document, t.metadata, null);\n        return this._delegate.fromFirestore(new jg(this._firestore, t), null != e ? e : {});\n      }, Rg.prototype.toFirestore = function (t, e) {\n        return e ? this._delegate.toFirestore(t, e) : this._delegate.toFirestore(t);\n      }, Rg.su = function (t, e) {\n        var n = Rg.iu,\n            r = n.get(t);\n        r || (r = new WeakMap(), n.set(t, r));\n        n = r.get(e);\n        return n || (n = new Rg(t, new Ig(t), e), r.set(e, n)), n;\n      }, Rg);\n\n      function Rg(t, e, n) {\n        this._firestore = t, this._userDataWriter = e, this._delegate = n;\n      }\n\n      function xg(t) {\n        this._delegate = t;\n      }\n\n      function Og(t, e) {\n        this._firestore = t, this._delegate = e, this._userDataWriter = new Ig(t);\n      }\n\n      kg.iu = new WeakMap();\n      var Lg = (Pg.ru = function (t, e, n) {\n        if (t.length % 2 != 0) throw new kr(Cr.INVALID_ARGUMENT, \"Invalid document reference. Document references must have an even number of segments, but \" + t.canonicalString() + \" has \" + t.length);\n        return new Pg(e, new Jd(e._delegate, n, new bi(t)));\n      }, Pg.nu = function (t, e, n) {\n        return new Pg(e, new Jd(e._delegate, n, t));\n      }, Object.defineProperty(Pg.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Pg.prototype, \"parent\", {\n        get: function get() {\n          return new zg(this.firestore, this._delegate.parent);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Pg.prototype, \"path\", {\n        get: function get() {\n          return this._delegate.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Pg.prototype.collection = function (t) {\n        try {\n          return new zg(this.firestore, op(this._delegate, t));\n        } catch (t) {\n          throw Mg(t, \"collection()\", \"DocumentReference.collection()\");\n        }\n      }, Pg.prototype.isEqual = function (t) {\n        return (t = v(t)) instanceof Jd && ap(this._delegate, t);\n      }, Pg.prototype.set = function (t, e) {\n        e = Bd(\"DocumentReference.set\", e);\n\n        try {\n          return function (t, e, n) {\n            t = zd(t, Jd);\n            var r = zd(t.firestore, pp),\n                e = Zy(t.converter, e, n);\n            return lg(r, [Up(Vp(r), \"setDoc\", t._key, e, null !== t.converter, n).toMutation(t._key, rs.none())]);\n          }(this._delegate, t, e);\n        } catch (t) {\n          throw Mg(t, \"setDoc()\", \"DocumentReference.set()\");\n        }\n      }, Pg.prototype.update = function (t, e) {\n        for (var n = [], r = 2; r < arguments.length; r++) {\n          n[r - 2] = arguments[r];\n        }\n\n        try {\n          return 1 === arguments.length ? cg(this._delegate, t) : cg.apply(void 0, s([this._delegate, t, e], n));\n        } catch (t) {\n          throw Mg(t, \"updateDoc()\", \"DocumentReference.update()\");\n        }\n      }, Pg.prototype.delete = function () {\n        return lg(zd((t = this._delegate).firestore, pp), [new Ts(t._key, rs.none())]);\n        var t;\n      }, Pg.prototype.onSnapshot = function () {\n        for (var e = this, t = [], n = 0; n < arguments.length; n++) {\n          t[n] = arguments[n];\n        }\n\n        var r = Fg(t),\n            i = Vg(t, function (t) {\n          return new Bg(e.firestore, new Iy(e.firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, e._delegate.converter));\n        });\n        return hg(this._delegate, r, i);\n      }, Pg.prototype.get = function (t) {\n        var e = this;\n        return (\"cache\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = zd(e, Jd);\n          var n = zd(e.firestore, pp),\n              t = mp(n),\n              r = new ag(n);\n          return function (n, r) {\n            var t = this,\n                i = new eu();\n            return n.asyncQueue.enqueueAndForget(function () {\n              return y(t, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(o, s, a) {\n                        return y(this, void 0, void 0, function () {\n                          var r, i;\n                          return g(this, function (t) {\n                            switch (t.label) {\n                              case 0:\n                                return t.trys.push([0, 2,, 3]), [4, (e = s, (n = o).persistence.runTransaction(\"read document\", \"readonly\", function (t) {\n                                  return n.Mn.mn(t, e);\n                                }))];\n\n                              case 1:\n                                return (i = t.sent()).isFoundDocument() ? a.resolve(i) : i.isNoDocument() ? a.resolve(null) : a.reject(new kr(Cr.UNAVAILABLE, \"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)\")), [3, 3];\n\n                              case 2:\n                                return r = t.sent(), i = Xl(r, \"Failed to get document '\" + s + \" from cache\"), a.reject(i), [3, 3];\n\n                              case 3:\n                                return [2];\n                            }\n\n                            var e, n;\n                          });\n                        });\n                      }, [4, bd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r, i])];\n                  }\n                });\n              });\n            }), i.promise;\n          }(t, e._key).then(function (t) {\n            return new Iy(n, r, e._key, t, new Ty(null !== t && t.hasLocalMutations, !0), e.converter);\n          });\n        } : \"server\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = zd(e, Jd);\n          var n = zd(e.firestore, pp);\n          return Id(mp(n), e._key, {\n            source: \"server\"\n          }).then(function (t) {\n            return fg(n, e, t);\n          });\n        } : function (e) {\n          e = zd(e, Jd);\n          var n = zd(e.firestore, pp);\n          return Id(mp(n), e._key).then(function (t) {\n            return fg(n, e, t);\n          });\n        })(this._delegate).then(function (t) {\n          return new Bg(e.firestore, new Iy(e.firestore._delegate, e._userDataWriter, t._key, t._document, t.metadata, e._delegate.converter));\n        });\n      }, Pg.prototype.withConverter = function (t) {\n        return new Pg(this.firestore, t ? this._delegate.withConverter(kg.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, Pg);\n\n      function Pg(t, e) {\n        this.firestore = t, this._delegate = e, this._userDataWriter = new Ig(t);\n      }\n\n      function Mg(t, e, n) {\n        return t.message = t.message.replace(e, n), t;\n      }\n\n      function Fg(t) {\n        for (var e = 0, n = t; e < n.length; e++) {\n          var r = n[e];\n          if (\"object\" == typeof r && !lp(r)) return r;\n        }\n\n        return {};\n      }\n\n      function Vg(t, e) {\n        var n;\n        return {\n          next: function next(t) {\n            n.next && n.next(e(t));\n          },\n          error: null === (t = (n = lp(t[0]) ? t[0] : lp(t[1]) ? t[1] : \"function\" == typeof t[0] ? {\n            next: t[0],\n            error: t[1],\n            complete: t[2]\n          } : {\n            next: t[1],\n            error: t[2],\n            complete: t[3]\n          }).error) || void 0 === t ? void 0 : t.bind(n),\n          complete: null === (t = n.complete) || void 0 === t ? void 0 : t.bind(n)\n        };\n      }\n\n      var Ug,\n          qg,\n          Bg = (Object.defineProperty($g.prototype, \"ref\", {\n        get: function get() {\n          return new Lg(this._firestore, this._delegate.ref);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty($g.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty($g.prototype, \"metadata\", {\n        get: function get() {\n          return this._delegate.metadata;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty($g.prototype, \"exists\", {\n        get: function get() {\n          return this._delegate.exists();\n        },\n        enumerable: !1,\n        configurable: !0\n      }), $g.prototype.data = function (t) {\n        return this._delegate.data(t);\n      }, $g.prototype.get = function (t, e) {\n        return this._delegate.get(t, e);\n      }, $g.prototype.isEqual = function (t) {\n        return ky(this._delegate, t._delegate);\n      }, $g),\n          jg = (n(Jg, qg = Bg), Jg.prototype.data = function (t) {\n        return this._delegate.data(t);\n      }, Jg),\n          Kg = (Xg.prototype.where = function (t, e, n) {\n        try {\n          return new Xg(this.firestore, xy(this._delegate, (r = n, i = e, o = by(\"where\", t), new Vy(o, i, r))));\n        } catch (t) {\n          throw Mg(t, /(orderBy|where)\\(\\)/, \"Query.$1()\");\n        }\n\n        var r, i, o;\n      }, Xg.prototype.orderBy = function (t, e) {\n        try {\n          return new Xg(this.firestore, xy(this._delegate, (n = void 0 === e ? \"asc\" : e, r = by(\"orderBy\", t), new Uy(r, n))));\n        } catch (t) {\n          throw Mg(t, /(orderBy|where)\\(\\)/, \"Query.$1()\");\n        }\n\n        var n, r;\n      }, Xg.prototype.limit = function (t) {\n        try {\n          return new Xg(this.firestore, xy(this._delegate, (Hd(\"limit\", e = t), new qy(\"limit\", e, \"F\"))));\n        } catch (t) {\n          throw Mg(t, \"limit()\", \"Query.limit()\");\n        }\n\n        var e;\n      }, Xg.prototype.limitToLast = function (t) {\n        try {\n          return new Xg(this.firestore, xy(this._delegate, (Hd(\"limitToLast\", e = t), new qy(\"limitToLast\", e, \"L\"))));\n        } catch (t) {\n          throw Mg(t, \"limitToLast()\", \"Query.limitToLast()\");\n        }\n\n        var e;\n      }, Xg.prototype.startAt = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new Xg(this.firestore, xy(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new By(\"startAt\", t, !0);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Mg(t, \"startAt()\", \"Query.startAt()\");\n        }\n      }, Xg.prototype.startAfter = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new Xg(this.firestore, xy(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new By(\"startAfter\", t, !1);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Mg(t, \"startAfter()\", \"Query.startAfter()\");\n        }\n      }, Xg.prototype.endBefore = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new Xg(this.firestore, xy(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new jy(\"endBefore\", t, !0);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Mg(t, \"endBefore()\", \"Query.endBefore()\");\n        }\n      }, Xg.prototype.endAt = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        try {\n          return new Xg(this.firestore, xy(this._delegate, function () {\n            for (var t = [], e = 0; e < arguments.length; e++) {\n              t[e] = arguments[e];\n            }\n\n            return new jy(\"endAt\", t, !1);\n          }.apply(void 0, t)));\n        } catch (t) {\n          throw Mg(t, \"endAt()\", \"Query.endAt()\");\n        }\n      }, Xg.prototype.isEqual = function (t) {\n        return up(this._delegate, t._delegate);\n      }, Xg.prototype.get = function (t) {\n        var e = this;\n        return (\"cache\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = zd(e, $d);\n          var n = zd(e.firestore, pp),\n              t = mp(n),\n              r = new ag(n);\n          return function (n, r) {\n            var t = this,\n                i = new eu();\n            return n.asyncQueue.enqueueAndForget(function () {\n              return y(t, void 0, void 0, function () {\n                var e;\n                return g(this, function (t) {\n                  switch (t.label) {\n                    case 0:\n                      return e = function e(i, o, s) {\n                        return y(this, void 0, void 0, function () {\n                          var e, n, r;\n                          return g(this, function (t) {\n                            switch (t.label) {\n                              case 0:\n                                return t.trys.push([0, 2,, 3]), [4, ch(i, o, !0)];\n\n                              case 1:\n                                return r = t.sent(), e = new wf(o, r.Bn), n = e._o(r.documents), n = e.applyChanges(n, !1), s.resolve(n.snapshot), [3, 3];\n\n                              case 2:\n                                return n = t.sent(), r = Xl(n, \"Failed to execute query '\" + o + \" against cache\"), s.reject(r), [3, 3];\n\n                              case 3:\n                                return [2];\n                            }\n                          });\n                        });\n                      }, [4, bd(n)];\n\n                    case 1:\n                      return [2, e.apply(void 0, [t.sent(), r, i])];\n                  }\n                });\n              });\n            }), i.promise;\n          }(t, e._query).then(function (t) {\n            return new Sy(n, r, e, t);\n          });\n        } : \"server\" === (null == t ? void 0 : t.source) ? function (e) {\n          e = zd(e, $d);\n          var n = zd(e.firestore, pp),\n              t = mp(n),\n              r = new ag(n);\n          return _d(t, e._query, {\n            source: \"server\"\n          }).then(function (t) {\n            return new Sy(n, r, e, t);\n          });\n        } : function (e) {\n          e = zd(e, $d);\n          var n = zd(e.firestore, pp),\n              t = mp(n),\n              r = new ag(n);\n          return Ry(e._query), _d(t, e._query).then(function (t) {\n            return new Sy(n, r, e, t);\n          });\n        })(this._delegate).then(function (t) {\n          return new Qg(e.firestore, new Sy(e.firestore._delegate, e._userDataWriter, e._delegate, t._snapshot));\n        });\n      }, Xg.prototype.onSnapshot = function () {\n        for (var e = this, t = [], n = 0; n < arguments.length; n++) {\n          t[n] = arguments[n];\n        }\n\n        var r = Fg(t),\n            i = Vg(t, function (t) {\n          return new Qg(e.firestore, new Sy(e.firestore._delegate, e._userDataWriter, e._delegate, t._snapshot));\n        });\n        return hg(this._delegate, r, i);\n      }, Xg.prototype.withConverter = function (t) {\n        return new Xg(this.firestore, t ? this._delegate.withConverter(kg.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, Xg),\n          Gg = (Object.defineProperty(Yg.prototype, \"type\", {\n        get: function get() {\n          return this._delegate.type;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Yg.prototype, \"doc\", {\n        get: function get() {\n          return new jg(this._firestore, this._delegate.doc);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Yg.prototype, \"oldIndex\", {\n        get: function get() {\n          return this._delegate.oldIndex;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Yg.prototype, \"newIndex\", {\n        get: function get() {\n          return this._delegate.newIndex;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Yg),\n          Qg = (Object.defineProperty(Wg.prototype, \"query\", {\n        get: function get() {\n          return new Kg(this._firestore, this._delegate.query);\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Wg.prototype, \"metadata\", {\n        get: function get() {\n          return this._delegate.metadata;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Wg.prototype, \"size\", {\n        get: function get() {\n          return this._delegate.size;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Wg.prototype, \"empty\", {\n        get: function get() {\n          return this._delegate.empty;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Wg.prototype, \"docs\", {\n        get: function get() {\n          var e = this;\n          return this._delegate.docs.map(function (t) {\n            return new jg(e._firestore, t);\n          });\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Wg.prototype.docChanges = function (t) {\n        var e = this;\n        return this._delegate.docChanges(t).map(function (t) {\n          return new Gg(e._firestore, t);\n        });\n      }, Wg.prototype.forEach = function (e, n) {\n        var r = this;\n\n        this._delegate.forEach(function (t) {\n          e.call(n, new jg(r._firestore, t));\n        });\n      }, Wg.prototype.isEqual = function (t) {\n        return ky(this._delegate, t._delegate);\n      }, Wg),\n          zg = (n(Hg, Ug = Kg), Object.defineProperty(Hg.prototype, \"id\", {\n        get: function get() {\n          return this._delegate.id;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Hg.prototype, \"path\", {\n        get: function get() {\n          return this._delegate.path;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Object.defineProperty(Hg.prototype, \"parent\", {\n        get: function get() {\n          var t = this._delegate.parent;\n          return t ? new Lg(this.firestore, t) : null;\n        },\n        enumerable: !1,\n        configurable: !0\n      }), Hg.prototype.doc = function (t) {\n        try {\n          return new Lg(this.firestore, void 0 === t ? sp(this._delegate) : sp(this._delegate, t));\n        } catch (t) {\n          throw Mg(t, \"doc()\", \"CollectionReference.doc()\");\n        }\n      }, Hg.prototype.add = function (t) {\n        var e,\n            n,\n            r,\n            i = this;\n        return e = this._delegate, n = t, t = zd(e.firestore, pp), r = sp(e), n = Zy(e.converter, n), lg(t, [Up(Vp(e.firestore), \"addDoc\", r._key, n, null !== e.converter, {}).toMutation(r._key, rs.exists(!1))]).then(function () {\n          return r;\n        }).then(function (t) {\n          return new Lg(i.firestore, t);\n        });\n      }, Hg.prototype.isEqual = function (t) {\n        return ap(this._delegate, t._delegate);\n      }, Hg.prototype.withConverter = function (t) {\n        return new Hg(this.firestore, t ? this._delegate.withConverter(kg.su(this.firestore, t)) : this._delegate.withConverter(null));\n      }, Hg);\n\n      function Hg(t, e) {\n        var n = this;\n        return (n = Ug.call(this, t, e) || this).firestore = t, n._delegate = e, n;\n      }\n\n      function Wg(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function Yg(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function Xg(t, e) {\n        this.firestore = t, this._delegate = e, this._userDataWriter = new Ig(t);\n      }\n\n      function Jg() {\n        return null !== qg && qg.apply(this, arguments) || this;\n      }\n\n      function $g(t, e) {\n        this._firestore = t, this._delegate = e;\n      }\n\n      function Zg(t) {\n        return zd(t, Jd);\n      }\n\n      em.documentId = function () {\n        return new em(ni.keyField().canonicalString());\n      }, em.prototype.isEqual = function (t) {\n        return (t = v(t)) instanceof Ep && this._delegate._internalPath.isEqual(t._internalPath);\n      }, Se = em, tm.serverTimestamp = function () {\n        var t = new Wp(\"serverTimestamp\");\n        return t._methodName = \"FieldValue.serverTimestamp\", new tm(t);\n      }, tm.delete = function () {\n        var t = new Bp(\"deleteField\");\n        return t._methodName = \"FieldValue.delete\", new tm(t);\n      }, tm.arrayUnion = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        var n = function () {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          return new Yp(\"arrayUnion\", t);\n        }.apply(void 0, t);\n\n        return n._methodName = \"FieldValue.arrayUnion\", new tm(n);\n      }, tm.arrayRemove = function () {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        var n = function () {\n          for (var t = [], e = 0; e < arguments.length; e++) {\n            t[e] = arguments[e];\n          }\n\n          return new Xp(\"arrayRemove\", t);\n        }.apply(void 0, t);\n\n        return n._methodName = \"FieldValue.arrayRemove\", new tm(n);\n      }, tm.increment = function (t) {\n        t = new Jp(\"increment\", t);\n        return t._methodName = \"FieldValue.increment\", new tm(t);\n      }, tm.prototype.isEqual = function (t) {\n        return this._delegate.isEqual(t._delegate);\n      }, I = tm;\n\n      function tm(t) {\n        this._delegate = t;\n      }\n\n      function em() {\n        for (var t = [], e = 0; e < arguments.length; e++) {\n          t[e] = arguments[e];\n        }\n\n        this._delegate = new (Ep.bind.apply(Ep, s([void 0], t)))();\n      }\n\n      function nm(t) {\n        return e = this._delegate, s = t, n = mp(e = zd(e, pp)), t = new dp(), function (n, t, r) {\n          var e,\n              i = this,\n              o = (e = s, t = dl(t), e = function (t) {\n            if (t instanceof Uint8Array) return rd(t, void 0);\n            if (t instanceof ArrayBuffer) return rd(new Uint8Array(t), void 0);\n            if (t instanceof ReadableStream) return t.getReader();\n            throw new Error(\"Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream\");\n          }(\"string\" == typeof e ? new TextEncoder().encode(e) : e), new od(e, t));\n          n.asyncQueue.enqueueAndForget(function () {\n            return y(i, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = zf, [4, Ed(n)];\n\n                  case 1:\n                    return e.apply(void 0, [t.sent(), o, r]), [2];\n                }\n              });\n            });\n          });\n        }(n, e._databaseId, t), t;\n        var e, s, n;\n      }\n\n      function rm(t) {\n        var e = this,\n            n = this._delegate,\n            t = t;\n        return function (n, r) {\n          var t = this;\n          return n.asyncQueue.enqueue(function () {\n            return y(t, void 0, void 0, function () {\n              var e;\n              return g(this, function (t) {\n                switch (t.label) {\n                  case 0:\n                    return e = function e(t, _e5) {\n                      var n = t;\n                      return n.persistence.runTransaction(\"Get named query\", \"readonly\", function (t) {\n                        return n.Qe.getNamedQuery(t, _e5);\n                      });\n                    }, [4, bd(n)];\n\n                  case 1:\n                    return [2, e.apply(void 0, [t.sent(), r])];\n                }\n              });\n            });\n          });\n        }(mp(n = zd(n, pp)), t).then(function (t) {\n          return t ? new $d(n, null, t.query) : null;\n        }).then(function (t) {\n          return t ? new Kg(e, t) : null;\n        });\n      }\n\n      var im = (om.prototype.setInstantiationMode = function (t) {\n        return this.instantiationMode = t, this;\n      }, om.prototype.setMultipleInstances = function (t) {\n        return this.multipleInstances = t, this;\n      }, om.prototype.setServiceProps = function (t) {\n        return this.serviceProps = t, this;\n      }, om.prototype.setInstanceCreatedCallback = function (t) {\n        return this.onInstanceCreated = t, this;\n      }, om);\n\n      function om(t, e, n) {\n        this.name = t, this.instanceFactory = e, this.type = n, this.multipleInstances = !1, this.serviceProps = {}, this.instantiationMode = \"LAZY\", this.onInstanceCreated = null;\n      }\n\n      var sm,\n          am,\n          um = {\n        Firestore: Tg,\n        GeoPoint: _p,\n        Timestamp: Qr,\n        Blob: wg,\n        Transaction: Dg,\n        WriteBatch: Cg,\n        DocumentReference: Lg,\n        DocumentSnapshot: Bg,\n        Query: Kg,\n        QueryDocumentSnapshot: jg,\n        QuerySnapshot: Qg,\n        CollectionReference: zg,\n        FieldPath: Se,\n        FieldValue: I,\n        setLogLevel: function setLogLevel(t) {\n          Rr.setLogLevel(t);\n        },\n        CACHE_SIZE_UNLIMITED: -1\n      };\n      (sm = e.default).INTERNAL.registerComponent(new im(\"firestore\", function (t) {\n        var e = t.getProvider(\"app\").getImmediate();\n        return e = e, t = t.getProvider(\"auth-internal\"), new Tg(e, new pp(e, t), new Eg());\n      }, \"PUBLIC\").setServiceProps(Object.assign({}, um))), sm.registerVersion(\"@firebase/firestore\", \"2.3.0\"), (am = Tg).prototype.loadBundle = nm, am.prototype.namedQuery = rm;\n    }.apply(this, arguments);\n  } catch (t) {\n    throw console.error(t), new Error(\"Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.\");\n  }\n});","map":null,"metadata":{},"sourceType":"script"}