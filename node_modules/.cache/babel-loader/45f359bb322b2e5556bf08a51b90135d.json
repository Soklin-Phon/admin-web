{"ast":null,"code":"import _classCallCheck from \"/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport axios from \"axios\";\nimport localStorageService from \"./localStorageService\";\nimport * as firebase from 'firebase';\n\nvar JwtAuthService = function JwtAuthService() {\n  var _this = this;\n\n  _classCallCheck(this, JwtAuthService);\n\n  this.user = {\n    userId: \"1\",\n    role: 'ADMIN',\n    displayName: \"Jason Alexander\",\n    email: \"jasonalexander@gmail.com\",\n    photoURL: \"/assets/images/face-6.jpg\",\n    age: 25,\n    token: \"faslkhfh423oiu4h4kj432rkj23h432u49ufjaklj423h4jkhkjh\"\n  };\n\n  this.loginWithEmailAndPassword = function (email, password) {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        resolve(_this.user);\n      }, 1000);\n    }).then(function (data) {\n      // Login successful\n      // Save token\n      _this.setSession(data.token); // Set user\n\n\n      _this.setUser(data);\n\n      return data;\n    });\n  };\n\n  this.loginWithToken = function () {\n    return new Promise(function (resolve, reject) {\n      setTimeout(function () {\n        resolve(_this.user);\n      }, 100);\n    }).then(function (data) {\n      // Token is valid\n      _this.setSession(data.token);\n\n      _this.setUser(data);\n\n      return data;\n    });\n  };\n\n  this.logout = function () {\n    _this.setSession(null);\n\n    _this.removeUser();\n  };\n\n  this.setSession = function (token) {\n    if (token) {\n      localStorage.setItem(\"jwt_token\", token);\n      axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n    } else {\n      localStorage.removeItem(\"jwt_token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n    }\n  };\n\n  this.setUser = function (user) {\n    localStorageService.setItem(\"auth_user\", user);\n  };\n\n  this.removeUser = function () {\n    localStorage.removeItem(\"auth_user\");\n  };\n};\n\nexport default new JwtAuthService();","map":{"version":3,"sources":["/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/src/app/services/jwtAuthService.js"],"names":["axios","localStorageService","firebase","JwtAuthService","user","userId","role","displayName","email","photoURL","age","token","loginWithEmailAndPassword","password","Promise","resolve","reject","setTimeout","then","data","setSession","setUser","loginWithToken","logout","removeUser","localStorage","setItem","defaults","headers","common","removeItem"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,mBAAP,MAAgC,uBAAhC;AACA,OAAO,KAAKC,QAAZ,MAA0B,UAA1B;;IAGMC,c;;;;;OAGJC,I,GAAO;AACLC,IAAAA,MAAM,EAAE,GADH;AAELC,IAAAA,IAAI,EAAE,OAFD;AAGLC,IAAAA,WAAW,EAAE,iBAHR;AAILC,IAAAA,KAAK,EAAE,0BAJF;AAKLC,IAAAA,QAAQ,EAAE,2BALL;AAMLC,IAAAA,GAAG,EAAE,EANA;AAOLC,IAAAA,KAAK,EAAE;AAPF,G;;OAcPC,yB,GAA4B,UAACJ,KAAD,EAAQK,QAAR,EAAqB;AAC/C,WAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCC,MAAAA,UAAU,CAAC,YAAM;AACfF,QAAAA,OAAO,CAAC,KAAI,CAACX,IAAN,CAAP;AACD,OAFS,EAEP,IAFO,CAAV;AAGD,KAJM,EAIJc,IAJI,CAIC,UAAAC,IAAI,EAAI;AACd;AACA;AACA,MAAA,KAAI,CAACC,UAAL,CAAgBD,IAAI,CAACR,KAArB,EAHc,CAId;;;AACA,MAAA,KAAI,CAACU,OAAL,CAAaF,IAAb;;AACA,aAAOA,IAAP;AACD,KAXM,CAAP;AAYD,G;;OAIDG,c,GAAiB,YAAM;AACrB,WAAO,IAAIR,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtCC,MAAAA,UAAU,CAAC,YAAM;AACfF,QAAAA,OAAO,CAAC,KAAI,CAACX,IAAN,CAAP;AACD,OAFS,EAEP,GAFO,CAAV;AAGD,KAJM,EAIJc,IAJI,CAIC,UAAAC,IAAI,EAAI;AACd;AACA,MAAA,KAAI,CAACC,UAAL,CAAgBD,IAAI,CAACR,KAArB;;AACA,MAAA,KAAI,CAACU,OAAL,CAAaF,IAAb;;AACA,aAAOA,IAAP;AACD,KATM,CAAP;AAUD,G;;OAEDI,M,GAAS,YAAM;AACb,IAAA,KAAI,CAACH,UAAL,CAAgB,IAAhB;;AACA,IAAA,KAAI,CAACI,UAAL;AACD,G;;OAGDJ,U,GAAa,UAAAT,KAAK,EAAI;AACpB,QAAIA,KAAJ,EAAW;AACTc,MAAAA,YAAY,CAACC,OAAb,CAAqB,WAArB,EAAkCf,KAAlC;AACAX,MAAAA,KAAK,CAAC2B,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,IAAiD,YAAYlB,KAA7D;AACD,KAHD,MAGO;AACLc,MAAAA,YAAY,CAACK,UAAb,CAAwB,WAAxB;AACA,aAAO9B,KAAK,CAAC2B,QAAN,CAAeC,OAAf,CAAuBC,MAAvB,CAA8B,eAA9B,CAAP;AACD;AACF,G;;OAGDR,O,GAAU,UAACjB,IAAD,EAAU;AAClBH,IAAAA,mBAAmB,CAACyB,OAApB,CAA4B,WAA5B,EAAyCtB,IAAzC;AACD,G;;OAEDoB,U,GAAa,YAAM;AACjBC,IAAAA,YAAY,CAACK,UAAb,CAAwB,WAAxB;AACD,G;;;AAGH,eAAe,IAAI3B,cAAJ,EAAf","sourcesContent":["import axios from \"axios\";\nimport localStorageService from \"./localStorageService\";\nimport * as firebase from 'firebase';\n\n\nclass JwtAuthService {\n\n  // Dummy user object just for the demo\n  user = {\n    userId: \"1\",\n    role: 'ADMIN',\n    displayName: \"Jason Alexander\",\n    email: \"jasonalexander@gmail.com\",\n    photoURL: \"/assets/images/face-6.jpg\",\n    age: 25,\n    token: \"faslkhfh423oiu4h4kj432rkj23h432u49ufjaklj423h4jkhkjh\"\n  }\n\n  // You need to send http request with email and passsword to your server in this method\n  // Your server will return user object & a Token\n  // User should have role property\n  // You can define roles in app/auth/authRoles.js\n  loginWithEmailAndPassword = (email, password) => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve(this.user);\n      }, 1000);\n    }).then(data => {\n      // Login successful\n      // Save token\n      this.setSession(data.token);\n      // Set user\n      this.setUser(data);\n      return data;\n    });\n  };\n\n  // You need to send http requst with existing token to your server to check token is valid\n  // This method is being used when user logged in & app is reloaded\n  loginWithToken = () => {\n    return new Promise((resolve, reject) => {\n      setTimeout(() => {\n        resolve(this.user);\n      }, 100);\n    }).then(data => {\n      // Token is valid\n      this.setSession(data.token);\n      this.setUser(data);\n      return data;\n    });\n  };\n\n  logout = () => {\n    this.setSession(null);\n    this.removeUser();\n  }\n\n  // Set token to all http request header, so you don't need to attach everytime\n  setSession = token => {\n    if (token) {\n      localStorage.setItem(\"jwt_token\", token);\n      axios.defaults.headers.common[\"Authorization\"] = \"Bearer \" + token;\n    } else {\n      localStorage.removeItem(\"jwt_token\");\n      delete axios.defaults.headers.common[\"Authorization\"];\n    }\n  };\n\n  // Save user to localstorage\n  setUser = (user) => {    \n    localStorageService.setItem(\"auth_user\", user);\n  }\n  // Remove user from localstorage\n  removeUser = () => {\n    localStorage.removeItem(\"auth_user\");\n  }\n}\n\nexport default new JwtAuthService();\n"]},"metadata":{},"sourceType":"module"}