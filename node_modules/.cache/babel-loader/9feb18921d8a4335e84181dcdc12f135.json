{"ast":null,"code":"import _slicedToArray from\"/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import React,{Fragment,useState,useEffect,useContext}from\"react\";import{withRouter}from\"react-router-dom\";import{connect}from\"react-redux\";import AppContext from\"app/appContext\";var redirectRoute=function redirectRoute(props){var location=props.location,history=props.history;var pathname=location.pathname;history.push({pathname:\"/session/signin\",state:{redirectUrl:pathname}});};var getAuthStatus=function getAuthStatus(props,routes){var location=props.location,user=props.user;var pathname=location.pathname;var matched=routes.find(function(r){return r.path===pathname;});var authenticated=matched&&matched.auth&&matched.auth.length?matched.auth.includes(user.role):true;return authenticated;};var AuthGuard=function AuthGuard(_ref){var children=_ref.children,props=_objectWithoutProperties(_ref,[\"children\"]);var _useContext=useContext(AppContext),routes=_useContext.routes;var _useState=useState(getAuthStatus(props,routes)),_useState2=_slicedToArray(_useState,2),authenticated=_useState2[0],setAuthenticated=_useState2[1];useEffect(function(){if(!authenticated){redirectRoute(props);}setAuthenticated(getAuthStatus(props,routes));},[setAuthenticated,authenticated,routes,props]);return authenticated?React.createElement(Fragment,null,children):null;};var mapStateToProps=function mapStateToProps(state){return{user:state.user};};export default withRouter(connect(mapStateToProps)(AuthGuard));","map":null,"metadata":{},"sourceType":"module"}