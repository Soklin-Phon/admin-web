{"ast":null,"code":"import _regeneratorRuntime from\"/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/soklin/Documents/Project/MIS/Dev-MIS/front-end/mis/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";/* eslint-disable react-hooks/exhaustive-deps */import React,{Fragment,useEffect}from\"react\";import{connect}from\"react-redux\";import PropTypes from\"prop-types\";import{setUserData}from\"../redux/actions/UserActions\";import{getNavigationByUser}from\"../redux/actions/NavigationAction\";import jwtAuthService from\"../services/jwtAuthService\";import localStorageService from\"../services/localStorageService\";// import firebaseAuthService from \"../services/firebase/firebaseAuthService\";\nimport history from\"history.js\";var checkJwtAuth=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(setUserData){var user;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return jwtAuthService.loginWithToken();case 2:user=_context.sent;if(user)setUserData(user);else history.push({pathname:\"/session/signin\"});return _context.abrupt(\"return\",user);case 5:case\"end\":return _context.stop();}}},_callee);}));return function checkJwtAuth(_x){return _ref.apply(this,arguments);};}();// const checkFirebaseAuth = () => {\n//   firebaseAuthService.checkAuthStatus(user => {\n//     if (user) {\n//       console.log(user.uid);\n//       console.log(user.email);\n//       console.log(user.emailVerified);\n//     } else {\n//       console.log(\"not logged in\");\n//     }\n//   });\n// };\nvar Auth=function Auth(_ref2){var children=_ref2.children,setUserData=_ref2.setUserData,getNavigationByUser=_ref2.getNavigationByUser;setUserData(localStorageService.getItem(\"auth_user\"));useEffect(function(){checkJwtAuth(setUserData);getNavigationByUser();},[setUserData,getNavigationByUser]);return React.createElement(Fragment,null,children);};var mapStateToProps=function mapStateToProps(state){return{setUserData:PropTypes.func.isRequired,getNavigationByUser:PropTypes.func.isRequired,login:state.login};};export default connect(mapStateToProps,{setUserData:setUserData,getNavigationByUser:getNavigationByUser})(Auth);","map":null,"metadata":{},"sourceType":"module"}